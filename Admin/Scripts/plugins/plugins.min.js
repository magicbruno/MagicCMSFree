var MbWaitSpinner,Mb_history;(function(n,t){"use strict";typeof define=="function"&&define.amd?define(["jquery"],t):typeof exports=="object"?module.exports=t(require("jquery")):n.bootbox=t(n.jQuery)})(this,function init(n,t){"use strict";function a(n){var t=f[e.locale];return t?t[n]:f.en[n]}function o(t,i,r){t.stopPropagation();t.preventDefault();var u=n.isFunction(r)&&r(t)===!1;u||i.modal("hide")}function v(n){var i,t=0;for(i in n)t++;return t}function r(t,i){var r=0;n.each(t,function(n,t){i(n,t,r++)})}function y(t){var i,u;if(typeof t!="object")throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return t=n.extend({},e,t),t.buttons||(t.buttons={}),t.backdrop=t.backdrop?"static":!1,i=t.buttons,u=v(i),r(i,function(t,r,f){if(n.isFunction(r)&&(r=i[t]={callback:r}),n.type(r)!=="object")throw new Error("button with key "+t+" must be an object");r.label||(r.label=t);r.className||(r.className=u<=2&&f===u-1?"btn-primary":"btn-default")}),t}function p(n,t){var r=n.length,i={};if(r<1||r>2)throw new Error("Invalid argument length");return r===2||typeof n[0]=="string"?(i[t[0]]=n[0],i[t[1]]=n[1]):i=n[0],i}function s(t,i,r){return n.extend(!0,{},t,p(i,r))}function h(n,t,i,r){var u={className:"bootbox-"+n,buttons:c.apply(null,t)};return l(s(u,r,i),t)}function c(){for(var t={},n=0,r=arguments.length;n<r;n++){var i=arguments[n],u=i.toLowerCase(),f=i.toUpperCase();t[u]={label:a(f)}}return t}function l(n,i){var u={};return r(i,function(n,t){u[t]=!0}),r(n.buttons,function(n){if(u[n]===t)throw new Error("button key "+n+" is not allowed (options are "+i.join("\n")+")");}),n}var u={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'><\/div><\/div><\/div><\/div><\/div>",header:"<div class='modal-header'><h4 class='modal-title'><\/h4><\/div>",footer:"<div class='modal-footer'><\/div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;<\/button>",form:"<form class='bootbox-form'><\/form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'><\/textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'><\/select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /><\/label><\/div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},e={locale:"en",backdrop:!0,animate:!0,className:null,keyboard:!1,closeButton:!0,show:!0,container:"body"},i={},f;return i.defineLocale=function(n,t){return t?(f[n]={OK:t.OK,CANCEL:t.CANCEL,CONFIRM:t.CONFIRM},f[n]):(delete f[n],null)},i.alert=function(){var t;if(t=h("alert",["ok"],["message","callback"],arguments),t.callback&&!n.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return n.isFunction(t.callback)?t.callback():!0},i.dialog(t)},i.confirm=function(){var t;if(t=h("confirm",["cancel","confirm"],["message","callback"],arguments),t.buttons.cancel.callback=t.onEscape=function(){return t.callback(!1)},t.buttons.confirm.callback=function(){return t.callback(!0)},!n.isFunction(t.callback))throw new Error("confirm requires a callback");return i.dialog(t)},i.prompt=function(){var f,y,h,v,e,p,o,a,w;if(v=n(u.form),y={className:"bootbox-prompt",buttons:c("cancel","confirm"),value:"",inputType:"text"},f=l(s(y,arguments,["title","callback"]),["cancel","confirm"]),p=f.show===t?!0:f.show,f.message=v,f.buttons.cancel.callback=f.onEscape=function(){return f.callback(null)},f.buttons.confirm.callback=function(){var t,i;switch(f.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":t=e.val();break;case"checkbox":i=e.find("input:checked");t=[];r(i,function(i,r){t.push(n(r).val())})}return f.callback(t)},f.show=!1,!f.title)throw new Error("prompt requires a title");if(!n.isFunction(f.callback))throw new Error("prompt requires a callback");if(!u.inputs[f.inputType])throw new Error("invalid prompt type");e=n(u.inputs[f.inputType]);switch(f.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":e.val(f.value);break;case"select":if(a={},o=f.inputOptions||[],!o.length)throw new Error("prompt with select requires options");r(o,function(i,r){var u=e;if(r.value===t||r.text===t)throw new Error("given options in wrong format");r.group&&(a[r.group]||(a[r.group]=n("<optgroup/>").attr("label",r.group)),u=a[r.group]);u.append("<option value='"+r.value+"'>"+r.text+"<\/option>")});r(a,function(n,t){e.append(t)});e.val(f.value);break;case"checkbox":if(w=n.isArray(f.value)?f.value:[f.value],o=f.inputOptions||[],!o.length)throw new Error("prompt with checkbox requires options");if(!o[0].value||!o[0].text)throw new Error("given options in wrong format");e=n("<div/>");r(o,function(t,i){var o=n(u.inputs[f.inputType]);o.find("input").attr("value",i.value);o.find("label").append(i.text);r(w,function(n,t){t===i.value&&o.find("input").prop("checked",!0)});e.append(o)})}f.placeholder&&e.attr("placeholder",f.placeholder);f.pattern&&e.attr("pattern",f.pattern);v.append(e);v.on("submit",function(n){n.preventDefault();n.stopPropagation();h.find(".btn-primary").click()});h=i.dialog(f);h.off("shown.bs.modal");h.on("shown.bs.modal",function(){e.focus()});return p===!0&&h.modal("show"),h},i.dialog=function(i){var c;i=y(i);var f=n(u.dialog),l=f.find(".modal-dialog"),s=f.find(".modal-body"),a=i.buttons,h="",e={onEscape:i.onEscape};if(n.fn.modal===t)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");r(a,function(n,t){h+="<button data-bb-handler='"+n+"' type='button' class='btn "+t.className+"'>"+t.label+"<\/button>";e[n]=t.callback});s.find(".bootbox-body").html(i.message);i.animate===!0&&f.addClass("fade");i.className&&f.addClass(i.className);i.size==="large"&&l.addClass("modal-lg");i.size==="small"&&l.addClass("modal-sm");i.title&&s.before(u.header);i.closeButton&&(c=n(u.closeButton),i.title?f.find(".modal-header").prepend(c):c.css("margin-top","-10px").prependTo(s));i.title&&f.find(".modal-title").html(i.title);h.length&&(s.after(u.footer),f.find(".modal-footer").html(h));f.on("hidden.bs.modal",function(n){n.target===this&&f.remove()});f.on("shown.bs.modal",function(){f.find(".btn-primary:first").focus()});f.on("escape.close.bb",function(n){e.onEscape&&o(n,f,e.onEscape)});f.on("click",".modal-footer button",function(t){var i=n(this).data("bb-handler");o(t,f,e[i])});f.on("click",".bootbox-close-button",function(n){o(n,f,e.onEscape)});f.on("keyup",function(n){n.which===27&&f.trigger("escape.close.bb")});return n(i.container).append(f),f.modal({backdrop:i.backdrop,keyboard:i.keyboard||!1,show:!1}),i.show&&f.modal("show"),f},i.setDefaults=function(){var t={};arguments.length===2?t[arguments[0]]=arguments[1]:t=arguments[0];n.extend(e,t)},i.hideAll=function(){return n(".bootbox").modal("hide"),i},f={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}},i.init=function(t){return init(t||n)},i});+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));typeof i=="string"&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;(u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,"")),r=n(u),i&&i.preventDefault(),r.length||(r=f.closest(".alert")),r.trigger(i=n.Event("close.bs.alert")),i.isDefaultPrevented())||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f=typeof i=="object"&&i;r||u.data("bs.button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.1";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t=t+"Text";u.resetText==null&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](u[t]==null?this.options[t]:u[t]);t=="loadingText"?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),n.prop("type")=="radio"&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:i.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")):this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);!r&&f.toggle&&i=="show"&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n(this.options.trigger).filter('[href="#'+i.id+'"], [data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.1";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!r||!r.length||(f=r.data("bs.collapse"),!f||!f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented())){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented())){if(i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},!n.support.transition)return u.call(this);this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":n.extend({},u.data(),{trigger:this});i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var r=n(this),i=u(r),f={relatedTarget:this};i.hasClass("open")&&((i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.1";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=u(f),o=i.hasClass("open"),r(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click",r);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,r;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.divider):visible a",f=o.find('[role="menu"]'+h+', [role="listbox"]'+h),f.length)&&(r=f.index(t.target),t.which==38&&r>0&&r--,t.which==40&&r<f.length-1&&r++,~r||(r=0),f.eq(r).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',t.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),typeof i=="object"&&i);u||f.data("bs.modal",u=new t(this,e));typeof i=="string"?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.1";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});if(this.$element.trigger(u),!this.isShown&&!u.isDefaultPrevented()){this.isShown=!0;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this));this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.options.backdrop&&r.adjustBackdrop();r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in").attr("aria-hidden",!1);r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)})}};t.prototype.hide=function(i){(i&&i.preventDefault(),i=n.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented())&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){n.which==27&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){if(this.isShown)n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this));else n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){if(r=n.support.transition&&f,this.$backdrop=n('<div class="modal-backdrop '+f+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",n.proxy(function(n){n.target===n.currentTarget&&(this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop();this.adjustDialog()};t.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){if(!n.isDefaultPrevented())u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));typeof i=="string"&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function o(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);e?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu")&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),e=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&e?f.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var f=n(this),r=f.data("bs.tooltip"),u=typeof i=="object"&&i,e=u&&u.selector;(r||i!="destroy")&&(e?(r||f.data("bs.tooltip",r={}),r[e]||(r[e]=new t(this,u))):r||f.data("bs.tooltip",r=new t(this,u)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.1";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;for(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(this.options.viewport.selector||this.options.viewport),f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i&&i.$tip&&i.$tip.is(":visible")){i.hoverState="in";return}if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;if(y){var w=i,b=this.options.container?n(this.options.container):this.$element.parent(),e=this.getPosition(b);i=i=="bottom"&&f.bottom+s>e.bottom?"top":i=="top"&&f.top-s<e.top?"bottom":i=="right"&&f.right+o>e.width?"left":i=="left"&&f.left-o<e.left?"right":i;r.removeClass(w).addClass(i)}p=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(p,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;n=="out"&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top=t.top+o;t.left=t.left+s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?u.left*2-l+h:u.top*2-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function e(){r.hoverState!="in"&&u.detach();r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type);i&&i()}var r=this,u=this.tip(),f=n.Event("hide.bs."+this.type);if(this.$element.trigger(f),!f.isDefaultPrevented())return u.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?u.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r=u.tagName=="BODY",i=u.getBoundingClientRect();i.width==null&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.width&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type)})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var f=n(this),r=f.data("bs.popover"),u=typeof i=="object"&&i,e=u&&u.selector;(r||i!="destroy")&&(e?(r||f.data("bs.popover",r={}),r[e]||(r[e]=new t(this,u))):r||f.data("bs.popover",r=new t(this,u)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.1";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?typeof t=="string"?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};t.prototype.tip=function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery),function(n,t,i){(function(n){"use strict";typeof define=="function"&&define.amd?define("datatables",["jquery"],n):typeof exports=="object"?n(require("jquery")):jQuery&&!jQuery.fn.dataTable&&n(jQuery)})(function(r){"use strict";function ct(n){var f="a aa ai ao as b fn i m o s ",t,i,u={};r.each(n,function(r){t=r.match(/^([^A-Z]+?)([A-Z])/);t&&f.indexOf(t[1]+" ")!==-1&&(i=r.replace(t[0],t[2].toLowerCase()),u[i]=r,t[1]==="o"&&ct(n[r]))});n._hungarianMap=u}function nt(n,t,u){n._hungarianMap||ct(n);var f;r.each(t,function(e){f=n._hungarianMap[e];f!==i&&(u||t[f]===i)&&(f.charAt(0)==="o"?(t[f]||(t[f]={}),r.extend(!0,t[f],t[e]),nt(n[f],t[f],u)):t[f]=t[e])})}function er(n){var i=u.defaults.oLanguage,r=n.sZeroRecords,t;!n.sEmptyTable&&r&&i.sEmptyTable==="No data available in table"&&k(n,n,"sZeroRecords","sEmptyTable");!n.sLoadingRecords&&r&&i.sLoadingRecords==="Loading..."&&k(n,n,"sZeroRecords","sLoadingRecords");n.sInfoThousands&&(n.sThousands=n.sInfoThousands);t=n.sDecimal;t&&ae(t)}function yu(n){var t,i,r;if(y(n,"ordering","bSort"),y(n,"orderMulti","bSortMulti"),y(n,"orderClasses","bSortClasses"),y(n,"orderCellsTop","bSortCellsTop"),y(n,"order","aaSorting"),y(n,"orderFixed","aaSortingFixed"),y(n,"paging","bPaginate"),y(n,"pagingType","sPaginationType"),y(n,"pageLength","iDisplayLength"),y(n,"searching","bFilter"),t=n.aoSearchCols,t)for(i=0,r=t.length;i<r;i++)t[i]&&nt(u.models.oSearch,t[i])}function pu(n){y(n,"orderable","bSortable");y(n,"orderData","aDataSort");y(n,"orderSequence","asSorting");y(n,"orderDataType","sortDataType")}function wu(n){var t=n.oBrowser,i=r("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(r("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(r('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),u=i.find(".test");t.bScrollOversize=u[0].offsetWidth===100;t.bScrollbarLeft=u.offset().left!==1;i.remove()}function bu(n,t,r,u,f,e){var o=u,s,h=!1;for(r!==i&&(s=r,h=!0);o!==f;)n.hasOwnProperty(o)&&(s=h?t(s,n[o],o,n):n[o],h=!0,o+=e);return s}function or(n,i){var f=u.defaults.column,e=n.aoColumns.length,s=r.extend({},u.models.oColumn,f,{nTh:i?i:t.createElement("th"),sTitle:f.sTitle?f.sTitle:i?i.innerHTML:"",aDataSort:f.aDataSort?f.aDataSort:[e],mData:f.mData?f.mData:e,idx:e}),o;n.aoColumns.push(s);o=n.aoPreSearchCols;o[e]=r.extend({},u.models.oSearch,o[e]);fi(n,e,null)}function fi(n,t,f){var e=n.aoColumns[t],o=n.oClasses,l=r(e.nTh),a,h,c;e.sWidthOrig||(e.sWidthOrig=l.attr("width")||null,a=(l.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/),a&&(e.sWidthOrig=a[1]));f!==i&&f!==null&&(pu(f),nt(u.defaults.column,f),f.mDataProp===i||f.mData||(f.mData=f.mDataProp),f.sType&&(e._sManualType=f.sType),f.className&&!f.sClass&&(f.sClass=f.className),r.extend(e,f),k(e,f,"sWidth","sWidthOrig"),typeof f.iDataSort=="number"&&(e.aDataSort=[f.iDataSort]),k(e,f,"aDataSort"));var s=e.mData,p=wt(s),y=e.mRender?wt(e.mRender):null,v=function(n){return typeof n=="string"&&n.indexOf("@")!==-1};e._bAttrSrc=r.isPlainObject(s)&&(v(s.sort)||v(s.type)||v(s.filter));e.fnGetData=function(n,t,r){var u=p(n,t,i,r);return y&&t?y(u,t,n,r):u};e.fnSetData=function(n,t,i){return et(s)(n,t,i)};typeof s!="number"&&(n._rowReadObject=!0);n.oFeatures.bSort||(e.bSortable=!1,l.addClass(o.sSortableNone));h=r.inArray("asc",e.asSorting)!==-1;c=r.inArray("desc",e.asSorting)!==-1;e.bSortable&&(h||c)?h&&!c?(e.sSortingClass=o.sSortableAsc,e.sSortingClassJUI=o.sSortJUIAscAllowed):!h&&c?(e.sSortingClass=o.sSortableDesc,e.sSortingClassJUI=o.sSortJUIDescAllowed):(e.sSortingClass=o.sSortable,e.sSortingClassJUI=o.sSortJUI):(e.sSortingClass=o.sSortableNone,e.sSortingClassJUI="")}function lt(n){var i,t,u,r;if(n.oFeatures.bAutoWidth!==!1)for(i=n.aoColumns,br(n),t=0,u=i.length;t<u;t++)i[t].nTh.style.width=i[t].sWidth;r=n.oScroll;(r.sY!==""||r.sX!=="")&&ti(n);h(n,null,"column-sizing",[n])}function ei(n,t){var i=yt(n,"bVisible");return typeof i[t]=="number"?i[t]:null}function at(n,t){var u=yt(n,"bVisible"),i=r.inArray(t,u);return i!==-1?i:null}function vt(n){return yt(n,"bVisible").length}function yt(n,t){var i=[];return r.map(n.aoColumns,function(n,r){n[t]&&i.push(r)}),i}function sr(n){for(var c=n.aoColumns,p=n.aoData,h=u.ext.type.detect,e,v,r,y,t,o,s,f=0,l=c.length;f<l;f++)if(t=c[f],s=[],!t.sType&&t._sManualType)t.sType=t._sManualType;else if(!t.sType){for(e=0,v=h.length;e<v;e++){for(r=0,y=p.length;r<y;r++){if(s[r]===i&&(s[r]=a(n,r,f,"type")),o=h[e](s[r],n),!o&&e!==h.length-1)break;if(o==="html")break}if(o){t.sType=o;break}}t.sType||(t.sType="string")}}function ku(n,t,u,f){var s,a,o,v,c,y,h,l=n.aoColumns,e;if(t)for(s=t.length-1;s>=0;s--)for(h=t[s],e=h.targets!==i?h.targets:h.aTargets,r.isArray(e)||(e=[e]),o=0,v=e.length;o<v;o++)if(typeof e[o]=="number"&&e[o]>=0){while(l.length<=e[o])or(n);f(e[o],h)}else if(typeof e[o]=="number"&&e[o]<0)f(l.length+e[o],h);else if(typeof e[o]=="string")for(c=0,y=l.length;c<y;c++)(e[o]=="_all"||r(l[c].nTh).hasClass(e[o]))&&f(c,h);if(u)for(s=0,a=u.length;s<a;s++)f(s,u[s])}function tt(n,t,i,f){var o=n.aoData.length,h=r.extend(!0,{},u.models.oRow,{src:i?"dom":"data"}),s,e,c;for(h._aData=t,n.aoData.push(h),s=n.aoColumns,e=0,c=s.length;e<c;e++)i&&hr(n,o,e,a(n,o,e)),s[e].sType=null;return n.aiDisplayMaster.push(o),(i||!n.oFeatures.bDeferRender)&&ar(n,o,i,f),o}function oi(n,t){var i;return t instanceof r||(t=r(t)),t.map(function(t,r){return i=ci(n,r),tt(n,i.data,r,i.cells)})}function de(n,t){return t._DT_RowIndex!==i?t._DT_RowIndex:null}function ge(n,t,i){return r.inArray(i,n.aoData[t].anCells)}function a(n,t,r,u){var h=n.iDraw,e=n.aoColumns[r],s=n.aoData[t]._aData,o=e.sDefaultContent,f=e.fnGetData(s,u,{settings:n,row:t,col:r});if(f===i)return n.iDrawError!=h&&o===null&&(st(n,0,"Requested unknown parameter "+(typeof e.mData=="function"?"{function}":"'"+e.mData+"'")+" for row "+t,4),n.iDrawError=h),o;if((f===s||f===null)&&o!==null)f=o;else if(typeof f=="function")return f.call(s);return f===null&&u=="display"?"":f}function hr(n,t,i,r){var u=n.aoColumns[i],f=n.aoData[t]._aData;u.fnSetData(f,r,{settings:n,row:t,col:i})}function cr(n){return r.map(n.match(/(\\.|[^\.])+/g),function(n){return n.replace(/\\./g,".")})}function wt(n){var t,u;return r.isPlainObject(n)?(t={},r.each(n,function(n,i){i&&(t[n]=wt(i))}),function(n,r,u,f){var e=t[r]||t._;return e!==i?e(n,r,u,f):n}):n===null?function(n){return n}:typeof n=="function"?function(t,i,r,u){return n(t,i,r,u)}:typeof n=="string"&&(n.indexOf(".")!==-1||n.indexOf("[")!==-1||n.indexOf("(")!==-1)?(u=function(n,t,r){var o,l,s,a,f,e,v,h,y,c;if(r!=="")for(f=cr(r),e=0,v=f.length;e<v;e++){if(o=f[e].match(pt),l=f[e].match(ft),o){for(f[e]=f[e].replace(pt,""),f[e]!==""&&(n=n[f[e]]),s=[],f.splice(0,e+1),a=f.join("."),h=0,y=n.length;h<y;h++)s.push(u(n[h],t,a));c=o[0].substring(1,o[0].length-1);n=c===""?s:s.join(c);break}else if(l){f[e]=f[e].replace(ft,"");n=n[f[e]]();continue}if(n===null||n[f[e]]===i)return i;n=n[f[e]]}return n},function(t,i){return u(t,i,n)}):function(t){return t[n]}}function et(n){if(r.isPlainObject(n))return et(n._);if(n===null)return function(){};if(typeof n=="function")return function(t,i,r){n(t,"set",i,r)};if(typeof n=="string"&&(n.indexOf(".")!==-1||n.indexOf("[")!==-1||n.indexOf("(")!==-1)){var t=function(n,r,u){for(var o,y,f=cr(u),s,h=f[f.length-1],l,a,c,v,e=0,p=f.length-1;e<p;e++){if(l=f[e].match(pt),a=f[e].match(ft),l){for(f[e]=f[e].replace(pt,""),n[f[e]]=[],s=f.slice(),s.splice(0,e+1),v=s.join("."),o=0,y=r.length;o<y;o++)c={},t(c,r[o],v),n[f[e]].push(c);return}a&&(f[e]=f[e].replace(ft,""),n=n[f[e]](r));(n[f[e]]===null||n[f[e]]===i)&&(n[f[e]]={});n=n[f[e]]}h.match(ft)?n=n[h.replace(ft,"")](r):n[h.replace(pt,"")]=r};return function(i,r){return t(i,r,n)}}return function(t,i){t[n]=i}}function lr(n){return b(n.aoData,"_aData")}function si(n){n.aoData.length=0;n.aiDisplayMaster.length=0;n.aiDisplay.length=0}function hi(n,t,r){for(var f=-1,u=0,e=n.length;u<e;u++)n[u]==t?f=u:n[u]>t&&n[u]--;f!=-1&&r===i&&n.splice(f,1)}function bt(n,t,r,u){var e=n.aoData[t],f,s,c=function(i,r){while(i.childNodes.length)i.removeChild(i.firstChild);i.innerHTML=a(n,t,r,"display")},o,h;if(r!=="dom"&&(r&&r!=="auto"||e.src!=="dom")){if(o=e.anCells,o)if(u!==i)c(o[u],u);else for(f=0,s=o.length;f<s;f++)c(o[f],f)}else e._aData=ci(n,e,u,u===i?i:e._aData).data;if(e._aSortData=null,e._aFilterData=null,h=n.aoColumns,u!==i)h[u].sType=null;else{for(f=0,s=h.length;f<s;f++)h[f].sType=null;vr(e)}}function ci(n,t,u,f){var s=[],o=t.firstChild,v,e,h=0,c,b=n.aoColumns,p=n._rowReadObject,l,y,a,w;if(f=f||p?{}:[],l=function(n,t){var i,r,u;typeof n=="string"&&(i=n.indexOf("@"),i!==-1&&(r=n.substring(i+1),u=et(n),u(f,t.getAttribute(r))))},y=function(n){if(u===i||u===h)if(e=b[h],c=r.trim(n.innerHTML),e&&e._bAttrSrc){var t=et(e.mData._);t(f,c);l(e.mData.sort,n);l(e.mData.type,n);l(e.mData.filter,n)}else p?(e._setter||(e._setter=et(e.mData)),e._setter(f,c)):f[h]=c;h++},o)while(o)v=o.nodeName.toUpperCase(),(v=="TD"||v=="TH")&&(y(o),s.push(o)),o=o.nextSibling;else for(s=t.anCells,a=0,w=s.length;a<w;a++)y(s[a]);return{data:f,cells:s}}function ar(n,i,r,u){var s=n.aoData[i],l=s._aData,v=[],c,o,f,e,y;if(s.nTr===null){for(c=r||t.createElement("tr"),s.nTr=c,s.anCells=v,c._DT_RowIndex=i,vr(s),e=0,y=n.aoColumns.length;e<y;e++)f=n.aoColumns[e],o=r?u[e]:t.createElement(f.sCellType),v.push(o),(!r||f.mRender||f.mData!==e)&&(o.innerHTML=a(n,i,e,"display")),f.sClass&&(o.className+=" "+f.sClass),f.bVisible&&!r?c.appendChild(o):!f.bVisible&&r&&o.parentNode.removeChild(o),f.fnCreatedCell&&f.fnCreatedCell.call(n.oInstance,o,a(n,i,e),l,i,e);h(n,"aoRowCreatedCallback",null,[c,l,i])}s.nTr.setAttribute("role","row")}function vr(n){var i=n.nTr,t=n._aData,u;i&&(t.DT_RowId&&(i.id=t.DT_RowId),t.DT_RowClass&&(u=t.DT_RowClass.split(" "),n.__rowc=n.__rowc?fr(n.__rowc.concat(u)):u,r(i).removeClass(n.__rowc.join(" ")).addClass(t.DT_RowClass)),t.DT_RowData&&r(i).data(t.DT_RowData))}function du(n){var i,e,u,l,t,f=n.nTHead,a=n.nTFoot,o=r("th, td",f).length===0,s=n.oClasses,h=n.aoColumns,c;for(o&&(l=r("<tr/>").appendTo(f)),i=0,e=h.length;i<e;i++)t=h[i],u=r(t.nTh).addClass(t.sClass),o&&u.appendTo(l),n.oFeatures.bSort&&(u.addClass(t.sSortingClass),t.bSortable!==!1&&(u.attr("tabindex",n.iTabIndex).attr("aria-controls",n.sTableId),dr(n,t.nTh,i))),t.sTitle!=u.html()&&u.html(t.sTitle),tu(n,"header")(n,u,t,s);if(o&&dt(n.aoHeader,f),r(f).find(">tr").attr("role","row"),r(f).find(">tr>th, >tr>td").addClass(s.sHeaderTH),r(a).find(">tr>th, >tr>td").addClass(s.sFooterTH),a!==null)for(c=n.aoFooter[0],i=0,e=c.length;i<e;i++)t=h[i],t.nTf=c[i].cell,t.sClass&&r(t.nTf).addClass(t.sClass)}function kt(n,t,u){var f,a,e,y,v,p,c,o=[],l=[],w=n.aoColumns.length,s,h;if(t){for(u===i&&(u=!1),f=0,a=t.length;f<a;f++){for(o[f]=t[f].slice(),o[f].nTr=t[f].nTr,e=w-1;e>=0;e--)n.aoColumns[e].bVisible||u||o[f].splice(e,1);l.push([])}for(f=0,a=o.length;f<a;f++){if(c=o[f].nTr,c)while(p=c.firstChild)c.removeChild(p);for(e=0,y=o[f].length;e<y;e++)if(s=1,h=1,l[f][e]===i){for(c.appendChild(o[f][e].cell),l[f][e]=1;o[f+s]!==i&&o[f][e].cell==o[f+s][e].cell;)l[f+s][e]=1,s++;while(o[f][e+h]!==i&&o[f][e].cell==o[f][e+h].cell){for(v=0;v<s;v++)l[f+v][e+h]=1;h++}r(o[f][e].cell).attr("rowspan",s).attr("colspan",h)}}}}function it(n){var ut=h(n,"aoPreDrawCallback","preDraw",[n]),c,l,it,rt,f,nt,t,a,v,y,tt;if(r.inArray(!1,ut)!==-1){w(n,!1);return}var b=[],k=0,d=n.asStripeClasses,g=d.length,ft=n.aoOpenRows.length,e=n.oLanguage,u=n.iInitDisplayStart,o=p(n)=="ssp",s=n.aiDisplay;if(n.bDrawing=!0,u!==i&&u!==-1&&(n._iDisplayStart=o?u:u>=n.fnRecordsDisplay()?0:u,n.iInitDisplayStart=-1),c=n._iDisplayStart,l=n.fnDisplayEnd(),n.bDeferLoading)n.bDeferLoading=!1,n.iDraw++,w(n,!1);else if(o){if(!n.bDestroying&&!nf(n))return}else n.iDraw++;if(s.length!==0)for(it=o?0:c,rt=o?n.aoData.length:l,f=it;f<rt;f++)nt=s[f],t=n.aoData[nt],t.nTr===null&&ar(n,nt),a=t.nTr,g!==0&&(v=d[k%g],t._sRowStripe!=v&&(r(a).removeClass(t._sRowStripe).addClass(v),t._sRowStripe=v)),h(n,"aoRowCallback",null,[a,t._aData,k,f]),b.push(a),k++;else y=e.sZeroRecords,n.iDraw==1&&p(n)=="ajax"?y=e.sLoadingRecords:e.sEmptyTable&&n.fnRecordsTotal()===0&&(y=e.sEmptyTable),b[0]=r("<tr/>",{"class":g?d[0]:""}).append(r("<td />",{valign:"top",colSpan:vt(n),"class":n.oClasses.sRowEmpty}).html(y))[0];h(n,"aoHeaderCallback","header",[r(n.nTHead).children("tr")[0],lr(n),c,l,s]);h(n,"aoFooterCallback","footer",[r(n.nTFoot).children("tr")[0],lr(n),c,l,s]);tt=r(n.nTBody);tt.children().detach();tt.append(r(b));h(n,"aoDrawCallback","draw",[n]);n.bSorted=!1;n.bFiltered=!1;n.bDrawing=!1}function rt(n,t){var i=n.oFeatures,r=i.bSort,u=i.bFilter;r&&ie(n);u?gt(n,n.oPreviousSearch):n.aiDisplay=n.aiDisplayMaster.slice();t!==!0&&(n._iDisplayStart=0);n._drawHold=t;it(n);n._drawHold=!1}function gu(n){var v=n.oClasses,g=r(n.nTable),k=r("<div/>").insertBefore(g),h=n.oFeatures,o=r("<div/>",{id:n.sTableId+"_wrapper","class":v.sWrapper+(n.nTFoot?"":" "+v.sNoFooter)}),c,f,t,s,y,i,l,e,p,w,a,d,b;for(n.nHolding=k[0],n.nTableWrapper=o[0],n.nTableReinsertBefore=n.nTable.nextSibling,c=n.sDom.split(""),e=0;e<c.length;e++){if(f=null,t=c[e],t=="<"){if(s=r("<div/>")[0],y=c[e+1],y=="'"||y=='"'){for(i="",l=2;c[e+l]!=y;)i+=c[e+l],l++;i=="H"?i=v.sJUIHeader:i=="F"&&(i=v.sJUIFooter);i.indexOf(".")!=-1?(p=i.split("."),s.id=p[0].substr(1,p[0].length-1),s.className=p[1]):i.charAt(0)=="#"?s.id=i.substr(1,i.length-1):s.className=i;e+=l}o.append(s);o=r(s)}else if(t==">")o=o.parent();else if(t=="l"&&h.bPaginate&&h.bLengthChange)f=yf(n);else if(t=="f"&&h.bFilter)f=uf(n);else if(t=="r"&&h.bProcessing)f=wf(n);else if(t=="t")f=bf(n);else if(t=="i"&&h.bInfo)f=lf(n);else if(t=="p"&&h.bPaginate)f=pf(n);else if(u.ext.feature.length!==0)for(w=u.ext.feature,a=0,d=w.length;a<d;a++)if(t==w[a].cFeature){f=w[a].fnInit(n);break}f&&(b=n.aanFeatures,b[t]||(b[t]=[]),b[t].push(f),o.append(f))}k.replaceWith(o)}function dt(n,t){var c=r(t).children("tr"),l,u,i,o,s,h,a,v,f,e,y,p=function(n,t,i){for(var r=n[t];r[i];)i++;return i};for(n.splice(0,n.length),i=0,h=c.length;i<h;i++)n.push([]);for(i=0,h=c.length;i<h;i++)for(l=c[i],v=0,u=l.firstChild;u;){if(u.nodeName.toUpperCase()=="TD"||u.nodeName.toUpperCase()=="TH")for(f=u.getAttribute("colspan")*1,e=u.getAttribute("rowspan")*1,f=!f||f===0||f===1?1:f,e=!e||e===0||e===1?1:e,a=p(n,i,v),y=f===1?!0:!1,s=0;s<f;s++)for(o=0;o<e;o++)n[i+o][a+s]={cell:u,unique:y},n[i+o].nTr=l;u=u.nextSibling}}function li(n,t,i){var f=[],u,e,r,o;for(i||(i=n.aoHeader,t&&(i=[],dt(i,t))),u=0,e=i.length;u<e;u++)for(r=0,o=i[u].length;r<o;r++)!i[u][r].unique||f[r]&&n.bSortCellsTop||(f[r]=i[u][r].cell);return f}function ai(n,t,i){var f,l,e,u,s,o,c;h(n,"aoServerParams","serverParams",[t]);t&&r.isArray(t)&&(f={},l=/(.*?)\[\]$/,r.each(t,function(n,t){var r=t.name.match(l),i;r?(i=r[0],f[i]||(f[i]=[]),f[i].push(t.value)):f[t.name]=t.value}),t=f);u=n.ajax;s=n.oInstance;r.isPlainObject(u)&&u.data&&(e=u.data,o=r.isFunction(e)?e(t):e,t=r.isFunction(e)&&o?o:r.extend(!0,t,o),delete u.data);c={data:t,success:function(t){var r=t.error||t.sError;r&&n.oApi._fnLog(n,0,r);n.json=t;h(n,null,"xhr",[n,t]);i(t)},dataType:"json",cache:!1,type:n.sServerMethod,error:function(t,i){var r=n.oApi._fnLog;i=="parsererror"?r(n,0,"Invalid JSON response",1):t.readyState===4&&r(n,0,"Ajax error",7);w(n,!1)}};n.oAjaxData=t;h(n,null,"preXhr",[n,t]);n.fnServerData?n.fnServerData.call(s,n.sAjaxSource,r.map(t,function(n,t){return{name:t,value:n}}),i,n):n.sAjaxSource||typeof u=="string"?n.jqXHR=r.ajax(r.extend(c,{url:u||n.sAjaxSource})):r.isFunction(u)?n.jqXHR=u.call(s,t,i,n):(n.jqXHR=r.ajax(r.extend(c,u)),u.data=e)}function nf(n){return n.bAjaxDataGet?(n.iDraw++,w(n,!0),ai(n,tf(n),function(t){rf(n,t)}),!1):!0}function tf(n){var c=n.aoColumns,y=c.length,e=n.oFeatures,h=n.oPreviousSearch,d=n.aoPreSearchCols,i,l=[],a,f,o,p=ot(n),w=n._iDisplayStart,k=e.bPaginate!==!1?n._iDisplayLength:-1,t=function(n,t){l.push({name:n,value:t})},s,v;for(t("sEcho",n.iDraw),t("iColumns",y),t("sColumns",b(c,"sName").join(",")),t("iDisplayStart",w),t("iDisplayLength",k),s={draw:n.iDraw,columns:[],order:[],start:w,length:k,search:{value:h.sSearch,regex:h.bRegex}},i=0;i<y;i++)f=c[i],o=d[i],a=typeof f.mData=="function"?"function":f.mData,s.columns.push({data:a,name:f.sName,searchable:f.bSearchable,orderable:f.bSortable,search:{value:o.sSearch,regex:o.bRegex}}),t("mDataProp_"+i,a),e.bFilter&&(t("sSearch_"+i,o.sSearch),t("bRegex_"+i,o.bRegex),t("bSearchable_"+i,f.bSearchable)),e.bSort&&t("bSortable_"+i,f.bSortable);return(e.bFilter&&(t("sSearch",h.sSearch),t("bRegex",h.bRegex)),e.bSort&&(r.each(p,function(n,i){s.order.push({column:i.col,dir:i.dir});t("iSortCol_"+n,i.col);t("sSortDir_"+n,i.dir)}),t("iSortingCols",p.length)),v=u.ext.legacy.ajax,v===null)?n.sAjaxSource?l:s:v?l:s}function rf(n,t){var u=function(n,r){return t[n]!==i?t[n]:t[r]},f=u("sEcho","draw"),s=u("iTotalRecords","recordsTotal"),h=u("iTotalDisplayRecords","recordsFiltered"),e,r,o;if(f){if(f*1<n.iDraw)return;n.iDraw=f*1}for(si(n),n._iRecordsTotal=parseInt(s,10),n._iRecordsDisplay=parseInt(h,10),e=vi(n,t),r=0,o=e.length;r<o;r++)tt(n,e[r]);n.aiDisplay=n.aiDisplayMaster.slice();n.bAjaxDataGet=!1;it(n);n._bInitComplete||wi(n,t);n.bAjaxDataGet=!0;w(n,!1)}function vi(n,t){var u=r.isPlainObject(n.ajax)&&n.ajax.dataSrc!==i?n.ajax.dataSrc:n.sAjaxDataProp;return u==="data"?t.aaData||t[u]:u!==""?wt(u)(t):t}function uf(n){var f=n.oClasses,e=n.sTableId,o=n.oLanguage,i=n.oPreviousSearch,s=n.aanFeatures,h='<input type="search" class="'+f.sFilterInput+'"/>',u=o.sSearch;u=u.match(/_INPUT_/)?u.replace("_INPUT_",h):u+h;var c=r("<div/>",{id:s.f?null:e+"_filter","class":f.sFilter}).append(r("<label/>").append(u)),l=function(){var r=s.f,t=this.value?this.value:"";t!=i.sSearch&&(gt(n,{sSearch:t,bRegex:i.bRegex,bSmart:i.bSmart,bCaseInsensitive:i.bCaseInsensitive}),n._iDisplayStart=0,it(n))},a=n.searchDelay!==null?n.searchDelay:p(n)==="ssp"?400:0,v=r("input",c).val(i.sSearch).attr("placeholder",o.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",a?bi(l,a):l).bind("keypress.DT",function(n){if(n.keyCode==13)return!1}).attr("aria-controls",e);r(n.nTable).on("search.dt.DT",function(r,u){if(n===u)try{v[0]!==t.activeElement&&v.val(i.sSearch)}catch(f){}});return c[0]}function gt(n,t,r){var e=n.oPreviousSearch,f=n.aoPreSearchCols,o=function(n){e.sSearch=n.sSearch;e.bRegex=n.bRegex;e.bSmart=n.bSmart;e.bCaseInsensitive=n.bCaseInsensitive},s=function(n){return n.bEscapeRegex!==i?!n.bEscapeRegex:n.bRegex},u;if(sr(n),p(n)!="ssp"){for(of(n,t.sSearch,r,s(t),t.bSmart,t.bCaseInsensitive),o(t),u=0;u<f.length;u++)ef(n,f[u].sSearch,u,s(f[u]),f[u].bSmart,f[u].bCaseInsensitive);ff(n)}else o(t);n.bFiltered=!0;h(n,null,"search",[n])}function ff(n){for(var o,i,h,s=u.ext.search,t=n.aiDisplay,f,r,e=0,c=s.length;e<c;e++){for(o=[],i=0,h=t.length;i<h;i++)r=t[i],f=n.aoData[r],s[e](n,f._aFilterData,r,f._aData,i)&&o.push(r);t.length=0;t.push.apply(t,o)}}function ef(n,t,i,r,u,f){var s,o,h,e;if(t!=="")for(o=n.aiDisplay,h=yr(t,r,u,f),e=o.length-1;e>=0;e--)s=n.aoData[o[e]]._aFilterData[i],h.test(s)||o.splice(e,1)}function of(n,t,i,r,f,e){var a=yr(t,r,f,e),h=n.oPreviousSearch.sSearch,c=n.aiDisplayMaster,s,l,o;if(u.ext.search.length!==0&&(i=!0),l=sf(n),t.length<=0)n.aiDisplay=c.slice();else for((l||i||h.length>t.length||t.indexOf(h)!==0||n.bSorted)&&(n.aiDisplay=c.slice()),s=n.aiDisplay,o=s.length-1;o>=0;o--)a.test(n.aoData[s[o]]._sFilterRow)||s.splice(o,1)}function yr(n,t,i,u){if(n=t?n:yi(n),i){var f=r.map(n.match(/"[^"]+"|[^ ]+/g)||"",function(n){if(n.charAt(0)==='"'){var t=n.match(/^"(.*)"$/);n=t?t[1]:n}return n.replace('"',"")});n="^(?=.*?"+f.join(")(?=.*?")+").*$"}return new RegExp(n,u?"i":"")}function yi(n){return n.replace(we,"\\$1")}function sf(n){for(var s=n.aoColumns,f,r,c,e,t,o,l=u.ext.type.search,v=!1,i=0,h=n.aoData.length;i<h;i++)if(o=n.aoData[i],!o._aFilterData){for(e=[],r=0,c=s.length;r<c;r++)f=s[r],f.bSearchable?(t=a(n,i,r,"filter"),l[f.sType]&&(t=l[f.sType](t)),t===null&&(t=""),typeof t!="string"&&t.toString&&(t=t.toString())):t="",t.indexOf&&t.indexOf("&")!==-1&&(pi.innerHTML=t,t=no?pi.textContent:pi.innerText),t.replace&&(t=t.replace(/[\r\n]/g,"")),e.push(t);o._aFilterData=e;o._sFilterRow=e.join("  ");v=!0}return v}function hf(n){return{search:n.sSearch,smart:n.bSmart,regex:n.bRegex,caseInsensitive:n.bCaseInsensitive}}function cf(n){return{sSearch:n.search,bSmart:n.smart,bRegex:n.regex,bCaseInsensitive:n.caseInsensitive}}function lf(n){var t=n.sTableId,i=n.aanFeatures.i,u=r("<div/>",{"class":n.oClasses.sInfo,id:i?null:t+"_info"});return i||(n.aoDrawCallback.push({fn:af,sName:"information"}),u.attr("role","status").attr("aria-live","polite"),r(n.nTable).attr("aria-describedby",t+"_info")),u[0]}function af(n){var e=n.aanFeatures.i,f;if(e.length!==0){var i=n.oLanguage,s=n._iDisplayStart+1,h=n.fnDisplayEnd(),o=n.fnRecordsTotal(),u=n.fnRecordsDisplay(),t=u?i.sInfo:i.sInfoEmpty;u!==o&&(t+=" "+i.sInfoFiltered);t+=i.sInfoPostFix;t=vf(n,t);f=i.fnInfoCallback;f!==null&&(t=f.call(n.oInstance,n,s,h,o,u,t));r(e).html(t)}}function vf(n,t){var i=n.fnFormatNumber,u=n._iDisplayStart+1,r=n._iDisplayLength,f=n.fnRecordsDisplay(),e=r===-1;return t.replace(/_START_/g,i.call(n,u)).replace(/_END_/g,i.call(n,n.fnDisplayEnd())).replace(/_MAX_/g,i.call(n,n.fnRecordsTotal())).replace(/_TOTAL_/g,i.call(n,f)).replace(/_PAGE_/g,i.call(n,e?1:Math.ceil(u/r))).replace(/_PAGES_/g,i.call(n,e?1:Math.ceil(f/r)))}function ni(n){var t,u,e=n.iInitDisplayStart,f=n.aoColumns,i,s=n.oFeatures,r;if(!n.bInitialised){setTimeout(function(){ni(n)},200);return}for(gu(n),du(n),kt(n,n.aoHeader),kt(n,n.aoFooter),w(n,!0),s.bAutoWidth&&br(n),t=0,u=f.length;t<u;t++)i=f[t],i.sWidth&&(i.nTh.style.width=o(i.sWidth));rt(n);r=p(n);r!="ssp"&&(r=="ajax"?ai(n,[],function(i){var r=vi(n,i);for(t=0;t<r.length;t++)tt(n,r[t]);n.iInitDisplayStart=e;rt(n);w(n,!1);wi(n,i)},n):(w(n,!1),wi(n)))}function wi(n,t){n._bInitComplete=!0;t&&lt(n);h(n,"aoInitComplete","init",[n,t])}function pr(n,t){var i=parseInt(t,10);n._iDisplayLength=i;nu(n);h(n,null,"length",[n,i])}function yf(n){for(var t,e=n.oClasses,f=n.sTableId,i=n.aLengthMenu,o=r.isArray(i[0]),s=o?i[0]:i,c=o?i[1]:i,h=r("<select/>",{name:f+"_length","aria-controls":f,"class":e.sLengthSelect}),u=0,l=s.length;u<l;u++)h[0][u]=new Option(c[u],s[u]);return t=r("<div><label/><\/div>").addClass(e.sLength),n.aanFeatures.l||(t[0].id=f+"_length"),t.children().append(n.oLanguage.sLengthMenu.replace("_MENU_",h[0].outerHTML)),r("select",t).val(n._iDisplayLength).bind("change.DT",function(){pr(n,r(this).val());it(n)}),r(n.nTable).bind("length.dt.DT",function(i,u,f){n===u&&r("select",t).val(f)}),t[0]}function pf(n){var e=n.sPaginationType,t=u.ext.pager[e],o=typeof t=="function",s=function(n){it(n)},i=r("<div/>").addClass(n.oClasses.sPaging+e)[0],f=n.aanFeatures;return o||t.fnInit(n,i,s),f.p||(i.id=n.sTableId+"_paginate",n.aoDrawCallback.push({fn:function(n){if(o)for(var l=n._iDisplayStart,r=n._iDisplayLength,a=n.fnRecordsDisplay(),u=r===-1,e=u?0:Math.ceil(l/r),h=u?1:Math.ceil(a/r),v=t(e,h),i=0,c=f.p.length;i<c;i++)tu(n,"pageButton")(n,f.p[i],i,v,e,h);else t.fnUpdate(n,s)},sName:"pagination"})),i}function wr(n,t,i){var r=n._iDisplayStart,u=n._iDisplayLength,f=n.fnRecordsDisplay(),e;return f===0||u===-1?r=0:typeof t=="number"?(r=t*u,r>f&&(r=0)):t=="first"?r=0:t=="previous"?(r=u>=0?r-u:0,r<0&&(r=0)):t=="next"?r+u<f&&(r+=u):t=="last"?r=Math.floor((f-1)/u)*u:st(n,0,"Unknown paging action: "+t,5),e=n._iDisplayStart!==r,n._iDisplayStart=r,e&&(h(n,null,"page",[n]),i&&it(n)),e}function wf(n){return r("<div/>",{id:n.aanFeatures.r?null:n.sTableId+"_processing","class":n.oClasses.sProcessing}).html(n.oLanguage.sProcessing).insertBefore(n.nTable)[0]}function w(n,t){n.oFeatures.bProcessing&&r(n.aanFeatures.r).css("display",t?"block":"none");h(n,null,"processing",[n,t])}function bf(n){var t=r(n.nTable),i,l;if(t.attr("role","grid"),i=n.oScroll,i.sX===""&&i.sY==="")return n.nTable;var u=i.sX,b=i.sY,f=n.oClasses,h=t.children("caption"),v=h.length?h[0]._captionSide:null,k=r(t[0].cloneNode(!1)),d=r(t[0].cloneNode(!1)),s=t.children("tfoot"),e="<div/>",c=function(n){return n?o(n):null};i.sX&&t.attr("width")==="100%"&&t.removeAttr("width");s.length||(s=null);l=r(e,{"class":f.sScrollWrapper}).append(r(e,{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:u?c(u):"100%"}).append(r(e,{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",width:i.sXInner||"100%"}).append(k.removeAttr("id").css("margin-left",0).append(v==="top"?h:null).append(t.children("thead"))))).append(r(e,{"class":f.sScrollBody}).css({overflow:"auto",height:c(b),width:c(u)}).append(t));s&&l.append(r(e,{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:u?c(u):"100%"}).append(r(e,{"class":f.sScrollFootInner}).append(d.removeAttr("id").css("margin-left",0).append(v==="bottom"?h:null).append(t.children("tfoot")))));var a=l.children(),y=a[0],p=a[1],w=s?a[2]:null;return u&&r(p).scroll(function(){var n=this.scrollLeft;y.scrollLeft=n;s&&(w.scrollLeft=n)}),n.nScrollHead=y,n.nScrollBody=p,n.nScrollFoot=w,n.aoDrawCallback.push({fn:ti,sName:"scrolling"}),l[0]}function ti(n){var c=n.oScroll,b=c.sX,nt=c.sXInner,k=c.sY,f=c.iBarWidth,tt=r(n.nScrollHead),gt=tt[0].style,ct=tt.children("div"),lt=ct[0].style,ni=ct.children("table"),i=n.nScrollBody,e=r(i),l=i.style,ti=r(n.nScrollFoot),it=ti.children("div"),ii=it.children("table"),rt=r(n.nTHead),t=r(n.nTable),y=t[0],h=y.style,s=n.nTFoot?r(n.nTFoot):null,at=n.oBrowser,ut=at.bScrollOversize,vt,yt,p,a,g,pt,ft=[],et=[],wt=[],bt,v,u,kt=function(n){var t=n.style;t.paddingTop="0";t.paddingBottom="0";t.borderTopWidth="0";t.borderBottomWidth="0";t.height=0},dt,w,ot,ht;t.children("thead, tfoot").remove();g=rt.clone().prependTo(t);vt=rt.find("tr");p=g.find("tr");g.find("th, td").removeAttr("tabindex");s&&(pt=s.clone().prependTo(t),yt=s.find("tr"),a=pt.find("tr"));b||(l.width="100%",tt[0].style.width="100%");r.each(li(n,g),function(t,i){bt=ei(n,t);i.style.width=n.aoColumns[bt].sWidth});s&&d(function(n){n.style.width=""},a);c.bCollapse&&k!==""&&(l.height=e[0].offsetHeight+rt[0].offsetHeight+"px");u=t.outerWidth();b===""?(h.width="100%",ut&&(t.find("tbody").height()>i.offsetHeight||e.css("overflow-y")=="scroll")&&(h.width=o(t.outerWidth()-f))):nt!==""?h.width=o(nt):u==e.width()&&e.height()<t.height()?(h.width=o(u-f),t.outerWidth()>u-f&&(h.width=o(u))):h.width=o(u);u=t.outerWidth();d(kt,p);d(function(n){wt.push(n.innerHTML);ft.push(o(r(n).css("width")))},p);d(function(n,t){n.style.width=ft[t]},vt);r(p).height(0);s&&(d(kt,a),d(function(n){et.push(o(r(n).css("width")))},a),d(function(n,t){n.style.width=et[t]},yt),r(a).height(0));d(function(n,t){n.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+wt[t]+"<\/div>";n.style.width=ft[t]},p);s&&d(function(n,t){n.innerHTML="";n.style.width=et[t]},a);t.outerWidth()<u?(v=i.scrollHeight>i.offsetHeight||e.css("overflow-y")=="scroll"?u+f:u,ut&&(i.scrollHeight>i.offsetHeight||e.css("overflow-y")=="scroll")&&(h.width=o(v-f)),(b===""||nt!=="")&&st(n,1,"Possible column misalignment",6)):v="100%";l.width=o(v);gt.width=o(v);s&&(n.nScrollFoot.style.width=o(v));k||ut&&(l.height=o(y.offsetHeight+f));k&&c.bCollapse&&(l.height=o(k),dt=b&&y.offsetWidth>i.offsetWidth?f:0,y.offsetHeight<i.offsetHeight&&(l.height=o(y.offsetHeight+dt)));w=t.outerWidth();ni[0].style.width=o(w);lt.width=o(w);ot=t.height()>i.clientHeight||e.css("overflow-y")=="scroll";ht="padding"+(at.bScrollbarLeft?"Left":"Right");lt[ht]=ot?f+"px":"0px";s&&(ii[0].style.width=o(w),it[0].style.width=o(w),it[0].style[ht]=ot?f+"px":"0px");e.scroll();(n.bSorted||n.bFiltered)&&!n._drawHold&&(i.scrollTop=0)}function d(n,t,i){for(var e=0,u=0,o=t.length,r,f;u<o;){for(r=t[u].firstChild,f=i?i[u].firstChild:null;r;)r.nodeType===1&&(i?n(r,f,e):n(r,e),e++),r=r.nextSibling,f=i?f.nextSibling:null;u++}}function br(t){for(var c=t.nTable,s=t.aoColumns,p=t.oScroll,g=p.sY,l=p.sX,nt=p.sXInner,w=s.length,e=yt(t,"bVisible"),h=r("th",t.nTHead),a=c.getAttribute("width"),v=c.parentNode,tt=!1,u,b,k,d,f,it,y,i=0;i<e.length;i++)u=s[e[i]],u.sWidth!==null&&(u.sWidth=kf(u.sWidthOrig,v),tt=!0);if(tt||l||g||w!=vt(t)||w!=h.length){for(f=r(c).clone().empty().css("visibility","hidden").removeAttr("id").append(r(t.nTHead).clone(!1)).append(r(t.nTFoot).clone(!1)).append(r("<tbody><tr/><\/tbody>")),f.find("tfoot th, tfoot td").css("width",""),it=f.find("tbody tr"),h=li(t,f.find("thead")[0]),i=0;i<e.length;i++)u=s[e[i]],h[i].style.width=u.sWidthOrig!==null&&u.sWidthOrig!==""?o(u.sWidthOrig):"";if(t.aoData.length)for(i=0;i<e.length;i++)b=e[i],u=s[b],r(gf(t,b)).clone(!1).append(u.sContentPadding).appendTo(it);if(f.appendTo(v),l&&nt?f.width(nt):l?(f.css("width","auto"),f.width()<v.offsetWidth&&f.width(v.offsetWidth)):g?f.width(v.offsetWidth):a&&f.width(a),df(t,f[0]),l){for(y=0,i=0;i<e.length;i++)u=s[e[i]],d=r(h[i]).outerWidth(),y+=u.sWidthOrig===null?d:parseInt(u.sWidth,10)+d-r(h[i]).width();f.width(o(y));c.style.width=o(y)}for(i=0;i<e.length;i++)u=s[e[i]],k=r(h[i]).width(),k&&(u.sWidth=o(k));c.style.width=o(f.css("width"));f.remove()}else for(i=0;i<w;i++)s[i].sWidth=o(h.eq(i).width());a&&(c.style.width=o(a));(a||l)&&!t._reszEvt&&(r(n).bind("resize.DT-"+t.sInstance,bi(function(){lt(t)})),t._reszEvt=!0)}function bi(n,t){var u=t!==i?t:200,r,f;return function(){var e=this,t=+new Date,o=arguments;r&&t<r+u?(clearTimeout(f),f=setTimeout(function(){r=i;n.apply(e,o)},u)):r?(r=t,n.apply(e,o)):r=t}}function kf(n,i){if(!n)return 0;var u=r("<div/>").css("width",o(n)).appendTo(i||t.body),f=u[0].offsetWidth;return u.remove(),f}function df(n,t){var i=n.oScroll,u;(i.sX||i.sY)&&(u=i.sX?0:i.iBarWidth,t.style.width=o(r(t).outerWidth()-u))}function gf(n,t){var i=ne(n,t),u;return i<0?null:(u=n.aoData[i],u.nTr?u.anCells[t]:r("<td/>").html(a(n,i,t,"display"))[0])}function ne(n,t){for(var i,u=-1,f=-1,r=0,e=n.aoData.length;r<e;r++)i=a(n,r,t,"display")+"",i=i.replace(to,""),i.length>u&&(u=i.length,f=r);return f}function o(n){return n===null?"0px":typeof n=="number"?n<0?"0px":n+"px":n.match(/\d$/)?n+"px":n}function te(){var n;if(!u.__scrollbarWidth){var t=r("<p/>").css({width:"100%",height:200,padding:0})[0],i=r("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(t).appendTo("body"),f=t.offsetWidth;i.css("overflow","scroll");n=t.offsetWidth;f===n&&(n=i[0].clientWidth);i.remove();u.__scrollbarWidth=f-n}return u.__scrollbarWidth}function ot(n){var f,o,y,p=[],c=n.aoColumns,l,s,a,v,e=n.aaSortingFixed,w=r.isPlainObject(e),t=[],h=function(n){n.length&&!r.isArray(n[0])?t.push(n):t.push.apply(t,n)};for(r.isArray(e)&&h(e),w&&e.pre&&h(e.pre),h(n.aaSorting),w&&e.post&&h(e.post),f=0;f<t.length;f++)for(v=t[f][0],l=c[v].aDataSort,o=0,y=l.length;o<y;o++)s=l[o],a=c[s].sType||"string",t[f]._idx===i&&(t[f]._idx=r.inArray(t[f][1],c[s].asSorting)),p.push({src:v,col:s,dir:t[f][1],index:t[f]._idx,type:a,formatter:u.ext.type.order[a+"-pre"]});return p}function ie(n){var t,s,h,r=[],c=u.ext.type.order,f=n.aoData,a=n.aoColumns,l=0,o,e=n.aiDisplayMaster,i;for(sr(n),i=ot(n),t=0,s=i.length;t<s;t++)o=i[t],o.formatter&&l++,ue(n,o.col);if(p(n)!="ssp"&&i.length!==0){for(t=0,h=e.length;t<h;t++)r[e[t]]=t;l===i.length?e.sort(function(n,t){for(var u,e,s,h,c=i.length,l=f[n]._aSortData,a=f[t]._aSortData,o=0;o<c;o++)if(h=i[o],u=l[h.col],e=a[h.col],s=u<e?-1:u>e?1:0,s!==0)return h.dir==="asc"?s:-s;return u=r[n],e=r[t],u<e?-1:u>e?1:0}):e.sort(function(n,t){for(var e,o,h,u,l,a=i.length,v=f[n]._aSortData,y=f[t]._aSortData,s=0;s<a;s++)if(u=i[s],e=v[u.col],o=y[u.col],l=c[u.type+"-"+u.dir]||c["string-"+u.dir],h=l(e,o),h!==0)return h;return e=r[n],o=r[t],e<o?-1:e>o?1:0})}n.bSorted=!0}function re(n){for(var u,f,s=n.aoColumns,t=ot(n),h=n.oLanguage.oAria,i=0,l=s.length;i<l;i++){var r=s[i],e=r.asSorting,c=r.sTitle.replace(/<.*?>/g,""),o=r.nTh;o.removeAttribute("aria-sort");r.bSortable?(t.length>0&&t[0].col==i?(o.setAttribute("aria-sort",t[0].dir=="asc"?"ascending":"descending"),f=e[t[0].index+1]||e[0]):f=e[0],u=c+(f==="asc"?h.sSortAscending:h.sSortDescending)):u=c;o.setAttribute("aria-label",u)}}function kr(n,t,u,f){var l=n.aoColumns[t],e=n.aaSorting,s=l.asSorting,o,c=function(n,t){var u=n._idx;return u===i&&(u=r.inArray(n[1],s)),u+1<s.length?u+1:t?null:0},h;typeof e[0]=="number"&&(e=n.aaSorting=[e]);u&&n.oFeatures.bSortMulti?(h=r.inArray(t,b(e,"0")),h!==-1?(o=c(e[h],!0),o===null?e.splice(h,1):(e[h][1]=s[o],e[h]._idx=o)):(e.push([t,s[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==t?(o=c(e[0]),e.length=1,e[0][1]=s[o],e[0]._idx=o):(e.length=0,e.push([t,s[0]]),e[0]._idx=0);rt(n);typeof f=="function"&&f(n)}function dr(n,t,i,r){var u=n.aoColumns[i];gr(t,{},function(t){u.bSortable!==!1&&(n.oFeatures.bProcessing?(w(n,!0),setTimeout(function(){kr(n,i,t.shiftKey,r);p(n)!=="ssp"&&w(n,!1)},0)):kr(n,i,t.shiftKey,r))})}function ki(n){var e=n.aLastSort,o=n.oClasses.sSortColumn,f=ot(n),s=n.oFeatures,t,i,u;if(s.bSort&&s.bSortClasses){for(t=0,i=e.length;t<i;t++)u=e[t].src,r(b(n.aoData,"anCells",u)).removeClass(o+(t<2?t+1:3));for(t=0,i=f.length;t<i;t++)u=f[t].src,r(b(n.aoData,"anCells",u)).addClass(o+(t<2?t+1:3))}n.aLastSort=f}function ue(n,t){var s=n.aoColumns[t],f=u.ext.order[s.sSortDataType],h,r,e,o,i,c;for(f&&(h=f.call(n.oInstance,n,t,at(n,t))),o=u.ext.type.order[s.sType+"-pre"],i=0,c=n.aoData.length;i<c;i++)r=n.aoData[i],r._aSortData||(r._aSortData=[]),(!r._aSortData[t]||f)&&(e=f?h[i]:a(n,i,t,"sort"),r._aSortData[t]=o?o(e):e)}function di(n){if(n.oFeatures.bStateSave&&!n.bDestroying){var t={time:+new Date,start:n._iDisplayStart,length:n._iDisplayLength,order:r.extend(!0,[],n.aaSorting),search:hf(n.oPreviousSearch),columns:r.map(n.aoColumns,function(t,i){return{visible:t.bVisible,search:hf(n.aoPreSearchCols[i])}})};h(n,"aoStateSaveParams","stateSaveParams",[n,t]);n.oSavedState=t;n.fnStateSaveCallback.call(n.oInstance,n,t)}}function fe(n){var i,o,u=n.aoColumns,t,s,f,e;if(n.oFeatures.bStateSave&&(t=n.fnStateLoadCallback.call(n.oInstance,n),t&&t.time)&&(s=h(n,"aoStateLoadParams","stateLoadParams",[n,t]),r.inArray(!1,s)===-1)&&(f=n.iStateDuration,!(f>0)||!(t.time<+new Date-f*1e3))&&u.length===t.columns.length){for(n.oLoadedState=r.extend(!0,{},t),n._iDisplayStart=t.start,n.iInitDisplayStart=t.start,n._iDisplayLength=t.length,n.aaSorting=[],r.each(t.order,function(t,i){n.aaSorting.push(i[0]>=u.length?[0,i[1]]:i)}),r.extend(n.oPreviousSearch,cf(t.search)),i=0,o=t.columns.length;i<o;i++)e=t.columns[i],u[i].bVisible=e.visible,r.extend(n.aoPreSearchCols[i],cf(e.search));h(n,"aoStateLoaded","stateLoaded",[n,t])}}function gi(n){var t=u.settings,i=r.inArray(n,b(t,"nTable"));return i!==-1?t[i]:null}function st(t,i,r,f){if(r="DataTables warning: "+(t!==null?"table id="+t.sTableId+" - ":"")+r,f&&(r+=". For more information about this error, please see http://datatables.net/tn/"+f),i)n.console&&console.log&&console.log(r);else{var e=u.ext,o=e.sErrMode||e.errMode;if(o=="alert")alert(r);else throw new Error(r);}}function k(n,t,u,f){if(r.isArray(u)){r.each(u,function(i,u){r.isArray(u)?k(n,t,u[0],u[1]):k(n,t,u)});return}f===i&&(f=u);t[u]!==i&&(n[f]=t[u])}function ee(n,t,i){var f;for(var u in t)t.hasOwnProperty(u)&&(f=t[u],r.isPlainObject(f)?(r.isPlainObject(n[u])||(n[u]={}),r.extend(!0,n[u],f)):n[u]=i&&u!=="data"&&u!=="aaData"&&r.isArray(f)?f.slice():f);return n}function gr(n,t,i){r(n).bind("click.DT",t,function(t){n.blur();i(t)}).bind("keypress.DT",t,function(n){n.which===13&&(n.preventDefault(),i(n))}).bind("selectstart.DT",function(){return!1})}function v(n,t,i,r){i&&n[t].push({fn:i,sName:r})}function h(n,t,i,u){var f=[];return t&&(f=r.map(n[t].slice().reverse(),function(t){return t.fn.apply(n.oInstance,u)})),i!==null&&r(n.nTable).trigger(i+".dt",u),f}function nu(n){var t=n._iDisplayStart,r=n.fnDisplayEnd(),i=n._iDisplayLength;t>=r&&(t=r-i);t-=t%i;(i===-1||t<0)&&(t=0);n._iDisplayStart=t}function tu(n,t){var i=n.renderer,f=u.ext.renderer[t];return r.isPlainObject(i)&&i[t]?f[i[t]]||f._:typeof i=="string"?f[i]||f._:f._}function p(n){return n.oFeatures.bServerSide?"ssp":n.ajax||n.sAjaxSource?"ajax":"dom"}function su(n,t){var i=[],r=ou.numbers_length,u=Math.floor(r/2);return t<=r?i=ut(0,t):n<=u?(i=ut(0,r-2),i.push("ellipsis"),i.push(t-1)):n>=t-1-u?(i=ut(t-(r-2),t),i.splice(0,0,"ellipsis"),i.splice(0,0,0)):(i=ut(n-1,n+2),i.push("ellipsis"),i.push(t-1),i.splice(0,0,"ellipsis"),i.splice(0,0,0)),i.DT_el="span",i}function ae(n){r.each({num:function(t){return ri(t,n)},"num-fmt":function(t){return ri(t,n,rr)},"html-num":function(t){return ri(t,n,ui)},"html-num-fmt":function(t){return ri(t,n,ui,rr)}},function(t,i){c.type.order[t+n+"-pre"]=i;t.match(/^html\-/)&&(c.type.search[t+n]=c.type.search.html)})}function ve(n){return function(){var t=[gi(this[u.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return u.ext.internal[n].apply(this,t)}}var u,c,e,f,s,ir={},hu=/[\r\n]/g,ui=/<.*?>/g,ye=/^[\w\+\-]/,pe=/[\w\+\-]$/,we=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),rr=/[',$£€¥%\u2009\u202F]/g,g=function(n){return!n||n===!0||n==="-"?!0:!1},cu=function(n){var t=parseInt(n,10);return!isNaN(t)&&isFinite(n)?t:null},lu=function(n,t){return ir[t]||(ir[t]=new RegExp(yi(t),"g")),typeof n=="string"&&t!=="."?n.replace(/\./g,"").replace(ir[t],"."):n},ur=function(n,t,i){var r=typeof n=="string";return t&&r&&(n=lu(n,t)),i&&r&&(n=n.replace(rr,"")),g(n)||!isNaN(parseFloat(n))&&isFinite(n)},be=function(n){return g(n)||typeof n=="string"},au=function(n,t,i){if(g(n))return!0;var r=be(n);return r?ur(ke(n),t,i)?!0:null:null},b=function(n,t,r){var f=[],u=0,e=n.length;if(r!==i)for(;u<e;u++)n[u]&&n[u][t]&&f.push(n[u][t][r]);else for(;u<e;u++)n[u]&&f.push(n[u][t]);return f},ht=function(n,t,r,u){var e=[],f=0,o=t.length;if(u!==i)for(;f<o;f++)n[t[f]][r]&&e.push(n[t[f]][r][u]);else for(;f<o;f++)e.push(n[t[f]][r]);return e},ut=function(n,t){var f=[],u,r;for(t===i?(t=0,u=n):(u=t,t=n),r=t;r<u;r++)f.push(r);return f},vu=function(n){for(var i=[],t=0,r=n.length;t<r;t++)n[t]&&i.push(n[t]);return i},ke=function(n){return n.replace(ui,"")},fr=function(n){var r=[],u,t,e=n.length,i,f=0;n:for(t=0;t<e;t++){for(u=n[t],i=0;i<f;i++)if(r[i]===u)continue n;r.push(u);f++}return r},y=function(n,t,r){n[t]!==i&&(n[r]=n[t])},pt=/\[.*?\]$/,ft=/\(\)$/,pi=r("<div>")[0],no=pi.textContent!==i,to=/<.*?>/g,se,iu,le,ou,ri;u=function(n){var f;this.$=function(n,t){return this.api(!0).$(n,t)};this._=function(n,t){return this.api(!0).rows(n,t).data()};this.api=function(n){return n?new e(gi(this[c.iApiIndex])):new e(this)};this.fnAddData=function(n,t){var u=this.api(!0),f=r.isArray(n)&&(r.isArray(n[0])||r.isPlainObject(n[0]))?u.rows.add(n):u.row.add(n);return(t===i||t)&&u.draw(),f.flatten().toArray()};this.fnAdjustColumnSizing=function(n){var t=this.api(!0).columns.adjust(),r=t.settings()[0],u=r.oScroll;n===i||n?t.draw(!1):(u.sX!==""||u.sY!=="")&&ti(r)};this.fnClearTable=function(n){var t=this.api(!0).clear();(n===i||n)&&t.draw()};this.fnClose=function(n){this.api(!0).row(n).child.hide()};this.fnDeleteRow=function(n,t,r){var f=this.api(!0),u=f.rows(n),e=u.settings()[0],o=e.aoData[u[0][0]];return u.remove(),t&&t.call(this,e,o),(r===i||r)&&f.draw(),o};this.fnDestroy=function(n){this.api(!0).destroy(n)};this.fnDraw=function(n){this.api(!0).draw(!n)};this.fnFilter=function(n,t,r,u,f,e){var o=this.api(!0);t===null||t===i?o.search(n,r,u,e):o.column(t).search(n,r,u,e);o.draw()};this.fnGetData=function(n,t){var r=this.api(!0),u;return n!==i?(u=n.nodeName?n.nodeName.toLowerCase():"",t!==i||u=="td"||u=="th"?r.cell(n,t).data():r.row(n).data()||null):r.data().toArray()};this.fnGetNodes=function(n){var t=this.api(!0);return n!==i?t.row(n).node():t.rows().nodes().flatten().toArray()};this.fnGetPosition=function(n){var r=this.api(!0),i=n.nodeName.toUpperCase(),t;return i=="TR"?r.row(n).index():i=="TD"||i=="TH"?(t=r.cell(n).index(),[t.row,t.columnVisible,t.column]):null};this.fnIsOpen=function(n){return this.api(!0).row(n).child.isShown()};this.fnOpen=function(n,t,i){return this.api(!0).row(n).child(t,i).show().child()[0]};this.fnPageChange=function(n,t){var r=this.api(!0).page(n);(t===i||t)&&r.draw(!1)};this.fnSetColumnVis=function(n,t,r){var u=this.api(!0).column(n).visible(t);(r===i||r)&&u.columns.adjust().draw()};this.fnSettings=function(){return gi(this[c.iApiIndex])};this.fnSort=function(n){this.api(!0).order(n).draw()};this.fnSortListener=function(n,t,i){this.api(!0).order.listener(n,t,i)};this.fnUpdate=function(n,t,r,u,f){var e=this.api(!0);return r===i||r===null?e.row(t).data(n):e.cell(t,r).data(n),(f===i||f)&&e.columns.adjust(),(u===i||u)&&e.draw(),0};this.fnVersionCheck=c.fnVersionCheck;var t=this,o=n===i,s=this.length;o&&(n={});this.oApi=this.internal=c.internal;for(f in u.ext.internal)f&&(this[f]=ve(f));return this.each(function(){var e=s>1?ee({},n,!0):n,c=0,y,d=this.getAttribute("id"),pt=!1,l=u.defaults,a,wt,bt,f,w,at,g,ft,et,it,rt,vt,ut,ht,yt,kt,ct,lt,b;if(this.nodeName.toLowerCase()!="table"){st(null,0,"Non-table node initialisation ("+this.nodeName+")",2);return}for(yu(l),pu(l.column),nt(l,l,!0),nt(l.column,l.column,!0),nt(l,e),a=u.settings,c=0,y=a.length;c<y;c++){if(a[c].nTable==this){if(wt=e.bRetrieve!==i?e.bRetrieve:l.bRetrieve,bt=e.bDestroy!==i?e.bDestroy:l.bDestroy,o||wt)return a[c].oInstance;if(bt){a[c].oInstance.fnDestroy();break}else{st(a[c],0,"Cannot reinitialise DataTable",3);return}}if(a[c].sTableId==this.id){a.splice(c,1);break}}if((d===null||d==="")&&(d="DataTables_Table_"+u.ext._unique++,this.id=d),f=r.extend(!0,{},u.models.oSettings,{nTable:this,oApi:t.internal,oInit:e,sDestroyWidth:r(this)[0].style.width,sInstance:d,sTableId:d}),a.push(f),f.oInstance=t.length===1?t:r(this).dataTable(),yu(e),e.oLanguage&&er(e.oLanguage),e.aLengthMenu&&!e.iDisplayLength&&(e.iDisplayLength=r.isArray(e.aLengthMenu[0])?e.aLengthMenu[0][0]:e.aLengthMenu[0]),e=ee(r.extend(!0,{},l),e),k(f.oFeatures,e,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),k(f,e,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),k(f.oScroll,e,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),k(f.oLanguage,e,"fnInfoCallback"),v(f,"aoDrawCallback",e.fnDrawCallback,"user"),v(f,"aoServerParams",e.fnServerParams,"user"),v(f,"aoStateSaveParams",e.fnStateSaveParams,"user"),v(f,"aoStateLoadParams",e.fnStateLoadParams,"user"),v(f,"aoStateLoaded",e.fnStateLoaded,"user"),v(f,"aoRowCallback",e.fnRowCallback,"user"),v(f,"aoRowCreatedCallback",e.fnCreatedRow,"user"),v(f,"aoHeaderCallback",e.fnHeaderCallback,"user"),v(f,"aoFooterCallback",e.fnFooterCallback,"user"),v(f,"aoInitComplete",e.fnInitComplete,"user"),v(f,"aoPreDrawCallback",e.fnPreDrawCallback,"user"),w=f.oClasses,e.bJQueryUI?(r.extend(w,u.ext.oJUIClasses,e.oClasses),e.sDom===l.sDom&&l.sDom==="lfrtip"&&(f.sDom='<"H"lfr>t<"F"ip>'),f.renderer?r.isPlainObject(f.renderer)&&!f.renderer.header&&(f.renderer.header="jqueryui"):f.renderer="jqueryui"):r.extend(w,u.ext.classes,e.oClasses),r(this).addClass(w.sTable),(f.oScroll.sX!==""||f.oScroll.sY!=="")&&(f.oScroll.iBarWidth=te()),f.oScroll.sX===!0&&(f.oScroll.sX="100%"),f.iInitDisplayStart===i&&(f.iInitDisplayStart=e.iDisplayStart,f._iDisplayStart=e.iDisplayStart),e.iDeferLoading!==null&&(f.bDeferLoading=!0,at=r.isArray(e.iDeferLoading),f._iRecordsDisplay=at?e.iDeferLoading[0]:e.iDeferLoading,f._iRecordsTotal=at?e.iDeferLoading[1]:e.iDeferLoading),g=f.oLanguage,r.extend(!0,g,e.oLanguage),g.sUrl!==""&&(r.ajax({dataType:"json",url:g.sUrl,success:function(n){er(n);nt(l.oLanguage,n);r.extend(!0,g,n);ni(f)},error:function(){ni(f)}}),pt=!0),e.asStripeClasses===null&&(f.asStripeClasses=[w.sStripeOdd,w.sStripeEven]),ft=f.asStripeClasses,et=r("tbody tr:eq(0)",this),r.inArray(!0,r.map(ft,function(n){return et.hasClass(n)}))!==-1&&(r("tbody tr",this).removeClass(ft.join(" ")),f.asDestroyStripes=ft.slice()),it=[],vt=this.getElementsByTagName("thead"),vt.length!==0&&(dt(f.aoHeader,vt[0]),it=li(f)),e.aoColumns===null)for(rt=[],c=0,y=it.length;c<y;c++)rt.push(null);else rt=e.aoColumns;for(c=0,y=rt.length;c<y;c++)or(f,it?it[c]:null);if(ku(f,e.aoColumnDefs,rt,function(n,t){fi(f,n,t)}),et.length&&(ut=function(n,t){return n.getAttribute("data-"+t)?t:null},r.each(ci(f,et[0]).cells,function(n,t){var e=f.aoColumns[n],r,u;e.mData===n&&(r=ut(t,"sort")||ut(t,"order"),u=ut(t,"filter")||ut(t,"search"),(r!==null||u!==null)&&(e.mData={_:n+".display",sort:r!==null?n+".@data-"+r:i,type:r!==null?n+".@data-"+r:i,filter:u!==null?n+".@data-"+u:i},fi(f,n)))})),ht=f.oFeatures,e.bStateSave&&(ht.bStateSave=!0,fe(f,e),v(f,"aoDrawCallback",di,"state_save")),e.aaSorting===i)for(yt=f.aaSorting,c=0,y=yt.length;c<y;c++)yt[c][1]=f.aoColumns[c].asSorting[0];if(ki(f),ht.bSort&&v(f,"aoDrawCallback",function(){if(f.bSorted){var n=ot(f),t={};r.each(n,function(n,i){t[i.src]=i.dir});h(f,null,"order",[f,n,t]);re(f)}}),v(f,"aoDrawCallback",function(){(f.bSorted||p(f)==="ssp"||ht.bDeferRender)&&ki(f)},"sc"),wu(f),kt=r(this).children("caption").each(function(){this._captionSide=r(this).css("caption-side")}),ct=r(this).children("thead"),ct.length===0&&(ct=r("<thead/>").appendTo(this)),f.nTHead=ct[0],lt=r(this).children("tbody"),lt.length===0&&(lt=r("<tbody/>").appendTo(this)),f.nTBody=lt[0],b=r(this).children("tfoot"),b.length===0&&kt.length>0&&(f.oScroll.sX!==""||f.oScroll.sY!=="")&&(b=r("<tfoot/>").appendTo(this)),b.length===0||b.children().length===0?r(this).addClass(w.sNoFooter):b.length>0&&(f.nTFoot=b[0],dt(f.aoFooter,f.nTFoot)),e.aaData)for(c=0;c<e.aaData.length;c++)tt(f,e.aaData[c]);else(f.bDeferLoading||p(f)=="dom")&&oi(f,r(f.nTBody).children("tr"));f.aiDisplay=f.aiDisplayMaster.slice();f.bInitialised=!0;pt===!1&&ni(f)}),t=null,this};var oe=[],l=Array.prototype,io=function(n){var t,i,f=u.settings,e=r.map(f,function(n){return n.nTable});if(n){if(n.nTable&&n.oApi)return[n];if(n.nodeName&&n.nodeName.toLowerCase()==="table")return t=r.inArray(n,e),t!==-1?[f[t]]:null;if(n&&typeof n.settings=="function")return n.settings().toArray();typeof n=="string"?i=r(n):n instanceof r&&(i=n)}else return[];if(i)return i.map(function(){return t=r.inArray(this,e),t!==-1?f[t]:null}).toArray()};e=function(n,t){var i,f,u,o;if(!this instanceof e)throw"DT API must be constructed as a new object";if(i=[],f=function(n){var t=io(n);t&&i.push.apply(i,t)},r.isArray(n))for(u=0,o=n.length;u<o;u++)f(n[u]);else f(n);this.context=fr(i);t&&this.push.apply(this,t.toArray?t.toArray():t);this.selector={rows:null,cols:null,opts:null};e.extend(this,this,oe)};u.Api=e;e.prototype={concat:l.concat,context:[],each:function(n){for(var t=0,i=this.length;t<i;t++)n.call(this,this[t],t,this);return this},eq:function(n){var t=this.context;return t.length>n?new e(t[n],this[n]):null},filter:function(n){var i=[],t,r;if(l.filter)i=l.filter.call(this,n,this);else for(t=0,r=this.length;t<r;t++)n.call(this,this[t],t,this)&&i.push(this[t]);return new e(this.context,i)},flatten:function(){var n=[];return new e(this.context,n.concat.apply(n,this.toArray()))},join:l.join,indexOf:l.indexOf||function(n,t){for(var i=t||0,r=this.length;i<r;i++)if(this[i]===n)return i;return-1},iterator:function(n,t,r,u){var h=[],o,f,b,c,k,s=this.context,d,p,a,v=this.selector,l,w,y;for(typeof n=="string"&&(u=r,r=t,t=n,n=!1),f=0,b=s.length;f<b;f++)if(l=new e(s[f]),t==="table")o=r.call(l,s[f],f),o!==i&&h.push(o);else if(t==="columns"||t==="rows")o=r.call(l,s[f],this[f],f),o!==i&&h.push(o);else if(t==="column"||t==="column-rows"||t==="row"||t==="cell")for(p=this[f],t==="column-rows"&&(d=nr(s[f],v.opts)),c=0,k=p.length;c<k;c++)a=p[c],o=t==="cell"?r.call(l,s[f],a.row,a.column,f,c):r.call(l,s[f],a,f,c,d),o!==i&&h.push(o);return h.length||u?(w=new e(s,n?h.concat.apply([],h):h),y=w.selector,y.rows=v.rows,y.cols=v.cols,y.opts=v.opts,w):this},lastIndexOf:l.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(n){var i=[],t,r;if(l.map)i=l.map.call(this,n,this);else for(t=0,r=this.length;t<r;t++)i.push(n.call(this,this[t],t));return new e(this.context,i)},pluck:function(n){return this.map(function(t){return t[n]})},pop:l.pop,push:l.push,reduce:l.reduce||function(n,t){return bu(this,n,t,0,this.length,1)},reduceRight:l.reduceRight||function(n,t){return bu(this,n,t,this.length-1,-1,-1)},reverse:l.reverse,selector:null,shift:l.shift,sort:l.sort,splice:l.splice,toArray:function(){return l.slice.call(this)},to$:function(){return r(this)},toJQuery:function(){return r(this)},unique:function(){return new e(this.context,fr(this))},unshift:l.unshift};e.extend=function(n,t,i){if(t&&(t instanceof e||t.__dt_wrapper))for(var u,s=function(n,t,i){return function(){var r=t.apply(n,arguments);return e.extend(r,r,i.methodExt),r}},f=0,o=i.length;f<o;f++)u=i[f],t[u.name]=typeof u.val=="function"?s(n,u.val,u):r.isPlainObject(u.val)?{}:u.val,t[u.name].__dt_wrapper=!0,e.extend(n,t[u.name],u.propExt)};e.register=f=function(n,t){var f,a,u;if(r.isArray(n)){for(f=0,a=n.length;f<a;f++)e.register(n[f],t);return}for(var o=n.split("."),h=oe,c,l,v=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i].name===t)return n[i];return null},i=0,s=o.length;i<s;i++)l=o[i].indexOf("()")!==-1,c=l?o[i].replace("()",""):o[i],u=v(h,c),u||(u={name:c,val:{},methodExt:[],propExt:[]},h.push(u)),i===s-1?u.val=t:h=l?u.methodExt:u.propExt};e.registerPlural=s=function(n,t,u){e.register(n,u);e.register(t,function(){var n=u.apply(this,arguments);return n===this?this:n instanceof e?n.length?r.isArray(n[0])?new e(n.context,n[0]):n[0]:i:n})};se=function(n,t){if(typeof n=="number")return[t[n]];var i=r.map(t,function(n){return n.nTable});return r(i).filter(n).map(function(){var n=r.inArray(this,i);return t[n]}).toArray()};f("tables()",function(n){return n?new e(se(n,this.context)):this});f("table()",function(n){var t=this.tables(n),i=t.context;return i.length?new e(i[0]):t});s("tables().nodes()","table().node()",function(){return this.iterator("table",function(n){return n.nTable},1)});s("tables().body()","table().body()",function(){return this.iterator("table",function(n){return n.nTBody},1)});s("tables().header()","table().header()",function(){return this.iterator("table",function(n){return n.nTHead},1)});s("tables().footer()","table().footer()",function(){return this.iterator("table",function(n){return n.nTFoot},1)});s("tables().containers()","table().container()",function(){return this.iterator("table",function(n){return n.nTableWrapper},1)});f("draw()",function(n){return this.iterator("table",function(t){rt(t,n===!1)})});f("page()",function(n){return n===i?this.page.info().page:this.iterator("table",function(t){wr(t,n)})});f("page.info()",function(){if(this.context.length===0)return i;var n=this.context[0],r=n._iDisplayStart,t=n._iDisplayLength,u=n.fnRecordsDisplay(),f=t===-1;return{page:f?0:Math.floor(r/t),pages:f?1:Math.ceil(u/t),start:r,end:n.fnDisplayEnd(),length:t,recordsTotal:n.fnRecordsTotal(),recordsDisplay:u}});f("page.len()",function(n){return n===i?this.context.length!==0?this.context[0]._iDisplayLength:i:this.iterator("table",function(t){pr(t,n)})});iu=function(n,t,i){if(p(n)=="ssp"?rt(n,t):(w(n,!0),ai(n,[],function(i){var u,r,f;for(si(n),u=vi(n,i),r=0,f=u.length;r<f;r++)tt(n,u[r]);rt(n,t);w(n,!1)})),i){var r=new e(n);r.one("draw",function(){i(r.ajax.json())})}};f("ajax.json()",function(){var n=this.context;if(n.length>0)return n[0].json});f("ajax.params()",function(){var n=this.context;if(n.length>0)return n[0].oAjaxData});f("ajax.reload()",function(n,t){return this.iterator("table",function(i){iu(i,t===!1,n)})});f("ajax.url()",function(n){var t=this.context;return n===i?t.length===0?i:(t=t[0],t.ajax?r.isPlainObject(t.ajax)?t.ajax.url:t.ajax:t.sAjaxSource):this.iterator("table",function(t){r.isPlainObject(t.ajax)?t.ajax.url=n:t.ajax=n})});f("ajax.url().load()",function(n,t){return this.iterator("table",function(i){iu(i,t===!1,n)})});var ru=function(n,t){var s=[],o,e,u,h,f,c,l=typeof n;for(n&&l!=="string"&&l!=="function"&&n.length!==i||(n=[n]),u=0,h=n.length;u<h;u++)for(e=n[u]&&n[u].split?n[u].split(","):[n[u]],f=0,c=e.length;f<c;f++)o=t(typeof e[f]=="string"?r.trim(e[f]):e[f]),o&&o.length&&s.push.apply(s,o);return s},uu=function(n){return n||(n={}),n.filter&&!n.search&&(n.search=n.filter),{search:n.search||"none",order:n.order||"current",page:n.page||"all"}},fu=function(n){for(var t=0,i=n.length;t<i;t++)if(n[t].length>0)return n[0]=n[t],n.length=1,n.context=[n.context[t]],n;return n.length=0,n},nr=function(n,t){var i,e,h,f=[],o=n.aiDisplay,c=n.aiDisplayMaster,u=t.search,s=t.order,l=t.page;if(p(n)=="ssp")return u==="removed"?[]:ut(0,c.length);if(l=="current")for(i=n._iDisplayStart,e=n.fnDisplayEnd();i<e;i++)f.push(o[i]);else if(s=="current"||s=="applied")f=u=="none"?c.slice():u=="applied"?o.slice():r.map(c,function(n){return r.inArray(n,o)===-1?n:null});else if(s=="index"||s=="original")for(i=0,e=n.aoData.length;i<e;i++)u=="none"?f.push(i):(h=r.inArray(i,o),(h===-1&&u=="removed"||h>=0&&u=="applied")&&f.push(i));return f},ro=function(n,t,i){return ru(t,function(t){var u=cu(t),f,e;return u!==null&&!i?[u]:(f=nr(n,i),u!==null&&r.inArray(u,f)!==-1)?[u]:t?typeof t=="function"?r.map(f,function(i){var r=n.aoData[i];return t(i,r._aData,r.nTr)?i:null}):(e=vu(ht(n.aoData,f,"nTr")),t.nodeName&&r.inArray(t,e)!==-1)?[t._DT_RowIndex]:r(e).filter(t).map(function(){return this._DT_RowIndex}).toArray():f})};f("rows()",function(n,t){n===i?n="":r.isPlainObject(n)&&(t=n,n="");t=uu(t);var u=this.iterator("table",function(i){return ro(i,n,t)},1);return u.selector.rows=n,u.selector.opts=t,u});f("rows().nodes()",function(){return this.iterator("row",function(n,t){return n.aoData[t].nTr||i},1)});f("rows().data()",function(){return this.iterator(!0,"rows",function(n,t){return ht(n.aoData,t,"_aData")},1)});s("rows().cache()","row().cache()",function(n){return this.iterator("row",function(t,i){var r=t.aoData[i];return n==="search"?r._aFilterData:r._aSortData},1)});s("rows().invalidate()","row().invalidate()",function(n){return this.iterator("row",function(t,i){bt(t,i,n)})});s("rows().indexes()","row().index()",function(){return this.iterator("row",function(n,t){return t},1)});s("rows().remove()","row().remove()",function(){var n=this;return this.iterator("row",function(t,i,u){var e=t.aoData,f,o,s;for(e.splice(i,1),f=0,o=e.length;f<o;f++)e[f].nTr!==null&&(e[f].nTr._DT_RowIndex=f);s=r.inArray(i,t.aiDisplay);hi(t.aiDisplayMaster,i);hi(t.aiDisplay,i);hi(n[u],i,!1);nu(t)})});f("rows.add()",function(n){var i=this.iterator("table",function(t){for(var i,u=[],r=0,f=n.length;r<f;r++)i=n[r],i.nodeName&&i.nodeName.toUpperCase()==="TR"?u.push(oi(t,i)[0]):u.push(tt(t,i));return u},1),t=this.rows(-1);return t.pop(),t.push.apply(t,i.toArray()),t});f("row()",function(n,t){return fu(this.rows(n,t))});f("row().data()",function(n){var t=this.context;return n===i?t.length&&this.length?t[0].aoData[this[0]]._aData:i:(t[0].aoData[this[0]]._aData=n,bt(t[0],this[0],"data"),this)});f("row().node()",function(){var n=this.context;return n.length&&this.length?n[0].aoData[this[0]].nTr||null:null});f("row.add()",function(n){n instanceof r&&n.length&&(n=n[0]);var t=this.iterator("table",function(t){return n.nodeName&&n.nodeName.toUpperCase()==="TR"?oi(t,n)[0]:tt(t,n)});return this.row(t[0])});var uo=function(n,t,i,u){var e=[],o=function(t,i){if(t.nodeName&&t.nodeName.toLowerCase()==="tr")e.push(t);else{var u=r("<tr><td/><\/tr>").addClass(i);r("td",u).addClass(i).html(t)[0].colSpan=vt(n);e.push(u[0])}},f,s;if(r.isArray(i)||i instanceof r)for(f=0,s=i.length;f<s;f++)o(i[f],u);else o(i,u);t._details&&t._details.remove();t._details=r(e);t._detailsShow&&t._details.insertAfter(t.nTr)},eu=function(n,t){var u=n.context,r;u.length&&(r=u[0].aoData[t!==i?t:n[0]],r._details&&(r._details.remove(),r._detailsShow=i,r._details=i))},he=function(n,t){var r=n.context,i;r.length&&n.length&&(i=r[0].aoData[n[0]],i._details&&(i._detailsShow=t,t?i._details.insertAfter(i.nTr):i._details.detach(),fo(r[0])))},fo=function(n){var t=new e(n),r=".dt.DT_details",u="draw"+r,f="column-visibility"+r,o="destroy"+r,i=n.aoData;if(t.off(u+" "+f+" "+o),b(i,"_details").length>0){t.on(u,function(r,u){n===u&&t.rows({page:"current"}).eq(0).each(function(n){var t=i[n];t._detailsShow&&t._details.insertAfter(t.nTr)})});t.on(f,function(t,r){var f,e,u,o;if(n===r)for(e=vt(r),u=0,o=i.length;u<o;u++)f=i[u],f._details&&f._details.children("td[colspan]").attr("colspan",e)});t.on(o,function(r,u){if(n===u)for(var f=0,e=i.length;f<e;f++)i[f]._details&&eu(t,f)})}},ii="row().child",tr=ii+"()";f(tr,function(n,t){var r=this.context;return n===i?r.length&&this.length?r[0].aoData[this[0]]._details:i:(n===!0?this.child.show():n===!1?eu(this):r.length&&this.length&&uo(r[0],r[0].aoData[this[0]],n,t),this)});f([ii+".show()",tr+".show()"],function(){return he(this,!0),this});f([ii+".hide()",tr+".hide()"],function(){return he(this,!1),this});f([ii+".remove()",tr+".remove()"],function(){return eu(this),this});f(ii+".isShown()",function(){var n=this.context;return n.length&&this.length?n[0].aoData[this[0]]._detailsShow||!1:!1});var eo=/^(.+):(name|visIdx|visible)$/,ce=function(n,t,i,r,u){for(var e=[],f=0,o=u.length;f<o;f++)e.push(a(n,u[f],t));return e},oo=function(n,t,i){var u=n.aoColumns,e=b(u,"sName"),f=b(u,"nTh");return ru(t,function(t){var s=cu(t),l,o,h,c;if(t==="")return ut(u.length);if(s!==null)return[s>=0?s:u.length+s];if(typeof t=="function")return l=nr(n,i),r.map(u,function(i,r){return t(r,ce(n,r,0,0,l),f[r])?r:null});if(o=typeof t=="string"?t.match(eo):"",o)switch(o[2]){case"visIdx":case"visible":return(h=parseInt(o[1],10),h<0)?(c=r.map(u,function(n,t){return n.bVisible?t:null}),[c[c.length+h]]):[ei(n,h)];case"name":return r.map(e,function(n,t){return n===o[1]?t:null})}else return r(f).filter(t).map(function(){return r.inArray(this,f)}).toArray()})},so=function(n,t,u,f){var a=n.aoColumns,o=a[t],s=n.aoData,c,e,v,l,y;if(u===i)return o.bVisible;if(o.bVisible!==u){if(u)for(y=r.inArray(!0,b(a,"bVisible"),t+1),e=0,v=s.length;e<v;e++)l=s[e].nTr,c=s[e].anCells,l&&l.insertBefore(c[t],c[y]||null);else r(b(n.aoData,"anCells",t)).detach();o.bVisible=u;kt(n,n.aoHeader);kt(n,n.aoFooter);(f===i||f)&&(lt(n),(n.oScroll.sX||n.oScroll.sY)&&ti(n));h(n,null,"column-visibility",[n,t,u]);di(n)}};return f("columns()",function(n,t){n===i?n="":r.isPlainObject(n)&&(t=n,n="");t=uu(t);var u=this.iterator("table",function(i){return oo(i,n,t)},1);return u.selector.cols=n,u.selector.opts=t,u}),s("columns().header()","column().header()",function(){return this.iterator("column",function(n,t){return n.aoColumns[t].nTh},1)}),s("columns().footer()","column().footer()",function(){return this.iterator("column",function(n,t){return n.aoColumns[t].nTf},1)}),s("columns().data()","column().data()",function(){return this.iterator("column-rows",ce,1)}),s("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(n,t){return n.aoColumns[t].mData},1)}),s("columns().cache()","column().cache()",function(n){return this.iterator("column-rows",function(t,i,r,u,f){return ht(t.aoData,f,n==="search"?"_aFilterData":"_aSortData",i)},1)}),s("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(n,t,i,r,u){return ht(n.aoData,u,"anCells",t)},1)}),s("columns().visible()","column().visible()",function(n,t){return this.iterator("column",function(r,u){if(n===i)return r.aoColumns[u].bVisible;so(r,u,n,t)})}),s("columns().indexes()","column().index()",function(n){return this.iterator("column",function(t,i){return n==="visible"?at(t,i):i},1)}),f("columns.adjust()",function(){return this.iterator("table",function(n){lt(n)},1)}),f("column.index()",function(n,t){if(this.context.length!==0){var i=this.context[0];if(n==="fromVisible"||n==="toData")return ei(i,t);if(n==="fromData"||n==="toVisible")return at(i,t)}}),f("column()",function(n,t){return fu(this.columns(n,t))}),le=function(n,t,u){var l=n.aoData,c=nr(n,u),p=vu(ht(l,c,"anCells")),w=r([].concat.apply([],p)),f,b=n.aoColumns.length,o,s,v,e,h,y;return ru(t,function(t){var u=typeof t=="function";if(t===null||t===i||u){for(o=[],s=0,v=c.length;s<v;s++)for(f=c[s],e=0;e<b;e++)h={row:f,column:e},u?(y=n.aoData[f],t(h,a(n,f,e),y.anCells[e])&&o.push(h)):o.push(h);return o}return r.isPlainObject(t)?[t]:w.filter(t).map(function(n,t){return f=t.parentNode._DT_RowIndex,{row:f,column:r.inArray(t,l[f].anCells)}}).toArray()})},f("cells()",function(n,t,u){if(r.isPlainObject(n)&&(typeof n.row!==i?(u=t,t=null):(u=n,n=null)),r.isPlainObject(t)&&(u=t,t=null),t===null||t===i)return this.iterator("table",function(t){return le(t,n,uu(u))});var s=this.columns(t,u),h=this.rows(n,u),o,f,c,e,l,a=this.iterator("table",function(n,t){for(o=[],f=0,c=h[t].length;f<c;f++)for(e=0,l=s[t].length;e<l;e++)o.push({row:h[t][f],column:s[t][e]});return o},1);return r.extend(a.selector,{cols:t,rows:n,opts:u}),a}),s("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(n,t,r){var u=n.aoData[t].anCells;return u?u[r]:i},1)}),f("cells().data()",function(){return this.iterator("cell",function(n,t,i){return a(n,t,i)},1)}),s("cells().cache()","cell().cache()",function(n){return n=n==="search"?"_aFilterData":"_aSortData",this.iterator("cell",function(t,i,r){return t.aoData[i][n][r]},1)}),s("cells().render()","cell().render()",function(n){return this.iterator("cell",function(t,i,r){return a(t,i,r,n)},1)}),s("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(n,t,i){return{row:t,column:i,columnVisible:at(n,i)}},1)}),s("cells().invalidate()","cell().invalidate()",function(n){return this.iterator("cell",function(t,i,r){bt(t,i,n,r)})}),f("cell()",function(n,t,i){return fu(this.cells(n,t,i))}),f("cell().data()",function(n){var r=this.context,t=this[0];return n===i?r.length&&t.length?a(r[0],t[0].row,t[0].column):i:(hr(r[0],t[0].row,t[0].column,n),bt(r[0],t[0].row,"data",t[0].column),this)}),f("order()",function(n,t){var u=this.context;return n===i?u.length!==0?u[0].aaSorting:i:(typeof n=="number"?n=[[n,t]]:r.isArray(n[0])||(n=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=n.slice()}))}),f("order.listener()",function(n,t,i){return this.iterator("table",function(r){dr(r,n,t,i)})}),f(["columns().order()","column().order()"],function(n){var t=this;return this.iterator("table",function(i,u){var f=[];r.each(t[u],function(t,i){f.push([i,n])});i.aaSorting=f})}),f("search()",function(n,t,u,f){var e=this.context;return n===i?e.length!==0?e[0].oPreviousSearch.sSearch:i:this.iterator("table",function(i){i.oFeatures.bFilter&&gt(i,r.extend({},i.oPreviousSearch,{sSearch:n+"",bRegex:t===null?!1:t,bSmart:u===null?!0:u,bCaseInsensitive:f===null?!0:f}),1)})}),s("columns().search()","column().search()",function(n,t,u,f){return this.iterator("column",function(e,o){var s=e.aoPreSearchCols;if(n===i)return s[o].sSearch;e.oFeatures.bFilter&&(r.extend(s[o],{sSearch:n+"",bRegex:t===null?!1:t,bSmart:u===null?!0:u,bCaseInsensitive:f===null?!0:f}),gt(e,e.oPreviousSearch,1))})}),f("state()",function(){return this.context.length?this.context[0].oSavedState:null}),f("state.clear()",function(){return this.iterator("table",function(n){n.fnStateSaveCallback.call(n.oInstance,n,{})})}),f("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),f("state.save()",function(){return this.iterator("table",function(n){di(n)})}),u.versionCheck=u.fnVersionCheck=function(n){for(var e=u.version.split("."),f=n.split("."),i,r,t=0,o=f.length;t<o;t++)if(i=parseInt(e[t],10)||0,r=parseInt(f[t],10)||0,i!==r)return i>r;return!0},u.isDataTable=u.fnIsDataTable=function(n){var t=r(n).get(0),i=!1;return r.each(u.settings,function(n,r){(r.nTable===t||r.nScrollHead===t||r.nScrollFoot===t)&&(i=!0)}),i},u.tables=u.fnTables=function(n){return r.map(u.settings,function(t){if(!n||n&&r(t.nTable).is(":visible"))return t.nTable})},u.util={throttle:bi,escapeRegex:yi},u.camelToHungarian=nt,f("$()",function(n,t){var u=this.rows(t).nodes(),i=r(u);return r([].concat(i.filter(n).toArray(),i.find(n).toArray()))}),r.each(["on","one","off"],function(n,t){f(t+"()",function(){var n=Array.prototype.slice.call(arguments),i;return n[0].match(/\.dt\b/)||(n[0]+=".dt"),i=r(this.tables().nodes()),i[t].apply(i,n),this})}),f("clear()",function(){return this.iterator("table",function(n){si(n)})}),f("settings()",function(){return new e(this.context,this.context)}),f("data()",function(){return this.iterator("table",function(n){return b(n.aoData,"_aData")}).flatten()}),f("destroy()",function(t){return t=t||!1,this.iterator("table",function(i){var p=i.nTableWrapper.parentNode,f=i.oClasses,c=i.nTable,k=i.nTBody,s=i.nTHead,l=i.nTFoot,o=r(c),a=r(k),w=r(i.nTableWrapper),b=r.map(i.aoData,function(n){return n.nTr}),v,y;i.bDestroying=!0;h(i,"aoDestroyCallback","destroy",[i]);t||new e(i).columns().visible(!0);w.unbind(".DT").find(":not(tbody *)").unbind(".DT");r(n).unbind(".DT-"+i.sInstance);c!=s.parentNode&&(o.children("thead").detach(),o.append(s));l&&c!=l.parentNode&&(o.children("tfoot").detach(),o.append(l));o.detach();w.detach();i.aaSorting=[];i.aaSortingFixed=[];ki(i);r(b).removeClass(i.asStripeClasses.join(" "));r("th, td",s).removeClass(f.sSortable+" "+f.sSortableAsc+" "+f.sSortableDesc+" "+f.sSortableNone);i.bJUI&&(r("th span."+f.sSortIcon+", td span."+f.sSortIcon,s).detach(),r("th, td",s).each(function(){var n=r("div."+f.sSortJUIWrapper,this);r(this).append(n.contents());n.detach()}));!t&&p&&p.insertBefore(c,i.nTableReinsertBefore);a.children().detach();a.append(b);o.css("width",i.sDestroyWidth).removeClass(f.sTable);v=i.asDestroyStripes.length;v&&a.children().each(function(n){r(this).addClass(i.asDestroyStripes[n%v])});y=r.inArray(i,u.settings);y!==-1&&u.settings.splice(y,1)})}),u.version="1.10.4",u.settings=[],u.models={},u.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},u.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},u.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},u.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(n){try{return JSON.parse((n.iStateDuration===-1?sessionStorage:localStorage).getItem("DataTables_"+n.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(n,t){try{(n.iStateDuration===-1?sessionStorage:localStorage).setItem("DataTables_"+n.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(i){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:r.extend({},u.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},ct(u.defaults),u.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},ct(u.defaults.column),u.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:i,oAjaxData:i,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return p(this)=="ssp"?this._iRecordsTotal*1:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return p(this)=="ssp"?this._iRecordsDisplay*1:this.aiDisplay.length},fnDisplayEnd:function(){var n=this._iDisplayLength,t=this._iDisplayStart,r=t+n,i=this.aiDisplay.length,u=this.oFeatures,f=u.bPaginate;return u.bServerSide?f===!1||n===-1?t+i:Math.min(t+n,this._iRecordsDisplay):!f||r>i||n===-1?i:r},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},u.ext=c={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:u.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:u.version},r.extend(c,{afnFiltering:c.search,aTypes:c.type.detect,ofnSearch:c.type.search,oSort:c.type.order,afnSortData:c.order,aoFeatures:c.feature,oApi:c.internal,oStdClasses:c.classes,oPagination:c.pager}),r.extend(u.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),function(){var i="";var n=i+"ui-state-default",t=i+"css_right ui-icon ui-icon-",f=i+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";r.extend(u.ext.oJUIClasses,u.ext.classes,{sPageButton:"fg-button ui-button "+n,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:n+" sorting_asc",sSortDesc:n+" sorting_desc",sSortable:n+" sorting",sSortableAsc:n+" sorting_asc_disabled",sSortableDesc:n+" sorting_desc_disabled",sSortableNone:n+" sorting_disabled",sSortJUIAsc:t+"triangle-1-n",sSortJUIDesc:t+"triangle-1-s",sSortJUI:t+"carat-2-n-s",sSortJUIAscAllowed:t+"carat-1-n",sSortJUIDescAllowed:t+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+n,sScrollFoot:"dataTables_scrollFoot "+n,sHeaderTH:n,sFooterTH:n,sJUIHeader:f+" ui-corner-tl ui-corner-tr",sJUIFooter:f+" ui-corner-bl ui-corner-br"})}(),ou=u.ext.pager,r.extend(ou,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(n,t){return["previous",su(n,t),"next"]},full_numbers:function(n,t){return["first","previous",su(n,t),"next","last"]},_numbers:su,numbers_length:7}),r.extend(!0,u.ext.renderer,{pageButton:{_:function(n,i,u,f,e,o){var c=n.oClasses,l=n.oLanguage.oPaginate,s,h,v=0,y=function(t,i){for(var w,f,k=function(t){wr(n,t.data.action,!0)},b,a=0,p=i.length;a<p;a++)if(f=i[a],r.isArray(f))b=r("<"+(f.DT_el||"div")+"/>").appendTo(t),y(b,f);else{s="";h="";switch(f){case"ellipsis":t.append("<span>&hellip;<\/span>");break;case"first":s=l.sFirst;h=f+(e>0?"":" "+c.sPageButtonDisabled);break;case"previous":s=l.sPrevious;h=f+(e>0?"":" "+c.sPageButtonDisabled);break;case"next":s=l.sNext;h=f+(e<o-1?"":" "+c.sPageButtonDisabled);break;case"last":s=l.sLast;h=f+(e<o-1?"":" "+c.sPageButtonDisabled);break;default:s=f+1;h=e===f?c.sPageButtonActive:""}s&&(w=r("<a>",{"class":c.sPageButton+" "+h,"aria-controls":n.sTableId,"data-dt-idx":v,tabindex:n.iTabIndex,id:u===0&&typeof f=="string"?n.sTableId+"_"+f:null}).html(s).appendTo(t),gr(w,{action:f},k),v++)}},a;try{a=r(t.activeElement).data("dt-idx");y(r(i).empty(),f);a!==null&&r(i).find("[data-dt-idx="+a+"]").focus()}catch(p){}}}}),r.extend(u.ext.type.detect,[function(n,t){var i=t.oLanguage.sDecimal;return ur(n,i)?"num"+i:null},function(n){if(n&&!(n instanceof Date)&&(!ye.test(n)||!pe.test(n)))return null;var t=Date.parse(n);return t!==null&&!isNaN(t)||g(n)?"date":null},function(n,t){var i=t.oLanguage.sDecimal;return ur(n,i,!0)?"num-fmt"+i:null},function(n,t){var i=t.oLanguage.sDecimal;return au(n,i)?"html-num"+i:null},function(n,t){var i=t.oLanguage.sDecimal;return au(n,i,!0)?"html-num-fmt"+i:null},function(n){return g(n)||typeof n=="string"&&n.indexOf("<")!==-1?"html":null}]),r.extend(u.ext.type.search,{html:function(n){return g(n)?n:typeof n=="string"?n.replace(hu," ").replace(ui,""):""},string:function(n){return g(n)?n:typeof n=="string"?n.replace(hu," "):n}}),ri=function(n,t,i,r){return n!==0&&(!n||n==="-")?-Infinity:(t&&(n=lu(n,t)),n.replace&&(i&&(n=n.replace(i,"")),r&&(n=n.replace(r,""))),n*1)},r.extend(c.type.order,{"date-pre":function(n){return Date.parse(n)||0},"html-pre":function(n){return g(n)?"":n.replace?n.replace(/<.*?>/g,"").toLowerCase():n+""},"string-pre":function(n){return g(n)?"":typeof n=="string"?n.toLowerCase():n.toString?n.toString():""},"string-asc":function(n,t){return n<t?-1:n>t?1:0},"string-desc":function(n,t){return n<t?1:n>t?-1:0}}),ae(""),r.extend(!0,u.ext.renderer,{header:{_:function(n,t,i,u){r(n.nTable).on("order.dt.DT",function(r,f,e,o){if(n===f){var s=i.idx;t.removeClass(i.sSortingClass+" "+u.sSortAsc+" "+u.sSortDesc).addClass(o[s]=="asc"?u.sSortAsc:o[s]=="desc"?u.sSortDesc:i.sSortingClass)}})},jqueryui:function(n,t,i,u){r("<div/>").addClass(u.sSortJUIWrapper).append(t.contents()).append(r("<span/>").addClass(u.sSortIcon+" "+i.sSortingClassJUI)).appendTo(t);r(n.nTable).on("order.dt.DT",function(r,f,e,o){if(n===f){var s=i.idx;t.removeClass(u.sSortAsc+" "+u.sSortDesc).addClass(o[s]=="asc"?u.sSortAsc:o[s]=="desc"?u.sSortDesc:i.sSortingClass);t.find("span."+u.sSortIcon).removeClass(u.sSortJUIAsc+" "+u.sSortJUIDesc+" "+u.sSortJUI+" "+u.sSortJUIAscAllowed+" "+u.sSortJUIDescAllowed).addClass(o[s]=="asc"?u.sSortJUIAsc:o[s]=="desc"?u.sSortJUIDesc:i.sSortingClassJUI)}})}}}),u.render={number:function(n,t,i,r){return{display:function(u){var o=u<0?"-":"",f,e;return u=Math.abs(parseFloat(u)),f=parseInt(u,10),e=i?t+(u-f).toFixed(i).substring(2):"",o+(r||"")+f.toString().replace(/\B(?=(\d{3})+(?!\d))/g,n)+e}}}},r.extend(u.ext.internal,{_fnExternApiFunc:ve,_fnBuildAjax:ai,_fnAjaxUpdate:nf,_fnAjaxParameters:tf,_fnAjaxUpdateDraw:rf,_fnAjaxDataSrc:vi,_fnAddColumn:or,_fnColumnOptions:fi,_fnAdjustColumnSizing:lt,_fnVisibleToColumnIndex:ei,_fnColumnIndexToVisible:at,_fnVisbleColumns:vt,_fnGetColumns:yt,_fnColumnTypes:sr,_fnApplyColumnDefs:ku,_fnHungarianMap:ct,_fnCamelToHungarian:nt,_fnLanguageCompat:er,_fnBrowserDetect:wu,_fnAddData:tt,_fnAddTr:oi,_fnNodeToDataIndex:de,_fnNodeToColumnIndex:ge,_fnGetCellData:a,_fnSetCellData:hr,_fnSplitObjNotation:cr,_fnGetObjectDataFn:wt,_fnSetObjectDataFn:et,_fnGetDataMaster:lr,_fnClearTable:si,_fnDeleteIndex:hi,_fnInvalidate:bt,_fnGetRowElements:ci,_fnCreateTr:ar,_fnBuildHead:du,_fnDrawHead:kt,_fnDraw:it,_fnReDraw:rt,_fnAddOptionsHtml:gu,_fnDetectHeader:dt,_fnGetUniqueThs:li,_fnFeatureHtmlFilter:uf,_fnFilterComplete:gt,_fnFilterCustom:ff,_fnFilterColumn:ef,_fnFilter:of,_fnFilterCreateSearch:yr,_fnEscapeRegex:yi,_fnFilterData:sf,_fnFeatureHtmlInfo:lf,_fnUpdateInfo:af,_fnInfoMacros:vf,_fnInitialise:ni,_fnInitComplete:wi,_fnLengthChange:pr,_fnFeatureHtmlLength:yf,_fnFeatureHtmlPaginate:pf,_fnPageChange:wr,_fnFeatureHtmlProcessing:wf,_fnProcessingDisplay:w,_fnFeatureHtmlTable:bf,_fnScrollDraw:ti,_fnApplyToChildren:d,_fnCalculateColumnWidths:br,_fnThrottle:bi,_fnConvertToWidth:kf,_fnScrollingWidthAdjust:df,_fnGetWidestNode:gf,_fnGetMaxLenString:ne,_fnStringToCss:o,_fnScrollBarWidth:te,_fnSortFlatten:ot,_fnSort:ie,_fnSortAria:re,_fnSortListener:kr,_fnSortAttachListener:dr,_fnSortingClasses:ki,_fnSortData:ue,_fnSaveState:di,_fnLoadState:fe,_fnSettingsFromNode:gi,_fnLog:st,_fnMap:k,_fnBindAction:gr,_fnCallbackReg:v,_fnCallbackFire:h,_fnLengthOverflow:nu,_fnRenderer:tu,_fnDataSource:p,_fnRowAttributes:vr,_fnCalculateEnd:function(){}}),r.fn.dataTable=u,r.fn.dataTableSettings=u.settings,r.fn.dataTableExt=u.ext,r.fn.DataTable=function(n){return r(this).dataTable(n).api()},r.each(u,function(n,t){r.fn.DataTable[n]=t}),r.fn.dataTable})}(window,document),function(){var n=function(n,t){"use strict";n.extend(!0,t.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-6'i><'col-sm-6'p>>",renderer:"bootstrap"});n.extend(t.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"});t.ext.renderer.pageButton.bootstrap=function(i,r,u,f,e,o){var a=new t.Api(i),v=i.oClasses,c=i.oLanguage.oPaginate,s,h,l=function(t,r){for(var w,f,b=function(t){t.preventDefault();n(t.currentTarget).hasClass("disabled")||a.page(t.data.action).draw(!1)},y=0,p=r.length;y<p;y++)if(f=r[y],n.isArray(f))l(t,f);else{s="";h="";switch(f){case"ellipsis":s="&hellip;";h="disabled";break;case"first":s=c.sFirst;h=f+(e>0?"":" disabled");break;case"previous":s=c.sPrevious;h=f+(e>0?"":" disabled");break;case"next":s=c.sNext;h=f+(e<o-1?"":" disabled");break;case"last":s=c.sLast;h=f+(e<o-1?"":" disabled");break;default:s=f+1;h=e===f?"active":""}s&&(w=n("<li>",{"class":v.sPageButton+" "+h,"aria-controls":i.sTableId,tabindex:i.iTabIndex,id:u===0&&typeof f=="string"?i.sTableId+"_"+f:null}).append(n("<a>",{href:"#"}).html(s)).appendTo(t),i.oApi._fnBindAction(w,{action:f},b))}};l(n(r).empty().html('<ul class="pagination"/>').children("ul"),f)};t.TableTools&&(n.extend(!0,t.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),n.extend(!0,t.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};typeof define=="function"&&define.amd?define(["jquery","datatables"],n):typeof exports=="object"?n(require("jquery"),require("datatables")):jQuery&&n(jQuery,jQuery.fn.dataTable)}(window,document),function(n,t){function u(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var n=new Date;return u(n.getFullYear(),n.getMonth(),n.getDate())}function c(n){return function(){return this[n].apply(this,arguments)}}function y(t,i){function s(n,t){return t.toLowerCase()}var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in u)i.test(r)&&(e=r.replace(o,s),f[e]=u[r]);return f}function p(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(v,function(n,t){t in i&&(u[t]=i[t])}),u}var s=n(window),l=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(this[t].valueOf()===i)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.splice(0)},copy:function(){var n=new l;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),f=function(t,r){this.dates=new l;this.viewDate=e();this.focusDate=null;this._process_options(r);this.element=n(t);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(i.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},h,a,o,v,r,i;f.prototype={constructor:f,_process_options:function(t){var u,e,h,f,s;this._o=n.extend({},this._o,t);u=this.o=n.extend({},this._o);e=u.language;r[e]||(e=e.split("-")[0],r[e]||(e=o.language));u.language=e;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.startView=Math.max(u.startView,u.minViewMode),u.multidate!==!0&&(u.multidate=Number(u.multidate)||!1,u.multidate=u.multidate!==!1?Math.max(0,u.multidate):1),u.multidateSeparator=String(u.multidateSeparator),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,h=i.parseFormat(u.format),u.startDate!==-Infinity&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):i.parseDate(u.startDate,h,u.language):-Infinity),u.endDate!==Infinity&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):i.parseDate(u.endDate,h,u.language):Infinity),u.daysOfWeekDisabled=u.daysOfWeekDisabled||[],n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)),u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)}),f=String(u.orientation).toLowerCase().split(/\s+/g),s=u.orientation.toLowerCase(),f=n.grep(f,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},s&&s!=="auto")if(f.length===1)switch(f[0]){case"top":case"bottom":u.orientation.y=f[0];break;case"left":case"right":u.orientation.x=f[0]}else s=n.grep(f,function(n){return/^left|right$/.test(n)}),u.orientation.x=s[0]||"auto",s=n.grep(f,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=s[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++){f=n[i][0];n[i].length===2?(r=t,u=n[i][1]):n[i].length===3&&(r=n[i][1],u=n[i][2]);f.on(u,r)}},_unapplyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++)f=n[i][0],n[i].length===2?(u=t,r=n[i][1]):n[i].length===3&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){arguments.length===0?(n=this.dates.length-1,t=this.o.format):typeof n=="string"&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(n){return n&&new Date(n.getTime()+n.getTimezoneOffset()*6e4)},_local_to_utc:function(n){return n&&new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,n.map(t,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:c("setDates"),setUTCDate:c("setUTCDates"),setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change()},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){var i,v,o;if(!this.isInline){var u=this.picker.outerWidth(),f=this.picker.outerHeight(),h=10,c=s.width(),y=s.height(),l=s.scrollTop(),p=parseInt(this.element.parents().filter(function(){return n(this).css("z-index")!=="auto"}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),a=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),r=t.left,e=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(r-=u-w)):(this.picker.addClass("datepicker-orient-left"),t.left<0?r-=t.left-h:t.left+u>c&&(r=c-u-h));i=this.o.orientation.y;i==="auto"&&(v=-l+t.top-f,o=l+y-(t.top+a+f),i=Math.max(v,o)===o?"top":"bottom");this.picker.addClass("datepicker-orient-"+i);i==="top"?e+=a:e-=f+parseInt(this.picker.css("padding-top"));this.picker.css({top:e,left:r,zIndex:p})}},_allow_update:!0,update:function(){if(this._allow_update){var r=this.dates.copy(),t=[],u=!1;arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),u=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date);t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language)},this));t=n.grep(t,n.proxy(function(n){return n<this.o.startDate||n>this.o.endDate||!n},this),!0);this.dates.replace(t);this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate));u?this.setValue():t.length&&String(r)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&r.length&&this._trigger("clearDate");this.fill()}},fillDow:function(){var i=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));i<this.o.weekStart+7;)n+='<th class="dow">'+r[this.o.language].daysMin[i++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+r[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>f)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===u.getFullYear()&&t.getUTCMonth()===u.getMonth()&&t.getUTCDate()===u.getDate()&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected")),i},fill:function(){var d=new Date(this.viewDate),f=d.getUTCFullYear(),g=d.getUTCMonth(),y=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,ut=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,p=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,ft=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,et=r[this.o.language].today||r.en.today||"",ot=r[this.o.language].clear||r.en.clear||"",w,e,b,c,s,h,o,a,it,rt,l,v;for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(et).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(ot).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),e=u(f,g-1,28),b=i.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),e.setUTCDate(b),e.setUTCDate(b-(e.getUTCDay()-this.o.weekStart+7)%7),c=new Date(e),c.setUTCDate(c.getUTCDate()+42),c=c.valueOf(),s=[];e.valueOf()<c;){if(e.getUTCDay()===this.o.weekStart&&(s.push("<tr>"),this.o.calendarWeeks)){var nt=new Date(+e+(this.o.weekStart-e.getUTCDay()-7)%7*864e5),tt=new Date(Number(nt)+(11-nt.getUTCDay())%7*864e5),k=new Date(Number(k=u(tt.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),st=(tt-k)/6048e5+1;s.push('<td class="cw">'+st+"<\/td>")}h=this.getClassNames(e);h.push("day");this.o.beforeShowDay!==n.noop&&(o=this.o.beforeShowDay(this._utc_to_local(e)),o===t?o={}:typeof o=="boolean"?o={enabled:o}:typeof o=="string"&&(o={classes:o}),o.enabled===!1&&h.push("disabled"),o.classes&&(h=h.concat(o.classes.split(/\s+/))),o.tooltip&&(w=o.tooltip));h=n.unique(h);s.push('<td class="'+h.join(" ")+'"'+(w?' title="'+w+'"':"")+">"+e.getUTCDate()+"<\/td>");e.getUTCDay()===this.o.weekEnd&&s.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(s.join("")),a=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active"),n.each(this.dates,function(n,t){t.getUTCFullYear()===f&&a.eq(t.getUTCMonth()).addClass("active")}),(f<y||f>p)&&a.addClass("disabled"),f===y&&a.slice(0,ut).addClass("disabled"),f===p&&a.slice(ft+1).addClass("disabled"),s="",f=parseInt(f/10,10)*10,it=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td"),f-=1,rt=n.map(this.dates,function(n){return n.getUTCFullYear()}),v=-1;v<11;v++)l=["year"],v===-1?l.push("old"):v===10&&l.push("new"),n.inArray(f,rt)!==-1&&l.push("active"),(f<y||f>p)&&l.push("disabled"),s+='<span class="'+l.join(" ")+'">'+f+"<\/span>",f+=1;it.html(s)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){var r,e,f,o,c,s,l,h;if(t.preventDefault(),r=n(t.target).closest("span, td, th"),r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":c=i.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,c);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,c);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":s=new Date;s=u(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);this.showMode(-2);l=this.o.todayBtn==="linked"?null:"view";this._setDate(s,l);break;case"clear":this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.val("").change();this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(o=1,f=r.parent().find("span").index(r),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(f),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(u(e,f,o))):(o=1,f=0,e=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(e),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(u(e,f,o))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(o=parseInt(r.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),r.is(".old")?f===0?(f=11,e-=1):f-=1:r.is(".new")&&(f===11?(f=0,e+=1):f+=1),this._setDate(u(e,f,o)))}this.picker.is(":visible")&&this._focused_from&&n(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n?t!==-1?this.dates.remove(t):this.dates.push(n):this.dates.clear(),typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(n,t){t&&t!=="date"||this._toggle_multidate(n&&new Date(n));t&&t!=="view"||(this.viewDate=n&&new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(n,i){var e;if(!n)return t;if(!i)return n;var r=new Date(n.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),h=Math.abs(i),u,f;if(i=i>0?1:-1,h===1)f=i===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+i,r.setUTCMonth(u),(u<0||u>11)&&(u=(u+12)%12);else{for(e=0;e<h;e++)r=this.moveMonth(r,i);u=r.getUTCMonth();r.setUTCDate(o);f=function(){return u!==r.getUTCMonth()}}while(f())r.setUTCDate(--o),r.setUTCMonth(u);return r},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var o,t,i,u,r,f;if(this.picker.is(":not(:visible)")){n.keyCode===27&&this.show();return}o=!1;r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode===37?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t),u=new Date(r),u.setUTCDate(r.getUTCDate()+t));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode===38?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t*7),u=new Date(r),u.setUTCDate(r.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(r);o=!0;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}o&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};h=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};h.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(i!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t.setUTCDate(r)}),r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<f&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates();delete this.updating}}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};a=n.fn.datepicker;n.fn.datepicker=function(i){var u=Array.apply(null,arguments),r;return u.shift(),this.each(function(){var s=n(this),e=s.data("datepicker"),l=typeof i=="object"&&i,v;if(!e){var a=y(this,"date"),w=n.extend({},o,a,l),b=p(w.language),c=n.extend({},o,b,a,l);s.is(".input-daterange")||c.inputs?(v={inputs:c.inputs||s.find("input").toArray()},s.data("datepicker",e=new h(this,n.extend(c,v)))):s.data("datepicker",e=new f(this,c))}if(typeof i=="string"&&typeof e[i]=="function"&&(r=e[i].apply(e,u),r!==t))return!1}),r!==t?r:this};o=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0};v=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=f;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,t){return[31,i.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,o,s){function tt(){var n=this.slice(0,c[h].length),t=c[h].slice(0,n.length);return n===t}var nt,c,v,y,h,a,it,d,w;if(!e)return t;if(e instanceof Date)return e;if(typeof o=="string"&&(o=i.parseFormat(o)),nt=/([\-+]\d+)([dmwy])/,c=e.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,h=0;h<c.length;h++){v=nt.exec(c[h]);y=parseInt(v[1]);switch(v[2]){case"d":e.setUTCDate(e.getUTCDate()+y);break;case"m":e=f.prototype.moveMonth.call(f.prototype,e,y);break;case"w":e.setUTCDate(e.getUTCDate()+y*7);break;case"y":e=f.prototype.moveYear.call(f.prototype,e,y)}}return u(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}c=e&&e.match(this.nonpunctuation)||[];e=new Date;var b={},g=["yyyy","yy","M","MM","m","mm","d","dd"],l={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},p,k;if(l.M=l.MM=l.mm=l.m,l.dd=l.d,e=u(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),a=o.parts.slice(),c.length!==a.length&&(a=n(a).filter(function(t,i){return n.inArray(i,g)!==-1}).toArray()),c.length===a.length){for(h=0,it=a.length;h<it;h++){if(p=parseInt(c[h],10),v=a[h],isNaN(p))switch(v){case"MM":k=n(r[s].months).filter(tt);p=n.inArray(k[0],r[s].months)+1;break;case"M":k=n(r[s].monthsShort).filter(tt);p=n.inArray(k[0],r[s].monthsShort)+1}b[v]=p}for(h=0;h<g.length;h++)w=g[h],w in b&&!isNaN(b[w])&&(d=new Date(e),l[w](d,b[w]),isNaN(d)||(e=d))}return e},formatDate:function(t,u,f){var e,s,o,h;if(!t)return"";for(typeof u=="string"&&(u=i.parseFormat(u)),e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,t=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class="table table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=a,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))});n(function(){n('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(n,t){function v(n){return typeof n=="object"}function a(n){return typeof n=="string"}function tt(n){return typeof n=="number"}function h(n){return n===t}function et(){i=google.maps;u||(u={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:function(){var t={};return n.each("Map Marker InfoWindow Circle Rectangle OverlayView StreetViewPanorama KmlLayer TrafficLayer BicyclingLayer GroundOverlay StyledMapType ImageMapType".split(" "),function(n,r){t[r]=i[r]}),t}(),map:{mapTypeId:i.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}})}function y(n,t){return h(n)?"gmap3_"+(t?nt+1:++nt):n}function ot(n){var t,r=i.version.split(".");for(n=n.split("."),t=0;t<r.length;t++)r[t]=parseInt(r[t],10);for(t=0;t<n.length;t++)if(n[t]=parseInt(n[t],10),r.hasOwnProperty(t)){if(r[t]<n[t])return!1}else return!1;return!0}function o(t,r,u,f,e){function s(i,r){i&&n.each(i,function(n,i){var f=t,o=i;c(i)&&(f=i[0],o=i[1]);r(u,n,function(n){o.apply(f,[e||u,n,h])})})}var o=r.td||{},h={id:f,data:o.data,tag:o.tag};s(o.events,i.event.addListener);s(o.onces,i.event.addListenerOnce)}function it(n){var t,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}function st(n,t){for(var r=arguments,i=2;i<r.length;i++)if(t in r[i]&&r[i].hasOwnProperty(t)){n[t]=r[i][t];return}}function l(t,i){var r,u,e=["data","tag","id","events","onces"],f={};if(t.td)for(r in t.td)t.td.hasOwnProperty(r)&&r!=="options"&&r!=="values"&&(f[r]=t.td[r]);for(u=0;u<e.length;u++)st(f,e[u],i,t.td);return f.options=n.extend({},t.opts||{},i.options||{}),f}function rt(){if(u.verbose){var n,t=[];if(window.console&&e(console.error)){for(n=0;n<arguments.length;n++)t.push(arguments[n]);console.error.apply(console,t)}else{for(t="",n=0;n<arguments.length;n++)t+=arguments[n].toString()+" ";alert(t)}}}function d(n){return(tt(n)||a(n))&&n!==""&&!isNaN(n)}function s(n){var i,t=[];if(!h(n))if(v(n))if(tt(n.length))t=n;else for(i in n)t.push(n[i]);else t.push(n);return t}function p(t){if(t)return e(t)?t:(t=s(t),function(i){var r;if(h(i))return!1;if(v(i)){for(r=0;r<i.length;r++)if(n.inArray(i[r],t)>=0)return!0;return!1}return n.inArray(i,t)>=0})}function r(n,t,u){var f=t?n:null;return!n||a(n)?f:n.latLng?r(n.latLng):n instanceof i.LatLng?n:d(n.lat)?new i.LatLng(n.lat,n.lng):!u&&c(n)?!d(n[0])||!d(n[1])?f:new i.LatLng(n[0],n[1]):f}function w(n){var t,u;return!n||n instanceof i.LatLngBounds?n||null:(c(n)?n.length===2?(t=r(n[0]),u=r(n[1])):n.length===4&&(t=r([n[0],n[1]]),u=r([n[2],n[3]])):"ne"in n&&"sw"in n?(t=r(n.ne),u=r(n.sw)):"n"in n&&"e"in n&&"s"in n&&"w"in n&&(t=r([n.n,n.e]),u=r([n.s,n.w])),t&&u)?new i.LatLngBounds(u,t):null}function g(n,t,f,e,o){var c=f?r(e.td,!1,!0):!1,s=c?{latLng:c}:e.td.address?a(e.td.address)?{address:e.td.address}:e.td.address:!1,h=s?ut.get(s):!1,l=this;s?(o=o||0,h?(e.latLng=h.results[0].geometry.location,e.results=h.results,e.status=h.status,t.apply(n,[e])):(s.location&&(s.location=r(s.location)),s.bounds&&(s.bounds=w(s.bounds)),at().geocode(s,function(r,h){h===i.GeocoderStatus.OK?(ut.store(s,{results:r,status:h}),e.latLng=r[0].geometry.location,e.results=r,e.status=h,t.apply(n,[e])):h===i.GeocoderStatus.OVER_QUERY_LIMIT&&o<u.queryLimit.attempt?setTimeout(function(){g.apply(l,[n,t,f,e,o+1])},u.queryLimit.delay+Math.floor(Math.random()*u.queryLimit.random)):(rt("geocode failed",h,s),e.latLng=e.results=!1,e.status=h,t.apply(n,[e]))}))):(e.latLng=r(e.td,!1,!0),t.apply(n,[e]))}function ht(t,i,r,u){function o(){do f++;while(f<t.length&&!("address"in t[f]));if(f>=t.length){r.apply(i,[u]);return}g(e,function(i){delete i.td;n.extend(t[f],i);o.apply(e,[])},!0,{td:t[f]})}var e=this,f=-1;o()}function ct(n,t,r){var u=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(f){u||(u=!0,r.latLng=new i.LatLng(f.coords.latitude,f.coords.longitude),t.apply(n,[r]))},function(){u||(u=!0,r.latLng=!1,t.apply(n,[r]))},r.opts.getCurrentPosition):(r.latLng=!1,t.apply(n,[r]))}function lt(n){var t,i=!1;if(v(n)&&n.hasOwnProperty("get")){for(t in n)if(t!=="get")return!1;i=!n.get.hasOwnProperty("callback")}return i}function at(){return f.geocoder||(f.geocoder=new i.Geocoder),f.geocoder}function vt(){var n=[];this.get=function(t){if(n.length)for(var o,i,r,u,s=it(t),f=0;f<n.length;f++){for(r=n[f],u=s.length===r.keys.length,o=0;o<s.length&&u;o++)i=s[o],u=i in r.request,u&&(u=v(t[i])&&"equals"in t[i]&&e(t[i])?t[i].equals(r.request[i]):t[i]===r.request[i]);if(u)return r.results}};this.store=function(t,i){n.push({request:t,keys:it(t),results:i})}}function yt(){var n=[],t=this;t.empty=function(){return!n.length};t.add=function(t){n.push(t)};t.get=function(){return n.length?n[0]:!1};t.ack=function(){n.shift()}}function pt(){function u(n){return{id:n.id,name:n.name,object:n.obj,tag:n.tag,data:n.data}}function f(n){e(n.setMap)&&n.setMap(null);e(n.remove)&&n.remove();e(n.free)&&n.free();n=null}var t={},i={},r=this;r.add=function(n,u,f,e){var s=n.td||{},o=y(s.id);return t[u]||(t[u]=[]),o in i&&r.clearById(o),i[o]={obj:f,sub:e,name:u,id:o,tag:s.tag,data:s.data},t[u].push(o),o};r.getById=function(n,t,r){var f=!1;return n in i&&(f=t?i[n].sub:r?u(i[n]):i[n].obj),f};r.get=function(n,r,f,e){var s,o,h=p(f);if(!t[n]||!t[n].length)return null;for(s=t[n].length;s;)if(s--,o=t[n][r?s:t[n].length-s-1],o&&i[o]){if(h&&!h(i[o].tag))continue;return e?u(i[o]):i[o].obj}return null};r.all=function(n,r,f){var e=[],o=p(r),s=function(n){for(var r,s=0;s<t[n].length;s++)if(r=t[n][s],r&&i[r]){if(o&&!o(i[r].tag))continue;e.push(f?u(i[r]):i[r].obj)}};if(n in t)s(n);else if(h(n))for(n in t)s(n);return e};r.rm=function(n,u,f){var e,o;if(!t[n])return!1;if(u){if(f){for(e=t[n].length-1;e>=0;e--)if(o=t[n][e],u(i[o].tag))break}else for(e=0;e<t[n].length;e++)if(o=t[n][e],u(i[o].tag))break}else e=f?t[n].length-1:0;return(e in t[n])?r.clearById(t[n][e],e):!1};r.clearById=function(n,r){if(n in i){for(var e=i[n].name,u=0;h(r)&&u<t[e].length;u++)n===t[e][u]&&(r=u);return f(i[n].obj),i[n].sub&&f(i[n].sub),delete i[n],t[e].splice(r,1),!0}return!1};r.objGetById=function(n){var r,u;if(t.clusterer)for(u in t.clusterer)if((r=i[t.clusterer[u]].obj.getById(n))!==!1)return r;return!1};r.objClearById=function(n){var r;if(t.clusterer)for(r in t.clusterer)if(i[t.clusterer[r]].obj.clearById(n))return!0;return null};r.clear=function(n,i,u,f){var c,e,o,h=p(f);if(n&&n.length)n=s(n);else{n=[];for(c in t)n.push(c)}for(e=0;e<n.length;e++)if(o=n[e],i)r.rm(o,h,!0);else if(u)r.rm(o,h,!1);else while(r.rm(o,h,!1));};r.objClear=function(r,u,f,e){var o;if(t.clusterer&&(n.inArray("marker",r)>=0||!r.length))for(o in t.clusterer)i[t.clusterer[o]].obj.clear(u,f,e)}}function wt(t,i,r){function c(n){var t={};return t[n]={},t}function l(){for(var n in r)if(r.hasOwnProperty(n)&&!f.hasOwnProperty(n))return n}var f={},o=this,h,s={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};a(r)&&(r=c(r));o.run=function(){for(var o,c;o=l();){if(e(t[o])){h=o;c=n.extend(!0,{},u[o]||{},r[o].options||{});o in s.latLng?r[o].values?ht(r[o].values,t,t[o],{td:r[o],opts:c,session:f}):g(t,t[o],s.latLng[o],{td:r[o],opts:c,session:f}):o in s.geoloc?ct(t,t[o],{td:r[o],opts:c,session:f}):t[o].apply(t,[{td:r[o],opts:c,session:f}]);return}f[o]=null}i.apply(t,[r,f])};o.ack=function(n){f[h]=n;o.run.apply(o,[])}}function bt(){return f.ds||(f.ds=new i.DirectionsService),f.ds}function kt(){return f.dms||(f.dms=new i.DistanceMatrixService),f.dms}function dt(){return f.mzs||(f.mzs=new i.MaxZoomService),f.mzs}function ft(){return f.es||(f.es=new i.ElevationService),f.es}function gt(n){function t(){var n=this;return n.onAdd=function(){},n.onRemove=function(){},n.draw=function(){},u.classes.OverlayView.apply(n,[])}t.prototype=u.classes.OverlayView.prototype;var i=new t;return i.setMap(n),i}function ni(t,r,f){function st(n){c[n]||(delete s[n].options.map,c[n]=new u.classes.Marker(s[n].options),o(t,{td:s[n]},c[n],s[n].id))}function ht(){if(b=vt.getProjection(),!b){setTimeout(function(){ht.apply(h,[])},25);return}ot=!0;d.push(i.event.addListener(r,"zoom_changed",lt));d.push(i.event.addListener(r,"bounds_changed",lt));nt()}function ct(n){v(l[n])?(e(l[n].obj.setMap)&&l[n].obj.setMap(null),e(l[n].obj.remove)&&l[n].obj.remove(),e(l[n].shadow.remove)&&l[n].obj.remove(),e(l[n].shadow.setMap)&&l[n].shadow.setMap(null),delete l[n].obj,delete l[n].shadow):c[n]&&c[n].setMap(null);delete l[n]}function yt(){var s,r,h,u,f,c,e,l,t=Math.cos,o=Math.sin,n=arguments;return n[0]instanceof i.LatLng?(s=n[0].lat(),h=n[0].lng(),n[1]instanceof i.LatLng?(r=n[1].lat(),u=n[1].lng()):(r=n[1],u=n[2])):(s=n[0],h=n[1],n[2]instanceof i.LatLng?(r=n[2].lat(),u=n[2].lng()):(r=n[2],u=n[3])),f=Math.PI*s/180,c=Math.PI*h/180,e=Math.PI*r/180,l=Math.PI*u/180,6371e3*Math.acos(Math.min(t(f)*t(e)*t(c)*t(l)+t(f)*o(c)*t(e)*o(l)+o(f)*o(e),1))}function pt(){var n=yt(r.getCenter(),r.getBounds().getNorthEast()),t=new i.Circle({center:r.getCenter(),radius:1.25*n});return t.getBounds()}function wt(){var n,t={};for(n in l)t[n]=!0;return t}function lt(){clearTimeout(ut);ut=setTimeout(nt,25)}function bt(n){var t=b.fromLatLngToDivPixel(n),r=b.fromDivPixelToLatLng(new i.Point(t.x+f.radius,t.y-f.radius)),u=b.fromDivPixelToLatLng(new i.Point(t.x-f.radius,t.y+f.radius));return new i.LatLngBounds(u,r)}function nt(){if(!it&&!et&&ot){var u,e,c,t,nt=!1,a,h,ut,b,v,y,d,o=[],p={},st=r.getZoom(),ht="maxZoom"in f&&st>f.maxZoom,g=wt();for(k=!1,st>3&&(a=pt(),nt=a.getSouthWest().lng()<a.getNorthEast().lng()),u=0;u<s.length;u++)s[u]&&(!nt||a.contains(s[u].options.position))&&(!tt||tt(w[u]))&&o.push(u);for(;;){for(u=0;p[u]&&u<o.length;)u++;if(u===o.length)break;if(t=[],rt&&!ht){d=10;do for(b=t,t=[],d--,ut=b.length?a.getCenter():s[o[u]].options.position,a=bt(ut),e=u;e<o.length;e++)p[e]||a.contains(s[o[e]].options.position)&&t.push(e);while(b.length<t.length&&t.length>1&&d)}else for(e=u;e<o.length;e++)if(!p[e]){t.push(e);break}for(h={indexes:[],ref:[]},v=y=0,c=0;c<t.length;c++)p[t[c]]=!0,h.indexes.push(o[t[c]]),h.ref.push(o[t[c]]),v+=s[o[t[c]]].options.position.lat(),y+=s[o[t[c]]].options.position.lng();v/=t.length;y/=t.length;h.latLng=new i.LatLng(v,y);h.ref=h.ref.join("-");h.ref in g?delete g[h.ref]:(t.length===1&&(l[h.ref]=!0),ft(h))}n.each(g,function(n){ct(n)});et=!1}}var ut,b,tt,ft,at,it=!1,k=!1,et=!1,ot=!1,rt=!0,h=this,d=[],l={},a={},g={},c=[],s=[],w=[],vt=gt(r,f.radius);ht();h.getById=function(n){return n in a?(st(a[n]),c[a[n]]):!1};h.rm=function(n){var t=a[n];c[t]&&c[t].setMap(null);delete c[t];c[t]=!1;delete s[t];s[t]=!1;delete w[t];w[t]=!1;delete a[n];delete g[t];k=!0};h.clearById=function(n){if(n in a)return h.rm(n),!0};h.clear=function(n,t,i){var f,e,o,r,u,c=[],l=p(i);for(n?(f=s.length-1,e=-1,o=-1):(f=0,e=s.length,o=1),r=f;r!==e;r+=o)if(s[r]&&(!l||l(s[r].tag))&&(c.push(g[r]),t||n))break;for(u=0;u<c.length;u++)h.rm(c[u])};h.add=function(n,t){n.id=y(n.id);h.clearById(n.id);a[n.id]=c.length;g[c.length]=n.id;c.push(null);s.push(n);w.push(t);k=!0};h.addMarker=function(n,i){i=i||{};i.id=y(i.id);h.clearById(i.id);i.options||(i.options={});i.options.position=n.getPosition();o(t,{td:i},n,i.id);a[i.id]=c.length;g[c.length]=i.id;c.push(n);s.push(i);w.push(i.data||{});k=!0};h.td=function(n){return s[n]};h.value=function(n){return w[n]};h.marker=function(n){return n in c?(st(n),c[n]):!1};h.markerIsSet=function(n){return Boolean(c[n])};h.setMarker=function(n,t){c[n]=t};h.store=function(n,t,i){l[n.ref]={obj:t,shadow:i}};h.free=function(){for(var t=0;t<d.length;t++)i.event.removeListener(d[t]);d=[];n.each(l,function(n){ct(n)});l={};n.each(s,function(n){s[n]=null});s=[];n.each(c,function(n){c[n]&&(c[n].setMap(null),delete c[n])});c=[];n.each(w,function(n){delete w[n]});w=[];a={};g={}};h.filter=function(n){tt=n;nt()};h.enable=function(n){rt!==n&&(rt=n,nt())};h.display=function(n){ft=n};h.error=function(n){at=n};h.beginUpdate=function(){it=!0};h.endUpdate=function(){it=!1;k&&nt()};h.autofit=function(n){for(var t=0;t<s.length;t++)s[t]&&n.extend(s[t].options.position)}}function b(n,t){var i=this;i.id=function(){return n};i.filter=function(n){t.filter(n)};i.enable=function(){t.enable(!0)};i.disable=function(){t.enable(!1)};i.add=function(n,i,r){r||t.beginUpdate();t.addMarker(n,i);r||t.endUpdate()};i.getById=function(n){return t.getById(n)};i.clearById=function(n,i){var r;return i||t.beginUpdate(),r=t.clearById(n),i||t.endUpdate(),r};i.clear=function(n,i,r,u){u||t.beginUpdate();t.clear(n,i,r);u||t.endUpdate()}}function k(t,r,f,e){var o=this,s=[];u.classes.OverlayView.call(o);o.setMap(t);o.onAdd=function(){var t=o.getPanes();r.pane in t&&n(t[r.pane]).append(e);n.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(t,r){s.push(i.event.addDomListener(e[0],r,function(t){n.Event(t).stopPropagation();i.event.trigger(o,r,[t]);o.draw()}))});s.push(i.event.addDomListener(e[0],"contextmenu",function(t){n.Event(t).stopPropagation();i.event.trigger(o,"rightclick",[t]);o.draw()}))};o.getPosition=function(){return f};o.setPosition=function(n){f=n;o.draw()};o.draw=function(){var n=o.getProjection().fromLatLngToDivPixel(f);e.css("left",n.x+r.offset.x+"px").css("top",n.y+r.offset.y+"px")};o.onRemove=function(){for(var n=0;n<s.length;n++)i.event.removeListener(s[n]);e.remove()};o.hide=function(){e.hide()};o.show=function(){e.show()};o.toggle=function(){e&&(e.is(":visible")?o.show():o.hide())};o.toggleDOM=function(){o.setMap(o.getMap()?null:t)};o.getDOMElement=function(){return e[0]}}function ti(f){function st(){!tt&&(tt=et.get())&&tt.run()}function ct(){tt=null;et.ack();st.call(d)}function ut(n){var i,t=n.td.callback;t&&(i=Array.prototype.slice.call(arguments,1),e(t)?t.apply(f,i):c(t)&&e(t[1])&&t[1].apply(t[0],i))}function nt(n,t,i){i&&o(f,n,t,i);ut(n,t);tt.ack(t)}function it(t,i){i=i||{};var e=i.td&&i.td.options?i.td.options:0;p?e&&(e.center&&(e.center=r(e.center)),p.setOptions(e)):(e=i.opts||n.extend(!0,{},u.map,e||{}),e.center=t||r(e.center),p=new u.classes.Map(f.get(0),e))}function lt(i){var e=new ni(f,p,i),s={},h={},c=[],l;for(var u in i)/^[0-9]+$/.test(u)?(c.push(1*u),h[u]=i[u],h[u].width=h[u].width||0,h[u].height=h[u].height||0):s[u]=i[u];return c.sort(function(n,t){return n>t}),l=s.calculator?function(t){var i=[];return n.each(t,function(n,t){i.push(e.value(t))}),s.calculator.apply(f,[i])}:function(n){return n.length},e.error(function(){rt.apply(d,arguments)}),e.display(function(u){var w,a,v,k,y,b,g=l(u.indexes);if(i.force||g>1)for(w=0;w<c.length;w++)c[w]<=g&&(a=h[c[w]]);a?(y=a.offset||[-a.width/2,-a.height/2],v=n.extend({},s),v.options=n.extend({pane:"overlayLayer",content:a.content?a.content.replace("CLUSTER_COUNT",g):"",offset:{x:("x"in y?y.x:y[0])||0,y:("y"in y?y.y:y[1])||0}},s.options||{}),k=d.overlay({td:v,opts:v.options,latLng:r(u)},!0),v.options.pane="floatShadow",v.options.content=n(document.createElement("div")).width(a.width+"px").height(a.height+"px").css({cursor:"pointer"}),b=d.overlay({td:v,opts:v.options,latLng:r(u)},!0),s.data={latLng:r(u),markers:[]},n.each(u.indexes,function(n,t){s.data.markers.push(e.value(t));e.markerIsSet(t)&&e.marker(t).setMap(null)}),o(f,{td:s},b,t,{main:k,shadow:b}),e.store(u,k,b)):n.each(u.indexes,function(n,t){e.marker(t).setMap(p)})}),e}function ht(t,u,e){var s=[],h="values"in t.td;if(h||(t.td.values=[{options:t.opts}]),!t.td.values.length){nt(t,!1);return}it();n.each(t.td.values,function(n,h){var b,v,y,w,a=l(t,h);if(a.options[e])if(a.options[e][0][0]&&c(a.options[e][0][0]))for(v=0;v<a.options[e].length;v++)for(y=0;y<a.options[e][v].length;y++)a.options[e][v][y]=r(a.options[e][v][y]);else for(v=0;v<a.options[e].length;v++)a.options[e][v]=r(a.options[e][v]);a.options.map=p;w=new i[u](a.options);s.push(w);b=g.add({td:a},u.toLowerCase(),w);o(f,{td:a},w,b)});nt(t,h?s:s[0])}var d=this,et=new yt,g=new pt,p=null,tt;d._plan=function(n){for(var t=0;t<n.length;t++)et.add(new wt(d,ct,n[t]));st()};d.map=function(n){it(n.latLng,n);o(f,n,p);nt(n,p)};d.destroy=function(n){g.clear();f.empty();p&&(p=null);nt(n,!0)};d.overlay=function(t,i){var e=[],s="values"in t.td;if(s||(t.td.values=[{latLng:t.latLng,options:t.opts}]),!t.td.values.length){nt(t,!1);return}if(k.__initialised||(k.prototype=new u.classes.OverlayView,k.__initialised=!0),n.each(t.td.values,function(u,s){var v,h,c=l(t,s),a=n(document.createElement("div")).css({border:"none",borderWidth:0,position:"absolute"});a.append(c.options.content);h=new k(p,c.options,r(c)||r(s),a);e.push(h);a=null;i||(v=g.add(t,"overlay",h),o(f,{td:c},h,v))}),i)return e[0];nt(t,s?e:e[0])};d.marker=function(t){var c,s,e,a="values"in t.td,h=!p;if(a||(t.opts.position=t.latLng||r(t.opts.position),t.td.values=[{options:t.opts}]),!t.td.values.length){nt(t,!1);return}if(h&&it(),t.td.cluster&&!p.getBounds()){i.event.addListenerOnce(p,"bounds_changed",function(){d.marker.apply(d,[t])});return}t.td.cluster?(t.td.cluster instanceof b?(s=t.td.cluster,e=g.getById(s.id(),!0)):(e=lt(t.td.cluster),s=new b(y(t.td.id,!0),e),g.add(t,"clusterer",s,e)),e.beginUpdate(),n.each(t.td.values,function(n,i){var u=l(t,i);u.options.position=u.options.position?r(u.options.position):r(i);u.options.position&&(u.options.map=p,h&&(p.setCenter(u.options.position),h=!1),e.add(u,i))}),e.endUpdate(),nt(t,s)):(c=[],n.each(t.td.values,function(n,i){var a,s,e=l(t,i);e.options.position=e.options.position?r(e.options.position):r(i);e.options.position&&(e.options.map=p,h&&(p.setCenter(e.options.position),h=!1),s=new u.classes.Marker(e.options),c.push(s),a=g.add({td:e},"marker",s),o(f,{td:e},s,a))}),nt(t,a?c:c[0]))};d.getroute=function(n){n.opts.origin=r(n.opts.origin,!0);n.opts.destination=r(n.opts.destination,!0);bt().route(n.opts,function(t,r){ut(n,r===i.DirectionsStatus.OK?t:!1,r);tt.ack()})};d.getdistance=function(n){var t;for(n.opts.origins=s(n.opts.origins),t=0;t<n.opts.origins.length;t++)n.opts.origins[t]=r(n.opts.origins[t],!0);for(n.opts.destinations=s(n.opts.destinations),t=0;t<n.opts.destinations.length;t++)n.opts.destinations[t]=r(n.opts.destinations[t],!0);kt().getDistanceMatrix(n.opts,function(t,r){ut(n,r===i.DistanceMatrixStatus.OK?t:!1,r);tt.ack()})};d.infowindow=function(i){var e=[],s="values"in i.td;s||(i.latLng&&(i.opts.position=i.latLng),i.td.values=[{options:i.opts}]);n.each(i.td.values,function(n,c){var y,v,a=l(i,c);a.options.position=a.options.position?r(a.options.position):r(c.latLng);p||it(a.options.position);v=new u.classes.InfoWindow(a.options);v&&(h(a.open)||a.open)&&(s?v.open(p,a.anchor||t):v.open(p,a.anchor||(i.latLng?t:i.session.marker?i.session.marker:t)));e.push(v);y=g.add({td:a},"infowindow",v);o(f,{td:a},v,y)});nt(i,s?e:e[0])};d.circle=function(t){var i=[],e="values"in t.td;if(e||(t.opts.center=t.latLng||r(t.opts.center),t.td.values=[{options:t.opts}]),!t.td.values.length){nt(t,!1);return}n.each(t.td.values,function(n,e){var c,h,s=l(t,e);s.options.center=s.options.center?r(s.options.center):r(e);p||it(s.options.center);s.options.map=p;h=new u.classes.Circle(s.options);i.push(h);c=g.add({td:s},"circle",h);o(f,{td:s},h,c)});nt(t,e?i:i[0])};d.getaddress=function(n){ut(n,n.results,n.status);tt.ack()};d.getlatlng=function(n){ut(n,n.results,n.status);tt.ack()};d.getmaxzoom=function(n){dt().getMaxZoomAtLatLng(n.latLng,function(t){ut(n,t.status===i.MaxZoomStatus.OK?t.zoom:!1,status);tt.ack()})};d.getelevation=function(n){var u,t=[],f=function(t,r){ut(n,r===i.ElevationStatus.OK?t:!1,r);tt.ack()};if(n.latLng)t.push(n.latLng);else for(t=s(n.td.locations||[]),u=0;u<t.length;u++)t[u]=r(t[u]);if(t.length)ft().getElevationForLocations({locations:t},f);else{if(n.td.path&&n.td.path.length)for(u=0;u<n.td.path.length;u++)t.push(r(n.td.path[u]));t.length?ft().getElevationAlongPath({path:t,samples:n.td.samples},f):tt.ack()}};d.defaults=function(t){n.each(t.td,function(t,i){u[t]=v(u[t])?n.extend({},u[t],i):i});tt.ack(!0)};d.rectangle=function(t){var i=[],r="values"in t.td;if(r||(t.td.values=[{options:t.opts}]),!t.td.values.length){nt(t,!1);return}n.each(t.td.values,function(n,r){var h,s,e=l(t,r);e.options.bounds=e.options.bounds?w(e.options.bounds):w(r);p||it(e.options.bounds.getCenter());e.options.map=p;s=new u.classes.Rectangle(e.options);i.push(s);h=g.add({td:e},"rectangle",s);o(f,{td:e},s,h)});nt(t,r?i:i[0])};d.polyline=function(n){ht(n,"Polyline","path")};d.polygon=function(n){ht(n,"Polygon","paths")};d.trafficlayer=function(n){it();var t=g.get("trafficlayer");t||(t=new u.classes.TrafficLayer,t.setMap(p),g.add(n,"trafficlayer",t));nt(n,t)};d.bicyclinglayer=function(n){it();var t=g.get("bicyclinglayer");t||(t=new u.classes.BicyclingLayer,t.setMap(p),g.add(n,"bicyclinglayer",t));nt(n,t)};d.groundoverlay=function(n){n.opts.bounds=w(n.opts.bounds);n.opts.bounds&&it(n.opts.bounds.getCenter());var i,t=new u.classes.GroundOverlay(n.opts.url,n.opts.bounds,n.opts.opts);t.setMap(p);i=g.add(n,"groundoverlay",t);nt(n,t,i)};d.streetviewpanorama=function(t){t.opts.opts||(t.opts.opts={});t.latLng?t.opts.opts.position=t.latLng:t.opts.opts.position&&(t.opts.opts.position=r(t.opts.opts.position));t.td.divId?t.opts.container=document.getElementById(t.td.divId):t.opts.container&&(t.opts.container=n(t.opts.container).get(0));var f,i=new u.classes.StreetViewPanorama(t.opts.container,t.opts.opts);i&&p.setStreetView(i);f=g.add(t,"streetviewpanorama",i);nt(t,i,f)};d.kmllayer=function(t){var i=[],r="values"in t.td;if(r||(t.td.values=[{options:t.opts}]),!t.td.values.length){nt(t,!1);return}n.each(t.td.values,function(n,r){var c,h,e,s=l(t,r);p||it();e=s.options;s.options.opts&&(e=s.options.opts,s.options.url&&(e.url=s.options.url));e.map=p;h=ot("3.10")?new u.classes.KmlLayer(e):new u.classes.KmlLayer(e.url,e);i.push(h);c=g.add({td:s},"kmllayer",h);o(f,{td:s},h,c)});nt(t,r?i:i[0])};d.panel=function(t){it();var o,r,u=0,e=0,i=n(document.createElement("div"));i.css({position:"absolute",zIndex:1e3,visibility:"hidden"});t.opts.content&&(r=n(t.opts.content),i.append(r),f.first().prepend(i),h(t.opts.left)?h(t.opts.right)?t.opts.center&&(u=(f.width()-r.width())/2):u=f.width()-r.width()-t.opts.right:u=t.opts.left,h(t.opts.top)?h(t.opts.bottom)?t.opts.middle&&(e=(f.height()-r.height())/2):e=f.height()-r.height()-t.opts.bottom:e=t.opts.top,i.css({top:e,left:u,visibility:"visible"}));o=g.add(t,"panel",i);nt(t,i,o);i=null};d.directionsrenderer=function(t){t.opts.map=p;var u,r=new i.DirectionsRenderer(t.opts);t.td.divId?r.setPanel(document.getElementById(t.td.divId)):t.td.container&&r.setPanel(n(t.td.container).get(0));u=g.add(t,"directionsrenderer",r);nt(t,r,u)};d.getgeoloc=function(n){nt(n,n.latLng)};d.styledmaptype=function(n){it();var t=new u.classes.StyledMapType(n.td.styles,n.opts);p.mapTypes.set(n.td.id,t);nt(n,t)};d.imagemaptype=function(n){it();var t=new u.classes.ImageMapType(n.opts);p.mapTypes.set(n.td.id,t);nt(n,t)};d.autofit=function(t){var r=new i.LatLngBounds;n.each(g.all(),function(n,t){t.getPosition?r.extend(t.getPosition()):t.getBounds?(r.extend(t.getBounds().getNorthEast()),r.extend(t.getBounds().getSouthWest())):t.getPaths?t.getPaths().forEach(function(n){n.forEach(function(n){r.extend(n)})}):t.getPath?t.getPath().forEach(function(n){r.extend(n)}):t.getCenter?r.extend(t.getCenter()):typeof b=="function"&&t instanceof b&&(t=g.getById(t.id(),!0),t&&t.autofit(r))});r.isEmpty()||p.getBounds()&&p.getBounds().equals(r)||("maxZoom"in t.td&&i.event.addListenerOnce(p,"bounds_changed",function(){this.getZoom()>t.td.maxZoom&&this.setZoom(t.td.maxZoom)}),p.fitBounds(r));nt(t,!0)};d.clear=function(t){if(a(t.td)){if(g.clearById(t.td)||g.objClearById(t.td)){nt(t,!0);return}t.td={name:t.td}}t.td.id?n.each(s(t.td.id),function(n,t){g.clearById(t)||g.objClearById(t)}):(g.clear(s(t.td.name),t.td.last,t.td.first,t.td.tag),g.objClear(s(t.td.name),t.td.last,t.td.first,t.td.tag));nt(t,!0)};d.get=function(i,r,u){var o,f,e=r?i:i.td;if(r||(u=e.full),a(e)?(f=g.getById(e,!1,u)||g.objGetById(e),f===!1&&(o=e,e={})):o=e.name,o==="map"&&(f=p),f||(f=[],e.id?(n.each(s(e.id),function(n,t){f.push(g.getById(t,!1,u)||g.objGetById(t))}),c(e.id)||(f=f[0])):(n.each(o?s(o):[t],function(t,i){var r;e.first?(r=g.get(i,!1,e.tag,u),r&&f.push(r)):e.all?n.each(g.all(i,e.tag,u),function(n,t){f.push(t)}):(r=g.get(i,!0,e.tag,u),r&&f.push(r))}),e.all||c(o)||(f=f[0]))),f=c(f)||!e.all?f:[f],r)return f;nt(i,f)};d.exec=function(t){n.each(s(t.td.func),function(i,r){n.each(d.get(t.td,!0,t.td.hasOwnProperty("full")?t.td.full:!0),function(n,t){r.call(f,t)})});nt(t,!0)};d.trigger=function(t){if(a(t.td))i.event.trigger(p,t.td);else{var r=[p,t.td.eventName];t.td.var_args&&n.each(t.td.var_args,function(n,t){r.push(t)});i.event.trigger.apply(i.event,r)}ut(t);tt.ack()}}var u,i,nt=0,e=n.isFunction,c=n.isArray,f={},ut=new vt;n.fn.gmap3=function(){var r,t=[],u=!0,i=[];for(et(),r=0;r<arguments.length;r++)arguments[r]&&t.push(arguments[r]);return(t.length||t.push("map"),n.each(this,function(){var f=n(this),r=f.data("gmap3");u=!1;r||(r=new ti(f),f.data("gmap3",r));t.length===1&&(t[0]==="get"||lt(t[0]))?t[0]==="get"?i.push(r.get("map",!0)):i.push(r.get(t[0].get,!0,t[0].get.full)):r._plan(t)}),i.length)?i.length===1?i[0]:i:this}}(jQuery),function(n){function d(n,r,u){var l=n[0],e=/er/.test(u)?s:/bl/.test(u)?f:t,h=u==nt?{checked:l[t],disabled:l[f],indeterminate:n.attr(s)=="true"||n.attr(w)=="false"}:l[e];if(/^(ch|di|in)/.test(u)&&!h)v(n,e);else if(/^(un|en|de)/.test(u)&&h)c(n,e);else if(u==nt)for(e in h)h[e]?v(n,e,!0):c(n,e,!0);else r&&u!="toggle"||(r||n[a]("ifClicked"),h?l[i]!==o&&c(n,e):v(n,e))}function v(l,a,v){var p=l[0],b=l.parent(),nt=a==t,tt=a==s,et=a==f,ut=tt?w:nt?it:"enabled",ot=u(l,ut+y(p[i])),st=u(l,a+y(p[i])),rt,d;p[a]!==!0&&(!v&&a==t&&p[i]==o&&p.name&&(rt=l.closest("form"),d='input[name="'+p.name+'"]',d=rt.length?rt.find(d):n(d),d.each(function(){this!==p&&n(this).data(r)&&c(n(this),a)})),tt?(p[a]=!0,p[t]&&c(l,t,"force")):(v||(p[a]=!0),nt&&p[s]&&c(l,s,!1)),ft(l,nt,a,v));p[f]&&!!u(l,k,!0)&&b.find("."+g).css(k,"default");b[e](st||u(l,a)||"");et?b.attr("aria-disabled","true"):b.attr("aria-checked",tt?"mixed":"true");b[h](ot||u(l,ut)||"")}function c(n,r,o){var c=n[0],l=n.parent(),v=r==t,p=r==s,b=r==f,a=p?w:v?it:"enabled",d=u(n,a+y(c[i])),nt=u(n,r+y(c[i]));c[r]!==!1&&((p||!o||o=="force")&&(c[r]=!1),ft(n,v,a,o));c[f]||!u(n,k,!0)||l.find("."+g).css(k,"pointer");l[h](nt||u(n,r)||"");b?l.attr("aria-disabled","false"):l.attr("aria-checked","false");l[e](d||u(n,a)||"")}function ut(t,i){t.data(r)&&(t.parent().html(t.attr("style",t.data(r).s||"")),i&&t[a](i),t.off(".i").unwrap(),n(b+'[for="'+t[0].id+'"]').add(t.closest(b)).off(".i"))}function u(n,t,i){if(n.data(r))return n.data(r).o[t+(i?"":"Class")]}function y(n){return n.charAt(0).toUpperCase()+n.slice(1)}function ft(n,t,i,r){r||(t&&n[a]("ifToggled"),n[a]("ifChanged")[a]("if"+y(i)))}var r="iCheck",g=r+"-helper",p="checkbox",o="radio",t="checked",it="un"+t,f="disabled",w="determinate",s="in"+w,nt="update",i="type",l="click",rt="touchbegin.i touchend.i",e="addClass",h="removeClass",a="trigger",b="label",k="cursor",tt=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);n.fn[r]=function(u,y){var et='input[type="'+p+'"], input[type="'+o+'"]',k=n(),ht=function(t){t.each(function(){var t=n(this);k=t.is(et)?k.add(t):k.add(t.find(et))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(u))return u=u.toLowerCase(),ht(this),k.each(function(){var t=n(this);u=="destroy"?ut(t,"ifDestroyed"):d(t,!0,u);n.isFunction(y)&&y()});if(typeof u!="object"&&u)return this;var w=n.extend({checkedClass:t,disabledClass:f,indeterminateClass:s,labelHover:!0,aria:!1},u),ot=w.handle,ft=w.hoverClass||"hover",at=w.focusClass||"focus",ct=w.activeClass||"active",lt=!!w.labelHover,st=w.labelHoverClass||"hover",it=(""+w.increaseArea).replace("%","")|0;return(ot==p||ot==o)&&(et='input[type="'+ot+'"]'),it<-50&&(it=-50),ht(this),k.each(function(){var s=n(this);ut(s);var y=this,et=y.id,ot=-it+"%",ht=100+it*2+"%",vt={position:"absolute",top:ot,left:ot,display:"block",width:ht,height:ht,margin:0,padding:0,background:"#fff",border:0,opacity:0},bt=tt?{position:"absolute",visibility:"hidden"}:it?vt:{position:"absolute",opacity:0},kt=y[i]==p?w.checkboxClass||"i"+p:w.radioClass||"i"+o,k=n(b+'[for="'+et+'"]').add(s.closest(b)),yt=!!w.aria,pt=r+"-"+Math.random().toString(36).replace("0.",""),u='<div class="'+kt+'" '+(yt?'role="'+y[i]+'" ':""),wt;if(k.length&&yt&&k.each(function(){u+='aria-labelledby="';this.id?u+=this.id:(this.id=pt,u+=pt);u+='"'}),u=s.wrap(u+"/>")[a]("ifCreated").parent().append(w.insert),wt=n('<ins class="'+g+'"/>').css(vt).appendTo(u),s.data(r,{o:w,s:s.attr("style")}).css(bt),!w.inheritClass||u[e](y.className||""),!!w.inheritID&&et&&u.attr("id",r+"-"+et),u.css("position")=="static"&&u.css("position","relative"),d(s,!0,nt),k.length)k.on(l+".i mouseover.i mouseout.i "+rt,function(t){var r=t[i],o=n(this);if(!y[f]){if(r==l){if(n(t.target).is("a"))return;d(s,!1,!0)}else lt&&(/ut|nd/.test(r)?(u[h](ft),o[h](st)):(u[e](ft),o[e](st)));if(tt)t.stopPropagation();else return!1}});s.on(l+".i focus.i blur.i keyup.i keydown.i keypress.i",function(n){var r=n[i],f=n.keyCode;if(r==l)return!1;if(r=="keydown"&&f==32)return y[i]==o&&y[t]||(y[t]?c(s,t):v(s,t)),!1;r=="keyup"&&y[i]==o?y[t]||v(s,t):/us|ur/.test(r)&&u[r=="blur"?h:e](at)});wt.on(l+" mousedown mouseup mouseover mouseout "+rt,function(n){var t=n[i],r=/wn|up/.test(t)?ct:ft;if(!y[f])if(t==l?d(s,!1,!0):(/wn|er|in/.test(t)?u[e](r):u[h](r+" "+ct),k.length&&lt&&r==ft&&k[/ut|nd/.test(t)?h:e](st)),tt)n.stopPropagation();else return!1})})}}(window.jQuery||window.Zepto),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)}(function(n,t){"use strict";var l,f,p,w,a,e;if(!n.jstree){var b=0,u=!1,r=!1,o=!1,y=[],v=n("script:last").attr("src"),h=document,c=h.createElement("LI"),i,s;c.setAttribute("role","treeitem");i=h.createElement("I");i.className="jstree-icon jstree-ocl";i.setAttribute("role","presentation");c.appendChild(i);i=h.createElement("A");i.className="jstree-anchor";i.setAttribute("href","#");i.setAttribute("tabindex","-1");s=h.createElement("I");s.className="jstree-icon jstree-themeicon";s.setAttribute("role","presentation");i.appendChild(s);c.appendChild(i);i=s=null;n.jstree={version:"3.0.8",defaults:{plugins:[]},plugins:{},path:v&&v.indexOf("/")!==-1?v.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%]/g};n.jstree.create=function(t,i){var r=new n.jstree.core(++b),u=i;return i=n.extend(!0,{},n.jstree.defaults,i),u&&u.plugins&&(i.plugins=u.plugins),n.each(i.plugins,function(n,t){n!=="core"&&(r=r.plugin(t,i[t]))}),r.init(t,i),r};n.jstree.destroy=function(){n(".jstree:jstree").jstree("destroy");n(document).off(".jstree")};n.jstree.core=function(n){this._id=n;this._cnt=0;this._wrk=null;this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}};n.jstree.reference=function(t){var r=null,i=null;if(t&&t.id&&(t=t.id),!i||!i.length)try{i=n(t)}catch(u){}if(!i||!i.length)try{i=n("#"+t.replace(n.jstree.idregex,"\\$&"))}catch(u){}return i&&i.length&&(i=i.closest(".jstree")).length&&(i=i.data("jstree"))?r=i:n(".jstree").each(function(){var i=n(this).data("jstree");if(i&&i._model.data[t])return r=i,!1}),r};n.fn.jstree=function(i){var u=typeof i=="string",f=Array.prototype.slice.call(arguments,1),r=null;return i===!0&&!this.length?!1:(this.each(function(){var e=n.jstree.reference(this),o=u&&e?e[i]:null;return r=u&&o?o.apply(e,f):null,e||u||i!==t&&!n.isPlainObject(i)||n(this).data("jstree",new n.jstree.create(this,i)),(e&&!u||i===!0)&&(r=e||!1),r!==null&&r!==t?!1:void 0}),r!==null&&r!==t?r:this)};n.expr[":"].jstree=n.expr.createPseudo(function(){return function(i){return n(i).hasClass("jstree")&&n(i).data("jstree")!==t}});n.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:n.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1};n.jstree.core.prototype={plugin:function(t,i){var r=n.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(i,this)):this},init:function(t,i){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}};this.element=n(t).addClass("jstree jstree-"+this._id);this.settings=i;this.element.bind("destroyed",n.proxy(this.teardown,this));this._data.core.ready=!1;this._data.core.loaded=!1;this._data.core.rtl=this.element.css("direction")==="rtl";this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0);this.element.attr("tabindex")||this.element.attr("tabindex","0");this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'><\/i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'><\/i>"+this.get_string("Loading ...")+"<\/a><\/li><\/ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading");this._data.core.li_height=this.get_container_ul().children("li").first().height()||24;this.trigger("loading");this.load_node("#")},destroy:function(n){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk);this._wrk=null}catch(t){}n||this.element.empty();this.element.unbind("destroyed",this.teardown);this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});this.element=null},bind:function(){var t="",i=null;this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var n=window.getSelection();try{n.removeAllRanges();n.collapse()}catch(t){}}}).on("click.jstree",".jstree-ocl",n.proxy(function(n){this.toggle_node(n.target)},this)).on("click.jstree",".jstree-anchor",n.proxy(function(t){t.preventDefault();t.currentTarget!==document.activeElement&&n(t.currentTarget).focus();this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",n.proxy(function(t){if(t.target.tagName==="INPUT")return!0;var i=null;this._data.core.rtl&&(t.which===37?t.which=39:t.which===39&&(t.which=37));switch(t.which){case 32:t.ctrlKey&&(t.type="click",n(t.currentTarget).trigger(t));break;case 13:t.type="click";n(t.currentTarget).trigger(t);break;case 37:t.preventDefault();this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget),i&&i.id!=="#"&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault();i=this.get_prev_dom(t.currentTarget);i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault();this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(n){this.get_node(n,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],i&&n(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:t.preventDefault();i=this.get_next_dom(t.currentTarget);i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault();i=this._firstChild(this.get_container_ul()[0]);i&&n(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault();this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",n.proxy(function(t,i){if(i.status&&(i.node.id!=="#"||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){for(var u=[],r=0,f=this._data.core.selected.length;r<f;r++)u=u.concat(this._model.data[this._data.core.selected[r]].parents);for(u=n.vakata.array_unique(u),r=0,f=u.length;r<f;r++)this.open_node(u[r],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(n.proxy(function(){this.trigger("ready")},this),0)}},this)).on("keypress.jstree",n.proxy(function(r){if(r.target.tagName==="INPUT")return!0;i&&clearTimeout(i);i=setTimeout(function(){t=""},500);var e=String.fromCharCode(r.which).toLowerCase(),f=this.element.find(".jstree-anchor").filter(":visible"),o=f.index(document.activeElement)||0,u=!1;if(t+=e,t.length>1){if(f.slice(o).each(n.proxy(function(i,r){if(n(r).text().toLowerCase().indexOf(t)===0)return n(r).focus(),u=!0,!1},this)),u)return;if(f.slice(0,o).each(n.proxy(function(i,r){if(n(r).text().toLowerCase().indexOf(t)===0)return n(r).focus(),u=!0,!1},this)),u)return}if(new RegExp("^"+e+"+$").test(t)){if(f.slice(o+1).each(n.proxy(function(t,i){if(n(i).text().toLowerCase().charAt(0)===e)return n(i).focus(),u=!0,!1},this)),u)return;if(f.slice(0,o+1).each(n.proxy(function(t,i){if(n(i).text().toLowerCase().charAt(0)===e)return n(i).focus(),u=!0,!1},this)),u)return}},this)).on("init.jstree",n.proxy(function(){var n=this.settings.core.themes;this._data.core.themes.dots=n.dots;this._data.core.themes.stripes=n.stripes;this._data.core.themes.icons=n.icons;this.set_theme(n.name||"default",n.url);this.set_theme_variant(n.variant)},this)).on("loading.jstree",n.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",n.proxy(function(t){this._data.core.focused=null;n(t.currentTarget).filter(".jstree-hovered").mouseleave();this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",n.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id);this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave();n(t.currentTarget).mouseenter();this.element.attr("tabindex","-1")},this)).on("focus.jstree",n.proxy(function(){this._data.core.focused||this.get_node(this.element.attr("aria-activedescendant"),!0).find("> .jstree-anchor").focus()},this)).on("mouseenter.jstree",".jstree-anchor",n.proxy(function(n){this.hover_node(n.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",n.proxy(function(n){this.dehover_node(n.currentTarget)},this))},unbind:function(){this.element.off(".jstree");n(document).off(".jstree-"+this._id)},trigger:function(n,t){t||(t={});t.instance=this;this.element.triggerHandler(n.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return n.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(n){for(n=n?n.firstChild:null;n!==null&&n.nodeType!==1;)n=n.nextSibling;return n},_nextSibling:function(n){for(n=n?n.nextSibling:null;n!==null&&n.nodeType!==1;)n=n.nextSibling;return n},_previousSibling:function(n){for(n=n?n.previousSibling:null;n!==null&&n.nodeType!==1;)n=n.previousSibling;return n},get_node:function(t,i){t&&t.id&&(t=t.id);var r;try{if(this._model.data[t])t=this._model.data[t];else if(typeof t=="string"&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if(typeof t=="string"&&(r=n("#"+t.replace(n.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else if((r=n(t,this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else if((r=n(t,this.element)).length&&r.hasClass("jstree"))t=this._model.data["#"];else return!1;return i&&(t=t.id==="#"?this.element:n("#"+t.id.replace(n.jstree.idregex,"\\$&"),this.element)),t}catch(u){return!1}},get_path:function(n,t,i){if(n=n.parents?n:this.get_node(n),!n||n.id==="#"||!n.parents)return!1;var u,f,r=[];for(r.push(i?n.id:n.text),u=0,f=n.parents.length;u<f;u++)r.push(i?n.parents[u]:this.get_text(n.parents[u]));return r=r.reverse().slice(1),t?r.join(t):r},get_next_dom:function(t,i){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this._firstChild(this.get_container_ul()[0]);r&&r.offsetHeight===0;)r=this._nextSibling(r);return r?n(r):!1}if(!t||!t.length)return!1;if(i){r=t[0];do r=this._nextSibling(r);while(r&&r.offsetHeight===0);return r?n(r):!1}if(t.hasClass("jstree-open")){for(r=this._firstChild(t.children(".jstree-children")[0]);r&&r.offsetHeight===0;)r=this._nextSibling(r);if(r!==null)return n(r)}r=t[0];do r=this._nextSibling(r);while(r&&r.offsetHeight===0);return r!==null?n(r):t.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").first()},get_prev_dom:function(t,i){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this.get_container_ul()[0].lastChild;r&&r.offsetHeight===0;)r=this._previousSibling(r);return r?n(r):!1}if(!t||!t.length)return!1;if(i){r=t[0];do r=this._previousSibling(r);while(r&&r.offsetHeight===0);return r?n(r):!1}r=t[0];do r=this._previousSibling(r);while(r&&r.offsetHeight===0);if(r!==null){for(t=n(r);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return r=t[0].parentNode.parentNode,r&&r.className&&r.className.indexOf("jstree-node")!==-1?n(r):!1},get_parent:function(n){return(n=this.get_node(n),!n||n.id==="#")?!1:n.parent},get_children_dom:function(n){return(n=this.get_node(n,!0),n[0]===this.element[0])?this.get_container_ul().children(".jstree-node"):!n||!n.length?!1:n.children(".jstree-children").children(".jstree-node")},is_parent:function(n){return n=this.get_node(n),n&&(n.state.loaded===!1||n.children.length>0)},is_loaded:function(n){return n=this.get_node(n),n&&n.state.loaded},is_loading:function(n){return n=this.get_node(n),n&&n.state&&n.state.loading},is_open:function(n){return n=this.get_node(n),n&&n.state.opened},is_closed:function(n){return n=this.get_node(n),n&&this.is_parent(n)&&!n.state.opened},is_leaf:function(n){return!this.is_parent(n)},load_node:function(t,i){var r,f,u,e,o;if(n.isArray(t))return this._load_nodes(t.slice(),i),!0;if(t=this.get_node(t),!t)return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,r=0,f=t.children_d.length;r<f;r++){for(u=0,e=t.parents.length;u<e;u++)this._model.data[t.parents[u]].children_d=n.vakata.array_remove_item(this._model.data[t.parents[u]].children_d,t.children_d[r]);this._model.data[t.children_d[r]].state.selected&&(o=!0,this._data.core.selected=n.vakata.array_remove_item(this._data.core.selected,t.children_d[r]));delete this._model.data[t.children_d[r]]}t.children=[];t.children_d=[];o&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,n.proxy(function(n){t=this._model.data[t.id];t.state.loading=!1;t.state.loaded=n;var r=this.get_node(t,!0);t.state.loaded&&!t.children.length&&r&&r.length&&!r.hasClass("jstree-leaf")&&r.removeClass("jstree-closed jstree-open").addClass("jstree-leaf");r.removeClass("jstree-loading").attr("aria-busy",!1);this.trigger("load_node",{node:t,status:n});i&&i.call(this,t,n)},this)),!0},_load_nodes:function(n,t,i){for(var u=!0,o=function(){this._load_nodes(n,t,!0)},f=this._model.data,r=0,e=n.length;r<e;r++)!f[n[r]]||f[n[r]].state.loaded&&i||(this.is_loading(n[r])||this.load_node(n[r],o),u=!1);u&&t&&!t.done&&(t.call(this,n),t.done=!0)},load_all:function(n,t){if(n||(n="#"),n=this.get_node(n),!n)return!1;var u=[],f=this._model.data,r=f[n.id].children_d,i,e;for(n.state&&!n.state.loaded&&u.push(n.id),i=0,e=r.length;i<e;i++)f[r[i]]&&f[r[i]].state&&!f[r[i]].state.loaded&&u.push(r[i]);u.length?this._load_nodes(u,function(){this.load_all(n,t)}):(t&&t.call(this,n),this.trigger("load_all",{node:n}))},_load_node:function(t,i){var r=this.settings.core.data,u;return r?n.isFunction(r)?r.call(this,t,n.proxy(function(r){r===!1&&i.call(this,!1);this[typeof r=="string"?"_append_html_data":"_append_json_data"](t,typeof r=="string"?n(r):r,function(n){i.call(this,n)})},this)):typeof r=="object"?r.url?(r=n.extend(!0,{},r),n.isFunction(r.url)&&(r.url=r.url.call(this,t)),n.isFunction(r.data)&&(r.data=r.data.call(this,t)),n.ajax(r).done(n.proxy(function(r,u,f){var e=f.getResponseHeader("Content-Type");return e.indexOf("json")!==-1||typeof r=="object"?this._append_json_data(t,r,function(n){i.call(this,n)}):e.indexOf("html")!==-1||typeof r=="string"?this._append_html_data(t,n(r),function(n){i.call(this,n)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:f})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(n.proxy(function(n){i.call(this,!1);this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:n})};this.settings.core.error.call(this,this._data.core.last_error)},this))):(u=n.isArray(r)||n.isPlainObject(r)?JSON.parse(JSON.stringify(r)):r,t.id==="#"?this._append_json_data(t,u,function(n){i.call(this,n)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):typeof r=="string"?t.id==="#"?this._append_html_data(t,n(r),function(n){i.call(this,n)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):t.id==="#"?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(n){i.call(this,n)}):i.call(this,!1)},_node_changed:function(n){n=this.get_node(n);n&&this._model.changed.push(n.id)},_append_html_data:function(t,i,r){t=this.get_node(t);t.children=[];t.children_d=[];var a=i.is("ul")?i.children():i,o=t.id,c=[],u=[],s=this._model.data,f=s[o],v=this._data.core.selected.length,e,h,l;for(a.each(n.proxy(function(t,i){e=this._parse_model_from_html(n(i),o,f.parents.concat());e&&(c.push(e),u.push(e),s[e].children_d.length&&(u=u.concat(s[e].children_d)))},this)),f.children=c,f.children_d=u,h=0,l=f.parents.length;h<l;h++)s[f.parents[h]].children_d=s[f.parents[h]].children_d.concat(u);this.trigger("model",{nodes:u,parent:o});o!=="#"?(this._node_changed(o),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0));this._data.core.selected.length!==v&&this.trigger("changed",{action:"model",selected:this._data.core.selected});r.call(this,!0)},_append_json_data:function(t,i,r,u){t=this.get_node(t);t.children=[];t.children_d=[];i.d&&(i=i.d,typeof i=="string"&&(i=JSON.parse(i)));n.isArray(i)||(i=[i]);var f=null,e={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(n,t){n.data&&(n=n.data);var u=n.dat,c=n.par,y=[],o=[],l=[],h=n.df,k=n.t_id,v=n.t_cnt,r=n.m,f=r[c],p=n.sel,s,i,e,a,w=function(n,i,u){u=u?u.concat():[];i&&u.unshift(i);var c=n.id.toString(),f,a,o,s,e={id:c,text:n.text||"",icon:n.icon!==t?n.icon:!0,parent:i,parents:u,children:n.children||[],children_d:n.children_d||[],data:n.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in h)h.hasOwnProperty(f)&&(e.state[f]=h[f]);if(n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(e.icon=n.data.jstree.icon),n&&n.data&&(e.data=n.data,n.data.jstree))for(f in n.data.jstree)n.data.jstree.hasOwnProperty(f)&&(e.state[f]=n.data.jstree[f]);if(n&&typeof n.state=="object")for(f in n.state)n.state.hasOwnProperty(f)&&(e.state[f]=n.state[f]);if(n&&typeof n.li_attr=="object")for(f in n.li_attr)n.li_attr.hasOwnProperty(f)&&(e.li_attr[f]=n.li_attr[f]);if(e.li_attr.id||(e.li_attr.id=c),n&&typeof n.a_attr=="object")for(f in n.a_attr)n.a_attr.hasOwnProperty(f)&&(e.a_attr[f]=n.a_attr[f]);for(n&&n.children&&n.children===!0&&(e.state.loaded=!1,e.children=[],e.children_d=[]),r[e.id]=e,f=0,a=e.children.length;f<a;f++)o=w(r[e.children[f]],e.id,u),s=r[o],e.children_d.push(o),s.children_d.length&&(e.children_d=e.children_d.concat(s.children_d));return delete n.data,delete n.children,r[e.id].original=n,e.state.selected&&l.push(e.id),e.id},b=function(n,i,u){u=u?u.concat():[];i&&u.unshift(i);var o=!1,e,a,s,c,f;do o="j"+k+"_"+ ++v;while(r[o]);f={id:!1,text:typeof n=="string"?n:"",icon:typeof n=="object"&&n.icon!==t?n.icon:!0,parent:i,parents:u,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(e in h)h.hasOwnProperty(e)&&(f.state[e]=h[e]);if(n&&n.id&&(f.id=n.id.toString()),n&&n.text&&(f.text=n.text),n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(f.icon=n.data.jstree.icon),n&&n.data&&(f.data=n.data,n.data.jstree))for(e in n.data.jstree)n.data.jstree.hasOwnProperty(e)&&(f.state[e]=n.data.jstree[e]);if(n&&typeof n.state=="object")for(e in n.state)n.state.hasOwnProperty(e)&&(f.state[e]=n.state[e]);if(n&&typeof n.li_attr=="object")for(e in n.li_attr)n.li_attr.hasOwnProperty(e)&&(f.li_attr[e]=n.li_attr[e]);if(f.li_attr.id&&!f.id&&(f.id=f.li_attr.id.toString()),f.id||(f.id=o),f.li_attr.id||(f.li_attr.id=f.id),n&&typeof n.a_attr=="object")for(e in n.a_attr)n.a_attr.hasOwnProperty(e)&&(f.a_attr[e]=n.a_attr[e]);if(n&&n.children&&n.children.length){for(e=0,a=n.children.length;e<a;e++)s=b(n.children[e],f.id,u),c=r[s],f.children.push(s),c.children_d.length&&(f.children_d=f.children_d.concat(c.children_d));f.children_d=f.children_d.concat(f.children)}return n&&n.children&&n.children===!0&&(f.state.loaded=!1,f.children=[],f.children_d=[]),delete n.data,delete n.children,f.original=n,r[f.id]=f,f.state.selected&&l.push(f.id),f.id};if(u.length&&u[0].id!==t&&u[0].parent!==t){for(i=0,e=u.length;i<e;i++)u[i].children||(u[i].children=[]),r[u[i].id.toString()]=u[i];for(i=0,e=u.length;i<e;i++)r[u[i].parent.toString()].children.push(u[i].id.toString()),f.children_d.push(u[i].id.toString());for(i=0,e=f.children.length;i<e;i++)s=w(r[f.children[i]],c,f.parents.concat()),o.push(s),r[s].children_d.length&&(o=o.concat(r[s].children_d));for(i=0,e=f.parents.length;i<e;i++)r[f.parents[i]].children_d=r[f.parents[i]].children_d.concat(o);a={cnt:v,mod:r,sel:p,par:c,dpc:o,add:l}}else{for(i=0,e=u.length;i<e;i++)s=b(u[i],c,f.parents.concat()),s&&(y.push(s),o.push(s),r[s].children_d.length&&(o=o.concat(r[s].children_d)));for(f.children=y,f.children_d=o,i=0,e=f.parents.length;i<e;i++)r[f.parents[i]].children_d=r[f.parents[i]].children_d.concat(o);a={cnt:v,mod:r,sel:p,par:c,dpc:o,add:l}}if(typeof window=="undefined"||typeof document=="undefined")postMessage(a);else return a},s=function(t,i){if(this._cnt=t.cnt,this._model.data=t.mod,i){var u,o,h=t.add,f=t.sel,e=this._data.core.selected.slice(),s=this._model.data;if(f.length!==e.length||n.vakata.array_unique(f.concat(e)).length!==f.length){for(u=0,o=f.length;u<o;u++)n.inArray(f[u],h)===-1&&n.inArray(f[u],e)===-1&&(s[f[u]].state.selected=!1);for(u=0,o=e.length;u<o;u++)n.inArray(e[u],f)===-1&&(s[e[u]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add));this.trigger("model",{nodes:t.dpc,parent:t.par});t.par!=="#"?(this._node_changed(t.par),this.redraw()):this.redraw(!0);t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected});r.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{this._wrk===null&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"})));!this._data.core.working||u?(this._data.core.working=!0,f=new window.Worker(this._wrk),f.onmessage=n.proxy(function(n){s.call(this,n.data,!0);try{f.terminate();f=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),e.par?f.postMessage(e):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,r,!0])}catch(h){s.call(this,o(e),!1);this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else s.call(this,o(e),!1)},_parse_model_from_html:function(t,i,r){r=r?[].concat(r):[];i&&r.unshift(i);var o,s,c=this._model.data,u={id:!1,text:!1,icon:!0,parent:i,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},e,f,h;for(e in this._model.default_state)this._model.default_state.hasOwnProperty(e)&&(u.state[e]=this._model.default_state[e]);if(f=n.vakata.attributes(t,!0),n.each(f,function(t,i){if(i=n.trim(i),!i.length)return!0;u.li_attr[t]=i;t==="id"&&(u.id=i.toString())}),f=t.children("a").first(),f.length&&(f=n.vakata.attributes(f,!0),n.each(f,function(t,i){i=n.trim(i);i.length&&(u.a_attr[t]=i)})),f=t.children("a").first().length?t.children("a").first().clone():t.clone(),f.children("ins, i, ul").remove(),f=f.html(),f=n("<div />").html(f),u.text=this.settings.core.force_text?f.text():f.html(),f=t.data(),u.data=f?n.extend(!0,{},f):null,u.state.opened=t.hasClass("jstree-open"),u.state.selected=t.children("a").hasClass("jstree-clicked"),u.state.disabled=t.children("a").hasClass("jstree-disabled"),u.data&&u.data.jstree)for(e in u.data.jstree)u.data.jstree.hasOwnProperty(e)&&(u.state[e]=u.data.jstree[e]);f=t.children("a").children(".jstree-themeicon");f.length&&(u.icon=f.hasClass("jstree-themeicon-hidden")?!1:f.attr("rel"));u.state.icon&&(u.icon=u.state.icon);f=t.children("ul").children("li");do h="j"+this._id+"_"+ ++this._cnt;while(c[h]);return u.id=u.li_attr.id?u.li_attr.id.toString():h,f.length?(f.each(n.proxy(function(t,i){o=this._parse_model_from_html(n(i),u.id,r);s=this._model.data[o];u.children.push(o);s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d))},this)),u.children_d=u.children_d.concat(u.children)):t.hasClass("jstree-closed")&&(u.state.loaded=!1),u.li_attr["class"]&&(u.li_attr["class"]=u.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),u.a_attr["class"]&&(u.a_attr["class"]=u.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),c[u.id]=u,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_flat_json:function(n,i,r){r=r?r.concat():[];i&&r.unshift(i);var c=n.id.toString(),e=this._model.data,o=this._model.default_state,u,l,s,h,f={id:c,text:n.text||"",icon:n.icon!==t?n.icon:!0,parent:i,parents:r,children:n.children||[],children_d:n.children_d||[],data:n.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(u in o)o.hasOwnProperty(u)&&(f.state[u]=o[u]);if(n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(f.icon=n.data.jstree.icon),n&&n.data&&(f.data=n.data,n.data.jstree))for(u in n.data.jstree)n.data.jstree.hasOwnProperty(u)&&(f.state[u]=n.data.jstree[u]);if(n&&typeof n.state=="object")for(u in n.state)n.state.hasOwnProperty(u)&&(f.state[u]=n.state[u]);if(n&&typeof n.li_attr=="object")for(u in n.li_attr)n.li_attr.hasOwnProperty(u)&&(f.li_attr[u]=n.li_attr[u]);if(f.li_attr.id||(f.li_attr.id=c),n&&typeof n.a_attr=="object")for(u in n.a_attr)n.a_attr.hasOwnProperty(u)&&(f.a_attr[u]=n.a_attr[u]);for(n&&n.children&&n.children===!0&&(f.state.loaded=!1,f.children=[],f.children_d=[]),e[f.id]=f,u=0,l=f.children.length;u<l;u++)s=this._parse_model_from_flat_json(e[f.children[u]],f.id,r),h=e[s],f.children_d.push(s),h.children_d.length&&(f.children_d=f.children_d.concat(h.children_d));return delete n.data,delete n.children,e[f.id].original=n,f.state.selected&&this._data.core.selected.push(f.id),f.id},_parse_model_from_json:function(n,i,r){r=r?r.concat():[];i&&r.unshift(i);var e=!1,f,l,o,s,h=this._model.data,c=this._model.default_state,u;do e="j"+this._id+"_"+ ++this._cnt;while(h[e]);u={id:!1,text:typeof n=="string"?n:"",icon:typeof n=="object"&&n.icon!==t?n.icon:!0,parent:i,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in c)c.hasOwnProperty(f)&&(u.state[f]=c[f]);if(n&&n.id&&(u.id=n.id.toString()),n&&n.text&&(u.text=n.text),n&&n.data&&n.data.jstree&&n.data.jstree.icon&&(u.icon=n.data.jstree.icon),n&&n.data&&(u.data=n.data,n.data.jstree))for(f in n.data.jstree)n.data.jstree.hasOwnProperty(f)&&(u.state[f]=n.data.jstree[f]);if(n&&typeof n.state=="object")for(f in n.state)n.state.hasOwnProperty(f)&&(u.state[f]=n.state[f]);if(n&&typeof n.li_attr=="object")for(f in n.li_attr)n.li_attr.hasOwnProperty(f)&&(u.li_attr[f]=n.li_attr[f]);if(u.li_attr.id&&!u.id&&(u.id=u.li_attr.id.toString()),u.id||(u.id=e),u.li_attr.id||(u.li_attr.id=u.id),n&&typeof n.a_attr=="object")for(f in n.a_attr)n.a_attr.hasOwnProperty(f)&&(u.a_attr[f]=n.a_attr[f]);if(n&&n.children&&n.children.length){for(f=0,l=n.children.length;f<l;f++)o=this._parse_model_from_json(n.children[f],u.id,r),s=h[o],u.children.push(o),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));u.children_d=u.children_d.concat(u.children)}return n&&n.children&&n.children===!0&&(u.state.loaded=!1,u.children=[],u.children_d=[]),delete n.data,delete n.children,u.original=n,h[u.id]=u,u.state.selected&&this._data.core.selected.push(u.id),u.id},_redraw:function(){for(var r=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),t=document.createElement("UL"),n,f=this._data.core.focused,i=0,u=r.length;i<u;i++)n=this.redraw_node(r[i],!0,this._model.force_full_redraw),n&&this._model.force_full_redraw&&t.appendChild(n);this._model.force_full_redraw&&(t.className=this.get_container_ul()[0].className,t.setAttribute("role","group"),this.element.empty().append(t));f!==null&&(n=this.get_node(f,!0),n&&n.length&&n.children(".jstree-anchor")[0]!==document.activeElement?n.children(".jstree-anchor").focus():this._data.core.focused=null);this._model.force_full_redraw=!1;this._model.changed=[];this.trigger("redraw",{nodes:r})},redraw:function(n){n&&(this._model.force_full_redraw=!0);this._redraw()},redraw_node:function(t,i,r,u){var f=this.get_node(t),e=!1,y=!1,p=!1,o=!1,s=!1,a=!1,h="",w=document,v=this._model.data,b=!1,l=null;if(!f)return!1;if(f.id==="#")return this.redraw(!0);if(i=i||f.children.length===0,t=document.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(f.id[0])!==-1?"\\3"+f.id[0]+" "+f.id.substr(1).replace(n.jstree.idregex,"\\$&"):f.id.replace(n.jstree.idregex,"\\$&"))):document.getElementById(f.id),t)t=n(t),r||(e=t.parent().parent()[0],e===this.element[0]&&(e=null),y=t.index()),i||!f.children.length||t.children(".jstree-children").length||(i=!0),i||(p=t.children(".jstree-children")[0]),b=t.children(".jstree-anchor")[0]===document.activeElement,t.remove();else if(i=!0,!r){if(e=f.parent!=="#"?n("#"+f.parent.replace(n.jstree.idregex,"\\$&"),this.element)[0]:null,e!==null&&(!e||!v[f.parent].state.opened))return!1;y=n.inArray(f.id,e===null?v["#"].children:v[f.parent].children)}t=c.cloneNode(!0);h="jstree-node ";for(o in f.li_attr)if(f.li_attr.hasOwnProperty(o)){if(o==="id")continue;o!=="class"?t.setAttribute(o,f.li_attr[o]):h+=f.li_attr[o]}f.a_attr.id||(f.a_attr.id=f.id+"_anchor");t.setAttribute("aria-selected",!!f.state.selected);t.setAttribute("aria-level",f.parents.length);t.setAttribute("aria-labelledby",f.a_attr.id);f.state.disabled&&t.setAttribute("aria-disabled",!0);f.state.loaded&&!f.children.length?h+=" jstree-leaf":(h+=f.state.opened&&f.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",f.state.opened&&f.state.loaded));f.parent!==null&&v[f.parent].children[v[f.parent].children.length-1]===f.id&&(h+=" jstree-last");t.id=f.id;t.className=h;h=(f.state.selected?" jstree-clicked":"")+(f.state.disabled?" jstree-disabled":"");for(s in f.a_attr)if(f.a_attr.hasOwnProperty(s)){if(s==="href"&&f.a_attr[s]==="#")continue;s!=="class"?t.childNodes[1].setAttribute(s,f.a_attr[s]):h+=" "+f.a_attr[s]}if(h.length&&(t.childNodes[1].className="jstree-anchor "+h),(f.icon&&f.icon!==!0||f.icon===!1)&&(f.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":f.icon.indexOf("/")===-1&&f.icon.indexOf(".")===-1?t.childNodes[1].childNodes[0].className+=" "+f.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+f.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(w.createTextNode(f.text)):t.childNodes[1].innerHTML+=f.text,i&&f.children.length&&(f.state.opened||u)&&f.state.loaded){for(a=w.createElement("UL"),a.setAttribute("role","group"),a.className="jstree-children",o=0,s=f.children.length;o<s;o++)a.appendChild(this.redraw_node(f.children[o],i,!0));t.appendChild(a)}if(p&&t.appendChild(p),!r){for(e||(e=this.element[0]),o=0,s=e.childNodes.length;o<s;o++)if(e.childNodes[o]&&e.childNodes[o].className&&e.childNodes[o].className.indexOf("jstree-children")!==-1){l=e.childNodes[o];break}l||(l=w.createElement("UL"),l.setAttribute("role","group"),l.className="jstree-children",e.appendChild(l));e=l;y<e.childNodes.length?e.insertBefore(t,e.childNodes[y]):e.appendChild(t);b&&t.childNodes[1].focus()}return f.state.opened&&!f.state.loaded&&(f.state.opened=!1,setTimeout(n.proxy(function(){this.open_node(f.id,!1,0)},this),0)),t},open_node:function(i,r,u){var e,o,f,s;if(n.isArray(i)){for(i=i.slice(),e=0,o=i.length;e<o;e++)this.open_node(i[e],r,u);return!0}if(i=this.get_node(i),!i||i.id==="#")return!1;if(u=u===t?this.settings.core.animation:u,!this.is_closed(i))return r&&r.call(this,i,!1),!1;if(this.is_loaded(i))f=this.get_node(i,!0),s=this,f.length&&(i.children.length&&!this._firstChild(f.children(".jstree-children")[0])&&(this.redraw_node(i,!0,!1,!0),f=this.get_node(i,!0)),u?(this.trigger("before_open",{node:i}),f.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(u,function(){this.style.display="";s.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),f[0].className=f[0].className.replace("jstree-closed","jstree-open"),f[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,r&&r.call(this,i,!0),f.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),u&&f.length||this.trigger("after_open",{node:i});else{if(this.is_loading(i))return setTimeout(n.proxy(function(){this.open_node(i,r,u)},this),500);this.load_node(i,function(n,t){return t?this.open_node(n,r,u):r?r.call(this,n,!1):!1})}},_open_to:function(t){if(t=this.get_node(t),!t||t.id==="#")return!1;for(var u=t.parents,i=0,r=u.length;i<r;i+=1)i!=="#"&&this.open_node(u[i],!1,0);return n("#"+t.id.replace(n.jstree.idregex,"\\$&"),this.element)},close_node:function(i,r){var f,e,o,u;if(n.isArray(i)){for(i=i.slice(),f=0,e=i.length;f<e;f++)this.close_node(i[f],r);return!0}if((i=this.get_node(i),!i||i.id==="#")||this.is_closed(i))return!1;r=r===t?this.settings.core.animation:r;o=this;u=this.get_node(i,!0);u.length&&(r?u.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(r,function(){this.style.display="";u.children(".jstree-children").remove();o.trigger("after_close",{node:i})}):(u[0].className=u[0].className.replace("jstree-open","jstree-closed"),u.attr("aria-expanded",!1).children(".jstree-children").remove()));i.state.opened=!1;this.trigger("close_node",{node:i});r&&u.length||this.trigger("after_close",{node:i})},toggle_node:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(n,t,i){if(n||(n="#"),n=this.get_node(n),!n)return!1;var r=n.id==="#"?this.get_container_ul():this.get_node(n,!0),u,f,e;if(!r.length){for(u=0,f=n.children_d.length;u<f;u++)this.is_closed(this._model.data[n.children_d[u]])&&(this._model.data[n.children_d[u]].state.opened=!0);return this.trigger("open_all",{node:n})}i=i||r;e=this;r=this.is_closed(n)?r.find(".jstree-closed").addBack():r.find(".jstree-closed");r.each(function(){e.open_node(this,function(n,r){r&&this.is_parent(n)&&this.open_all(n,t,i)},t||0)});i.find(".jstree-closed").length===0&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(t,i){if(t||(t="#"),t=this.get_node(t),!t)return!1;var r=t.id==="#"?this.get_container_ul():this.get_node(t,!0),e=this,u,f;if(!r.length){for(u=0,f=t.children_d.length;u<f;u++)this._model.data[t.children_d[u]].state.opened=!1;return this.trigger("close_all",{node:t})}r=this.is_open(t)?r.find(".jstree-open").addBack():r.find(".jstree-open");n(r.get().reverse()).each(function(){e.close_node(this,i||0)});this.trigger("close_all",{node:t})},is_disabled:function(n){return n=this.get_node(n),n&&n.state&&n.state.disabled},enable_node:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.enable_node(t[i]);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;t.state.disabled=!1;this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1);this.trigger("enable_node",{node:t})},disable_node:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.disable_node(t[i]);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;t.state.disabled=!0;this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0);this.trigger("disable_node",{node:t})},activate_node:function(n,i){if(this.is_disabled(n))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(n)&&this.get_parent(n)===this._data.core.last_clicked.parent))if(i.shiftKey){for(var e=this.get_node(n).id,o=this._data.core.last_clicked.id,u=this.get_node(this._data.core.last_clicked.parent).children,f=!1,r=0,s=u.length;r<s;r+=1)u[r]===e&&(f=!f),u[r]===o&&(f=!f),f||u[r]===e||u[r]===o?this.select_node(u[r],!0,!1,i):this.deselect_node(u[r],!0,i);this.trigger("changed",{action:"select_node",node:this.get_node(n),selected:this._data.core.selected,event:i})}else this.is_selected(n)?this.deselect_node(n,!1,i):this.select_node(n,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(n)?this.deselect_node(n,!1,i):(this.deselect_all(!0),this.select_node(n,!1,!1,i),this._data.core.last_clicked=this.get_node(n));this.trigger("activate_node",{node:this.get_node(n)})},hover_node:function(n){if(n=this.get_node(n,!0),!n||!n.length||n.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t);n.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(n)});setTimeout(function(){i.attr("aria-activedescendant",n[0].id)},0)},dehover_node:function(n){if(n=this.get_node(n,!0),!n||!n.length||!n.children(".jstree-hovered").length)return!1;n.children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",{node:this.get_node(n)})},select_node:function(t,i,r,u){var f,e,o;if(n.isArray(t)){for(t=t.slice(),e=0,o=t.length;e<o;e++)this.select_node(t[e],i,r,u);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;f=this.get_node(t,!0);t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(f=this._open_to(t)),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:u}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:u}))},deselect_node:function(t,i,r){var u,e,f;if(n.isArray(t)){for(t=t.slice(),u=0,e=t.length;u<e;u++)this.deselect_node(t[u],i,r);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;f=this.get_node(t,!0);t.state.selected&&(t.state.selected=!1,this._data.core.selected=n.vakata.array_remove_item(this._data.core.selected,t.id),f.length&&f.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))},select_all:function(n){var r=this._data.core.selected.concat([]),t,i;for(this._data.core.selected=this._model.data["#"].children_d.concat(),t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0);this.trigger("select_all",{selected:this._data.core.selected});n||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:r})},deselect_all:function(n){for(var i=this._data.core.selected.concat([]),t=0,r=this._data.core.selected.length;t<r;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1);this.trigger("deselect_all",{selected:this._data.core.selected,node:i});n||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(n){return(n=this.get_node(n),!n||n.id==="#")?!1:n.state.selected},get_selected:function(t){return t?n.map(this._data.core.selected,n.proxy(function(n){return this.get_node(n)},this)):this._data.core.selected.slice()},get_top_selected:function(t){for(var r=this.get_selected(!0),u={},f,o,i=0,e=r.length;i<e;i++)u[r[i].id]=r[i];for(i=0,e=r.length;i<e;i++)for(f=0,o=r[i].children_d.length;f<o;f++)u[r[i].children_d[f]]&&delete u[r[i].children_d[f]];r=[];for(i in u)u.hasOwnProperty(i)&&r.push(i);return t?n.map(r,n.proxy(function(n){return this.get_node(n)},this)):r},get_bottom_selected:function(t){for(var r=this.get_selected(!0),u=[],i=0,f=r.length;i<f;i++)r[i].children.length||u.push(r[i].id);return t?n.map(u,n.proxy(function(n){return this.get_node(n)},this)):u},get_state:function(){var t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(var n in this._model.data)this._model.data.hasOwnProperty(n)&&n!=="#"&&(this._model.data[n].state.opened&&t.core.open.push(n),this._model.data[n].state.selected&&t.core.selected.push(n));return t},set_state:function(i,r){if(i){if(i.core){var f,e,u,o;if(i.core.open)return n.isArray(i.core.open)?(f=!0,e=!1,u=this,n.each(i.core.open.concat([]),function(t,o){e=u.get_node(o);e&&(u.is_loaded(o)?(u.is_closed(o)&&u.open_node(o,!1,0),i&&i.core&&i.core.open&&n.vakata.array_remove_item(i.core.open,o)):(u.is_loading(o)||u.open_node(o,n.proxy(function(t,u){!u&&i&&i.core&&i.core.open&&n.vakata.array_remove_item(i.core.open,t.id);this.set_state(i,r)},u),0),f=!1))}),f&&(delete i.core.open,this.set_state(i,r)),!1):(delete i.core.open,this.set_state(i,r),!1);if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,r),!1;if(i.core.selected)return o=this,this.deselect_all(),n.each(i.core.selected,function(n,t){o.select_node(t)}),delete i.core.selected,this.set_state(i,r),!1;if(n.isEmptyObject(i.core))return delete i.core,this.set_state(i,r),!1}return n.isEmptyObject(i)?(i=null,r&&r.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(t,i){this._data.core.state=i===!0?{}:this.get_state();i&&n.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state));this._cnt=0;this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'><\/i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'><\/i>"+this.get_string("Loading ...")+"<\/a><\/li><\/ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"));this.load_node("#",function(t,i){i&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(n.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")}));this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||t.id==="#")return!1;var i=[],r=[],u=this._data.core.selected.concat([]);r.push(t.id);t.state.opened===!0&&i.push(t.id);this.get_node(t,!0).find(".jstree-open").each(function(){i.push(this.id)});this._load_nodes(r,n.proxy(function(n){this.open_node(i,!1,0);this.select_node(this._data.core.selected);this.trigger("refresh_node",{node:t,nodes:n})},this))},set_id:function(t,i){if(t=this.get_node(t),!t||t.id==="#")return!1;var r,f,u=this._model.data;for(i=i.toString(),u[t.parent].children[n.inArray(t.id,u[t.parent].children)]=i,r=0,f=t.parents.length;r<f;r++)u[t.parents[r]].children_d[n.inArray(t.id,u[t.parents[r]].children_d)]=i;for(r=0,f=t.children.length;r<f;r++)u[t.children[r]].parent=i;for(r=0,f=t.children_d.length;r<f;r++)u[t.children_d[r]].parents[n.inArray(t.id,u[t.children_d[r]].parents)]=i;return r=n.inArray(t.id,this._data.core.selected),r!==-1&&(this._data.core.selected[r]=i),r=this.get_node(t.id,!0),r&&r.attr("id",i),delete u[t.id],t.id=i,u[i]=t,!0},get_text:function(n){return n=this.get_node(n),!n||n.id==="#"?!1:n.text},set_text:function(t,i){var r,u;if(n.isArray(t)){for(t=t.slice(),r=0,u=t.length;r<u;r++)this.set_text(t[r],i);return!0}return(t=this.get_node(t),!t||t.id==="#")?!1:(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0)},get_json:function(t,i,r){if(t=this.get_node(t||"#"),!t)return!1;i&&i.flat&&!r&&(r=[]);var u={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:n.extend(!0,{},t.li_attr),a_attr:n.extend(!0,{},t.a_attr),state:{},data:i&&i.no_data?!1:n.extend(!0,{},t.data)},f,e;if(i&&i.flat?u.parent=t.parent:u.children=[],!i||!i.no_state)for(f in t.state)t.state.hasOwnProperty(f)&&(u.state[f]=t.state[f]);if(i&&i.no_id&&(delete u.id,u.li_attr&&u.li_attr.id&&delete u.li_attr.id,u.a_attr&&u.a_attr.id&&delete u.a_attr.id),i&&i.flat&&t.id!=="#"&&r.push(u),!i||!i.no_children)for(f=0,e=t.children.length;f<e;f++)i&&i.flat?this.get_json(t.children[f],i,r):u.children.push(this.get_json(t.children[f],i));return i&&i.flat?r:t.id==="#"?u.children:u},create_node:function(i,r,u,f,e){if(i===null&&(i="#"),i=this.get_node(i),!i)return!1;if(u=u===t?"last":u,!u.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,r,u,f,!0)});r||(r={text:this.get_string("New node")});typeof r=="string"&&(r={text:r});r.text===t&&(r.text=this.get_string("New node"));var o,h,s,c;i.id==="#"&&(u==="before"&&(u="first"),u==="after"&&(u="last"));switch(u){case"before":o=this.get_node(i.parent);u=n.inArray(i.id,o.children);i=o;break;case"after":o=this.get_node(i.parent);u=n.inArray(i.id,o.children)+1;i=o;break;case"inside":case"first":u=0;break;case"last":u=i.children.length;break;default:u||(u=0)}if(u>i.children.length&&(u=i.children.length),r.id||(r.id=!0),!this.check("create_node",r,i,u))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(r.id===!0&&delete r.id,r=this._parse_model_from_json(r,i.id,i.parents.concat()),!r)return!1;for(o=this.get_node(r),h=[],h.push(r),h=h.concat(o.children_d),this.trigger("model",{nodes:h,parent:i.id}),i.children_d=i.children_d.concat(h),s=0,c=i.parents.length;s<c;s++)this._model.data[i.parents[s]].children_d=this._model.data[i.parents[s]].children_d.concat(h);for(r=o,o=[],s=0,c=i.children.length;s<c;s++)o[s>=u?s+1:s]=i.children[s];return o[u]=r.id,i.children=o,this.redraw_node(i,!0),f&&f.call(this,this.get_node(r)),this.trigger("create_node",{node:this.get_node(r),parent:i.id,position:u}),r.id},rename_node:function(t,i){var r,u,f;if(n.isArray(t)){for(t=t.slice(),r=0,u=t.length;r<u;r++)this.rename_node(t[r],i);return!0}return(t=this.get_node(t),!t||t.id==="#")?!1:(f=t.text,!this.check("rename_node",t,this.get_parent(t),i))?(this.settings.core.error.call(this,this._data.core.last_error),!1):(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:f}),!0)},delete_node:function(t){var o,c,u,i,f,e,l,r,s,h;if(n.isArray(t)){for(t=t.slice(),o=0,c=t.length;o<c;o++)this.delete_node(t[o]);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;if(u=this.get_node(t.parent),i=n.inArray(t.id,u.children),h=!1,!this.check("delete_node",t,u,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(i!==-1&&(u.children=n.vakata.array_remove(u.children,i)),f=t.children_d.concat([]),f.push(t.id),r=0,s=f.length;r<s;r++){for(e=0,l=t.parents.length;e<l;e++)i=n.inArray(f[r],this._model.data[t.parents[e]].children_d),i!==-1&&(this._model.data[t.parents[e]].children_d=n.vakata.array_remove(this._model.data[t.parents[e]].children_d,i));this._model.data[f[r]].state.selected&&(h=!0,i=n.inArray(f[r],this._data.core.selected),i!==-1&&(this._data.core.selected=n.vakata.array_remove(this._data.core.selected,i)))}for(this.trigger("delete_node",{node:t,parent:u.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:u.id}),r=0,s=f.length;r<s;r++)delete this._model.data[f[r]];return this.redraw_node(u,!0),!0},check:function(t,i,r,u,f){i=i&&i.id?i:this.get_node(i);r=r&&r.id?r:this.get_node(r);var e=t.match(/^move_node|copy_node|create_node$/i)?r:i,o=this.settings.core.check_callback;return(t==="move_node"||t==="copy_node")&&(!f||!f.is_multi)&&(i.id===r.id||n.inArray(i.id,r.children)===u||n.inArray(r.id,i.children_d)!==-1)?(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:u,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})},!1):(e&&e.data&&(e=e.data),e&&e.functions&&(e.functions[t]===!1||e.functions[t]===!0))?(e.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:u,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})}),e.functions[t]):o===!1||n.isFunction(o)&&o.call(this,t,i,r,u,f)===!1||o&&o[t]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:u,obj:i&&i.id?i.id:!1,par:r&&r.id?r.id:!1})},!1):!0},last_error:function(){return this._data.core.last_error},move_node:function(i,r,u,f,e,o){var w,k,v,d,h,c,g,a,l,s,y,b,nt,p;if(r=this.get_node(r),u=u===t?0:u,!r)return!1;if(!u.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(i,r,u,f,!0)});if(n.isArray(i)){for(i=i.slice(),w=0,k=i.length;w<k;w++)this.move_node(i[w],r,u,f,e,!0)&&(r=i[w],u="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||i.id==="#")return!1;if(v=(i.parent||"#").toString(),h=!u.toString().match(/^(before|after)$/)||r.id==="#"?r:this.get_node(r.parent),c=i.instance?i.instance:this._model.data[i.id]?this:n.jstree.reference(i.id),g=!c||!c._id||this._id!==c._id,d=c&&c._id&&v&&c._model.data[v]&&c._model.data[v].children?n.inArray(i.id,c._model.data[v].children):-1,g)return this.copy_node(i,r,u,f,e)?(c&&c.delete_node(i),!0):!1;r.id==="#"&&(u==="before"&&(u="first"),u==="after"&&(u="last"));switch(u){case"before":u=n.inArray(r.id,h.children);break;case"after":u=n.inArray(r.id,h.children)+1;break;case"inside":case"first":u=0;break;case"last":u=h.children.length;break;default:u||(u=0)}if(u>h.children.length&&(u=h.children.length),!this.check("move_node",i,h,u,{core:!0,is_multi:c&&c._id&&c._id!==this._id,is_foreign:!c||!c._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===h.id){for(a=h.children.concat(),l=n.inArray(i.id,a),l!==-1&&(a=n.vakata.array_remove(a,l),u>l&&u--),l=[],s=0,y=a.length;s<y;s++)l[s>=u?s+1:s]=a[s];l[u]=i.id;h.children=l;this._node_changed(h.id);this.redraw(h.id==="#")}else{for(l=i.children_d.concat(),l.push(i.id),s=0,y=i.parents.length;s<y;s++){for(a=[],p=c._model.data[i.parents[s]].children_d,b=0,nt=p.length;b<nt;b++)n.inArray(p[b],l)===-1&&a.push(p[b]);c._model.data[i.parents[s]].children_d=a}for(c._model.data[v].children=n.vakata.array_remove_item(c._model.data[v].children,i.id),s=0,y=h.parents.length;s<y;s++)this._model.data[h.parents[s]].children_d=this._model.data[h.parents[s]].children_d.concat(l);for(a=[],s=0,y=h.children.length;s<y;s++)a[s>=u?s+1:s]=h.children[s];for(a[u]=i.id,h.children=a,h.children_d.push(i.id),h.children_d=h.children_d.concat(i.children_d),i.parent=h.id,l=h.parents.concat(),l.unshift(h.id),p=i.parents.length,i.parents=l,l=l.concat(),s=0,y=i.children_d.length;s<y;s++)this._model.data[i.children_d[s]].parents=this._model.data[i.children_d[s]].parents.slice(0,p*-1),Array.prototype.push.apply(this._model.data[i.children_d[s]].parents,l);(v==="#"||h.id==="#")&&(this._model.force_full_redraw=!0);this._model.force_full_redraw||(this._node_changed(v),this._node_changed(h.id));o||this.redraw()}return f&&f.call(this,i,h,u),this.trigger("move_node",{node:i,parent:h.id,position:u,old_parent:v,old_position:d,is_multi:c&&c._id&&c._id!==this._id,is_foreign:!c||!c._id,old_instance:c,new_instance:this}),!0},copy_node:function(i,r,u,f,e,o){var p,b,a,c,l,w,v,y,s,h,k;if(r=this.get_node(r),u=u===t?0:u,!r)return!1;if(!u.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(i,r,u,f,!0)});if(n.isArray(i)){for(i=i.slice(),p=0,b=i.length;p<b;p++)c=this.copy_node(i[p],r,u,f,e,!0),c&&(r=c,u="after");return this.redraw(),!0}if(i=i&&i.id?i:this.get_node(i),!i||i.id==="#")return!1;y=(i.parent||"#").toString();s=!u.toString().match(/^(before|after)$/)||r.id==="#"?r:this.get_node(r.parent);h=i.instance?i.instance:this._model.data[i.id]?this:n.jstree.reference(i.id);k=!h||!h._id||this._id!==h._id;r.id==="#"&&(u==="before"&&(u="first"),u==="after"&&(u="last"));switch(u){case"before":u=n.inArray(r.id,s.children);break;case"after":u=n.inArray(r.id,s.children)+1;break;case"inside":case"first":u=0;break;case"last":u=s.children.length;break;default:u||(u=0)}if(u>s.children.length&&(u=s.children.length),!this.check("copy_node",i,s,u,{core:!0,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if((v=h?h.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!v)||(v.id===!0&&delete v.id,v=this._parse_model_from_json(v,s.id,s.parents.concat()),!v))return!1;for(c=this.get_node(v),i&&i.state&&i.state.loaded===!1&&(c.state.loaded=!1),a=[],a.push(v),a=a.concat(c.children_d),this.trigger("model",{nodes:a,parent:s.id}),l=0,w=s.parents.length;l<w;l++)this._model.data[s.parents[l]].children_d=this._model.data[s.parents[l]].children_d.concat(a);for(a=[],l=0,w=s.children.length;l<w;l++)a[l>=u?l+1:l]=s.children[l];return a[u]=c.id,s.children=a,s.children_d.push(c.id),s.children_d=s.children_d.concat(c.children_d),s.id==="#"&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(s.id),o||this.redraw(s.id==="#"),f&&f.call(this,c,s,u),this.trigger("copy_node",{node:c,original:i,parent:s.id,position:u,old_parent:y,old_position:h&&h._id&&y&&h._model.data[y]&&h._model.data[y].children?n.inArray(i.id,h._model.data[y].children):-1,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),c.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),n.isArray(t)||(t=[t]),!t.length)return!1;for(var e=[],i,f=0,s=t.length;f<s;f++)i=this.get_node(t[f]),i&&i.id&&i.id!=="#"&&e.push(i);if(!e.length)return!1;u=e;o=this;r="move_node";this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),n.isArray(t)||(t=[t]),!t.length)return!1;for(var e=[],i,f=0,s=t.length;f<s;f++)i=this.get_node(t[f]),i&&i.id&&i.id!=="#"&&e.push(i);if(!e.length)return!1;u=e;o=this;r="copy_node";this.trigger("copy",{node:t})},get_buffer:function(){return{mode:r,node:u,inst:o}},can_paste:function(){return r!==!1&&u!==!1},paste:function(n,t){if(n=this.get_node(n),!n||!r||!r.match(/^(copy_node|move_node)$/)||!u)return!1;this[r](u,n,t)&&this.trigger("paste",{parent:n.id,node:u,mode:r});u=!1;r=!1;o=!1},clear_buffer:function(){u=!1;r=!1;o=!1;this.trigger("clear_buffer")},edit:function(t,i){if(t=this.get_node(t),!t)return!1;if(this.settings.core.check_callback===!1)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;i=typeof i=="string"?i:t.text;this.set_text(t,"");t=this._open_to(t);var c=this._data.core.rtl,s=this.element.width(),r=t.children(".jstree-anchor"),u=n("<span>"),f=i,e=n("<div />",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),o=n("<input />",{value:f,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:n.proxy(function(){var o=u.children(".jstree-rename-input"),i=o.val();i===""&&(i=f);e.remove();u.replaceWith(r);u.remove();this.set_text(t,f);this.rename_node(t,n("<div><\/div>").text(i)[this.settings.core.force_text?"text":"html"]())===!1&&this.set_text(t,f)},this),keydown:function(n){var t=n.which;t===27&&(this.value=f);(t===27||t===13||t===37||t===38||t===39||t===40||t===32)&&n.stopImmediatePropagation();(t===27||t===13)&&(n.preventDefault(),this.blur())},click:function(n){n.stopImmediatePropagation()},mousedown:function(n){n.stopImmediatePropagation()},keyup:function(){o.width(Math.min(e.text("pW"+this.value).width(),s))},keypress:function(n){if(n.which===13)return!1}}),h={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""};u.attr("class",r.attr("class")).append(r.contents().clone()).append(o);r.replaceWith(u);e.css(h);o.css(h).width(Math.min(e.text("pW"+o[0].value).width(),s))[0].select()},set_theme:function(t,i){if(!t)return!1;if(i===!0){var r=this.settings.core.themes.dir;r||(r=n.jstree.path+"/themes");i=r+"/"+t+"/style.css"}i&&n.inArray(i,y)===-1&&(n("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),y.push(i));this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name);this._data.core.themes.name=t;this.element.addClass("jstree-"+t);this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive");this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(n){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant);this._data.core.themes.variant=n;n&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1;this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,i){var f,e,u,r;if(n.isArray(t)){for(t=t.slice(),f=0,e=t.length;f<e;f++)this.set_icon(t[f],i);return!0}return(t=this.get_node(t),!t||t.id==="#")?!1:(r=t.icon,t.icon=i,u=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?this.hide_icon(t):i===!0?(u.removeClass("jstree-themeicon-custom "+r).css("background","").removeAttr("rel"),r===!1&&this.show_icon(t)):i.indexOf("/")===-1&&i.indexOf(".")===-1?(u.removeClass(r).css("background",""),u.addClass(i+" jstree-themeicon-custom").attr("rel",i),r===!1&&this.show_icon(t)):(u.removeClass(r).css("background",""),u.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),r===!1&&this.show_icon(t)),!0)},get_icon:function(n){return n=this.get_node(n),!n||n.id==="#"?!1:n.icon},hide_icon:function(t){var i,r;if(n.isArray(t)){for(t=t.slice(),i=0,r=t.length;i<r;i++)this.hide_icon(t[i]);return!0}return(t=this.get_node(t),!t||t==="#")?!1:(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var i,u,r;if(n.isArray(t)){for(t=t.slice(),i=0,u=t.length;i<u;i++)this.show_icon(t[i]);return!0}return(t=this.get_node(t),!t||t==="#")?!1:(r=this.get_node(t,!0),t.icon=r.length?r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}};n.vakata={};n.vakata.attributes=function(t,i){t=n(t)[0];var r=i?{}:[];return t&&t.attributes&&n.each(t.attributes,function(t,u){n.inArray(u.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&u.value!==null&&n.trim(u.value)!==""&&(i?r[u.name]=u.value:r.push(u.name))}),r};n.vakata.array_unique=function(n){for(var r=[],i,t=0,u=n.length;t<u;t++){for(i=0;i<=t;i++)if(n[t]===n[i])break;i===t&&r.push(n[t])}return r};n.vakata.array_remove=function(n,t,i){var r=n.slice((i||t)+1||n.length);return n.length=t<0?n.length+t:t,n.push.apply(n,r),n};n.vakata.array_remove_item=function(t,i){var r=n.inArray(i,t);return r!==-1?n.vakata.array_remove(t,r):t};l=document.createElement("I");l.className="jstree-icon jstree-checkbox";l.setAttribute("role","presentation");n.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0};n.jstree.plugins.checkbox=function(t,i){this.bind=function(){i.bind.call(this);this._data.checkbox.uto=!1;this._data.checkbox.selected=[];this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined");this.element.on("init.jstree",n.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked");this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",n.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(this.settings.checkbox.cascade.indexOf("undetermined")!==-1)this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",n.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto);this._data.checkbox.uto=setTimeout(n.proxy(this._undetermined,this),50)},this));if(!this.settings.checkbox.tie_selection)this.element.on("model.jstree",n.proxy(function(n,t){for(var u=this._model.data,e=u[t.parent],r=t.nodes,i=0,f=r.length;i<f;i++)u[r[i]].state.checked=u[r[i]].original&&u[r[i]].original.state&&u[r[i]].original.state.checked,u[r[i]].state.checked&&this._data.checkbox.selected.push(r[i])},this));if(this.settings.checkbox.cascade.indexOf("up")!==-1||this.settings.checkbox.cascade.indexOf("down")!==-1)this.element.on("model.jstree",n.proxy(function(t,i){var e=this._model.data,u=e[i.parent],s=i.nodes,c=[],v,r,o,h,l,a,y=this.settings.checkbox.cascade,f=this.settings.checkbox.tie_selection;if(y.indexOf("down")!==-1)if(u.state[f?"selected":"checked"]){for(r=0,o=s.length;r<o;r++)e[s[r]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(s)}else for(r=0,o=s.length;r<o;r++)if(e[s[r]].state[f?"selected":"checked"]){for(h=0,l=e[s[r]].children_d.length;h<l;h++)e[e[s[r]].children_d[h]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(e[s[r]].children_d)}if(y.indexOf("up")!==-1){for(r=0,o=u.children_d.length;r<o;r++)e[u.children_d[r]].children.length||c.push(e[u.children_d[r]].parent);for(c=n.vakata.array_unique(c),h=0,l=c.length;h<l;h++)for(u=e[c[h]];u&&u.id!=="#";){for(v=0,r=0,o=u.children.length;r<o;r++)v+=e[u.children[r]].state[f?"selected":"checked"];if(v===o)u.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(u.id),a=this.get_node(u,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked");else break;u=this.get_node(u.parent)}}this._data[f?"core":"checkbox"].selected=n.vakata.array_unique(this._data[f?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",n.proxy(function(t,i){var o=i.node,l=this._model.data,u=this.get_node(o.parent),a=this.get_node(o,!0),f,s,h,r,c=this.settings.checkbox.cascade,e=this.settings.checkbox.tie_selection;if(c.indexOf("down")!==-1)for(this._data[e?"core":"checkbox"].selected=n.vakata.array_unique(this._data[e?"core":"checkbox"].selected.concat(o.children_d)),f=0,s=o.children_d.length;f<s;f++)r=l[o.children_d[f]],r.state[e?"selected":"checked"]=!0,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(c.indexOf("up")!==-1)while(u&&u.id!=="#"){for(h=0,f=0,s=u.children.length;f<s;f++)h+=l[u.children[f]].state[e?"selected":"checked"];if(h===s)u.state[e?"selected":"checked"]=!0,this._data[e?"core":"checkbox"].selected.push(u.id),r=this.get_node(u,!0),r&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(e?"jstree-clicked":"jstree-checked");else break;u=this.get_node(u.parent)}c.indexOf("down")!==-1&&a.length&&a.find(".jstree-anchor").addClass(e?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",n.proxy(function(){for(var i=this.get_node("#"),u=this._model.data,n,t=0,r=i.children_d.length;t<r;t++)n=u[i.children_d[t]],n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",n.proxy(function(t,i){var f=i.node,h=this.get_node(f,!0),u,o,r,s=this.settings.checkbox.cascade,e=this.settings.checkbox.tie_selection;if(f&&f.original&&f.original.state&&f.original.state.undetermined&&(f.original.state.undetermined=!1),s.indexOf("down")!==-1)for(u=0,o=f.children_d.length;u<o;u++)r=this._model.data[f.children_d[u]],r.state[e?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(s.indexOf("up")!==-1)for(u=0,o=f.parents.length;u<o;u++)r=this._model.data[f.parents[u]],r.state[e?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),r=this.get_node(f.parents[u],!0),r&&r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass(e?"jstree-clicked":"jstree-checked");for(r=[],u=0,o=this._data[e?"core":"checkbox"].selected.length;u<o;u++)(s.indexOf("down")===-1||n.inArray(this._data[e?"core":"checkbox"].selected[u],f.children_d)===-1)&&(s.indexOf("up")===-1||n.inArray(this._data[e?"core":"checkbox"].selected[u],f.parents)===-1)&&r.push(this._data[e?"core":"checkbox"].selected[u]);this._data[e?"core":"checkbox"].selected=n.vakata.array_unique(r);s.indexOf("down")!==-1&&h.length&&h.find(".jstree-anchor").removeClass(e?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this));if(this.settings.checkbox.cascade.indexOf("up")!==-1)this.element.on("delete_node.jstree",n.proxy(function(n,t){for(var i=this.get_node(t.parent),s=this._model.data,r,e,o,u,f=this.settings.checkbox.tie_selection;i&&i.id!=="#";){for(o=0,r=0,e=i.children.length;r<e;r++)o+=s[i.children[r]].state[f?"selected":"checked"];if(o===e)i.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(i.id),u=this.get_node(i,!0),u&&u.length&&u.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked");else break;i=this.get_node(i.parent)}},this)).on("move_node.jstree",n.proxy(function(t,i){var c=i.is_multi,l=i.old_parent,a=this.get_node(i.parent),h=this._model.data,r,o,e,s,f,u=this.settings.checkbox.tie_selection;if(!c)for(r=this.get_node(l);r&&r.id!=="#";){for(o=0,e=0,s=r.children.length;e<s;e++)o+=h[r.children[e]].state[u?"selected":"checked"];if(o===s)r.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(r.id),f=this.get_node(r,!0),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked");else break;r=this.get_node(r.parent)}for(r=a;r&&r.id!=="#";){for(o=0,e=0,s=r.children.length;e<s;e++)o+=h[r.children[e]].state[u?"selected":"checked"];if(o===s)r.state[u?"selected":"checked"]||(r.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(r.id),f=this.get_node(r,!0),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"));else if(r.state[u?"selected":"checked"])r.state[u?"selected":"checked"]=!1,this._data[u?"core":"checkbox"].selected=n.vakata.array_remove_item(this._data[u?"core":"checkbox"].selected,r.id),f=this.get_node(r,!0),f&&f.length&&f.attr("aria-selected",!1).children(".jstree-anchor").removeClass(u?"jstree-clicked":"jstree-checked");else break;r=this.get_node(r.parent)}},this))};this._undetermined=function(){for(var f=this._model.data,e=this.settings.checkbox.tie_selection,r=this._data[e?"core":"checkbox"].selected,i=[],o=this,t=0,u=r.length;t<u;t++)f[r[t]]&&f[r[t]].parents&&(i=i.concat(f[r[t]].parents));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var n=o.get_node(this),r;if(n.state.loaded)for(t=0,u=n.children_d.length;t<u;t++)r=f[n.children_d[t]],!r.state.loaded&&r.original&&r.original.state&&r.original.state.undetermined&&r.original.state.undetermined===!0&&(i.push(r.id),i=i.concat(r.parents));else n.original&&n.original.state&&n.original.state.undetermined&&n.original.state.undetermined===!0&&(i.push(n.id),i=i.concat(n.parents))}),i=n.vakata.array_unique(i),i=n.vakata.array_remove_item(i,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),t=0,u=i.length;t<u;t++)f[i[t]].state[e?"selected":"checked"]||(r=this.get_node(i[t],!0),r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))};this.redraw_node=function(t,r,u){if(t=i.redraw_node.apply(this,arguments),t){for(var e=null,f=0,o=t.childNodes.length;f<o;f++)if(t.childNodes[f]&&t.childNodes[f].className&&t.childNodes[f].className.indexOf("jstree-anchor")!==-1){e=t.childNodes[f];break}e&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(e.className+=" jstree-checked"),e.insertBefore(l.cloneNode(!1),e.childNodes[0]))}return u||this.settings.checkbox.cascade.indexOf("undetermined")===-1||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(n.proxy(this._undetermined,this),50)),t};this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0;this.get_container_ul().removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1;this.get_container_ul().addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()};this.is_undetermined=function(t){t=this.get_node(t);var r=this.settings.checkbox.cascade,i,u,f=this.settings.checkbox.tie_selection,o=this._data[f?"core":"checkbox"].selected,e=this._model.data;if(!t||t.state[f?"selected":"checked"]===!0||r.indexOf("undetermined")===-1||r.indexOf("down")===-1&&r.indexOf("up")===-1)return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(i=0,u=t.children_d.length;i<u;i++)if(n.inArray(t.children_d[i],o)!==-1||!e[t.children_d[i]].state.loaded&&e[t.children_d[i]].original.state.undetermined)return!0;return!1};this.activate_node=function(t,r){if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||n(r.target).hasClass("jstree-checkbox"))&&(r.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!n(r.target).hasClass("jstree-checkbox"))return i.activate_node.call(this,t,r);this.is_checked(t)?this.uncheck_node(t,r):this.check_node(t,r);this.trigger("activate_node",{node:this.get_node(t)})};this.check_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,i);var r,u,f;if(n.isArray(t)){for(t=t.slice(),u=0,f=t.length;u<f;u++)this.check_node(t[u],i);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;r=this.get_node(t,!0);t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:i}))};this.uncheck_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,i);var r,f,u;if(n.isArray(t)){for(t=t.slice(),r=0,f=t.length;r<f;r++)this.uncheck_node(t[r],i);return!0}if(t=this.get_node(t),!t||t.id==="#")return!1;u=this.get_node(t,!0);t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=n.vakata.array_remove_item(this._data.checkbox.selected,t.id),u.length&&u.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:i}))};this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var i=this._data.checkbox.selected.concat([]),n,t;for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),n=0,t=this._data.checkbox.selected.length;n<t;n++)this._model.data[this._data.checkbox.selected[n]]&&(this._model.data[this._data.checkbox.selected[n]].state.checked=!0);this.redraw(!0);this.trigger("check_all",{selected:this._data.checkbox.selected})};this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();for(var i=this._data.checkbox.selected.concat([]),n=0,t=this._data.checkbox.selected.length;n<t;n++)this._model.data[this._data.checkbox.selected[n]]&&(this._model.data[this._data.checkbox.selected[n]].state.checked=!1);this._data.checkbox.selected=[];this.element.find(".jstree-checked").removeClass("jstree-checked");this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:i})};this.is_checked=function(n){return this.settings.checkbox.tie_selection?this.is_selected(n):(n=this.get_node(n),!n||n.id==="#")?!1:n.state.checked};this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?n.map(this._data.checkbox.selected,n.proxy(function(n){return this.get_node(n)},this)):this._data.checkbox.selected};this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);for(var r=this.get_checked(!0),u={},f,o,i=0,e=r.length;i<e;i++)u[r[i].id]=r[i];for(i=0,e=r.length;i<e;i++)for(f=0,o=r[i].children_d.length;f<o;f++)u[r[i].children_d[f]]&&delete u[r[i].children_d[f]];r=[];for(i in u)u.hasOwnProperty(i)&&r.push(i);return t?n.map(r,n.proxy(function(n){return this.get_node(n)},this)):r};this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);for(var r=this.get_checked(!0),u=[],i=0,f=r.length;i<f;i++)r[i].children.length||u.push(r[i].id);return t?n.map(u,n.proxy(function(n){return this.get_node(n)},this)):u};this.load_node=function(t){var u,f,e,r;if(!n.isArray(t)&&!this.settings.checkbox.tie_selection&&(r=this.get_node(t),r&&r.state.loaded))for(u=0,f=r.children_d.length;u<f;u++)this._model.data[r.children_d[u]].state.checked&&(e=!0,this._data.checkbox.selected=n.vakata.array_remove_item(this._data.checkbox.selected,r.children_d[u]));return i.load_node.apply(this,arguments)};this.get_state=function(){var n=i.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?n:(n.checkbox=this._data.checkbox.selected.slice(),n)};this.set_state=function(t){var r=i.set_state.apply(this,arguments),u;return r&&t.checkbox?(this.settings.checkbox.tie_selection||(this.uncheck_all(),u=this,n.each(t.checkbox,function(n,t){u.check_node(t)})),delete t.checkbox,!1):r}};f=null;n.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.create_node(r,{},"last",function(n){setTimeout(function(){i.edit(n)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.is_selected(r)?i.delete_node(i.get_selected()):i.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.is_selected(r)?i.cut(i.get_selected()):i.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.is_selected(r)?i.copy(i.get_selected()):i.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!n.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var i=n.jstree.reference(t.reference),r=i.get_node(t.reference);i.paste(r)}}}}}}};n.jstree.plugins.contextmenu=function(i,r){this.bind=function(){r.bind.call(this);var t=0;this.element.on("contextmenu.jstree",".jstree-anchor",n.proxy(function(n,i){n.preventDefault();t=n.ctrlKey?+new Date:0;(i||f)&&(t=+new Date+1e4);f&&clearTimeout(f);this.is_loading(n.currentTarget)||this.show_contextmenu(n.currentTarget,n.pageX,n.pageY,n)},this)).on("click.jstree",".jstree-anchor",n.proxy(function(){this._data.contextmenu.visible&&(!t||+new Date-t>250)&&n.vakata.context.hide();t=0},this)).on("touchstart.jstree",".jstree-anchor",function(t){t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(p=t.pageX,w=t.pageY,f=setTimeout(function(){n(t.currentTarget).trigger("contextmenu",!0)},750))});n(document).on("context_hide.vakata.jstree",n.proxy(function(){this._data.contextmenu.visible=!1},this))};this.teardown=function(){this._data.contextmenu.visible&&n.vakata.context.hide();r.teardown.call(this)};this.show_contextmenu=function(i,r,u,f){if(i=this.get_node(i),!i||i.id==="#")return!1;var s=this.settings.contextmenu,h=this.get_node(i,!0),c=h.children(".jstree-anchor"),o=!1,e=!1;(s.show_at_node||r===t||u===t)&&(o=c.offset(),r=o.left,u=o.top+this._data.core.li_height);this.settings.contextmenu.select_node&&!this.is_selected(i)&&this.activate_node(i,f);e=s.items;n.isFunction(e)&&(e=e.call(this,i,n.proxy(function(n){this._show_contextmenu(i,r,u,n)},this)));n.isPlainObject(e)&&this._show_contextmenu(i,r,u,e)};this._show_contextmenu=function(t,i,r,u){var f=this.get_node(t,!0),e=f.children(".jstree-anchor");n(document).one("context_show.vakata.jstree",n.proxy(function(t,i){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";n(i.element).addClass(r)},this));this._data.contextmenu.visible=!0;n.vakata.context.show(e,{x:i,y:r},u);this.trigger("show_contextmenu",{node:t,x:i,y:r})}};n(function(){n(document).on("touchmove.vakata.jstree",function(n){f&&n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(Math.abs(p-n.pageX)>50||Math.abs(w-n.pageY)>50)&&clearTimeout(f)}).on("touchend.vakata.jstree",function(){f&&clearTimeout(f)})}),function(n){var i=!1,t={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};n.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(i){n(document).triggerHandler("context_"+i+".vakata",{reference:t.reference,element:t.element,position:{x:t.position_x,y:t.position_y}})},_execute:function(i){return i=t.items[i],i&&(!i._disabled||n.isFunction(i._disabled)&&!i._disabled({item:i,reference:t.reference,element:t.element}))&&i.action?i.action.call(null,{item:i,reference:t.reference,element:t.element,position:{x:t.position_x,y:t.position_y}}):!1},_parse:function(i,r){if(!i)return!1;r||(t.html="",t.items=[]);var u="",f=!1,e;return r&&(u+="<ul>"),n.each(i,function(i,r){if(!r)return!0;t.items.push(r);!f&&r.separator_before&&(u+="<li class='vakata-context-separator'><a href='#' "+(n.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<\/a><\/li>");f=!1;u+="<li class='"+(r._class||"")+(r._disabled===!0||n.isFunction(r._disabled)&&r._disabled({item:r,reference:t.reference,element:t.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">";u+="<a href='#' rel='"+(t.items.length-1)+"'>";n.vakata.context.settings.icons&&(u+="<i ",r.icon&&(u+=r.icon.indexOf("/")!==-1||r.icon.indexOf(".")!==-1?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),u+="><\/i><span class='vakata-contextmenu-sep'>&#160;<\/span>");u+=(n.isFunction(r.label)?r.label({item:i,reference:t.reference,element:t.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"<\/span>":"")+"<\/a>";r.submenu&&(e=n.vakata.context._parse(r.submenu,!0),e&&(u+=e));u+="<\/li>";r.separator_after&&(u+="<li class='vakata-context-separator'><a href='#' "+(n.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;<\/a><\/li>",f=!0)}),u=u.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(u+="<\/ul>"),r||(t.html=u,n.vakata.context._trigger("parse")),u.length>10?u:!1},_show_submenu:function(t){if(t=n(t),t.length&&t.children("ul").length){var r=t.children("ul"),u=t.offset().left+t.outerWidth(),e=t.offset().top,f=r.width(),o=r.height(),s=n(window).width()+n(window).scrollLeft(),h=n(window).height()+n(window).scrollTop();i?t[u-(f+10+t.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):t[u+f+10>s?"addClass":"removeClass"]("vakata-context-right");e+o+10>h&&r.css("bottom","-1px");r.show()}},show:function(r,u,f){var h,o,e,s,c,l,a,v;t.element&&t.element.length&&t.element.width("");switch(!0){case!u&&!r:return!1;case!!u&&!!r:t.reference=r;t.position_x=u.x;t.position_y=u.y;break;case!u&&!!r:t.reference=r;h=r.offset();t.position_x=h.left+r.outerHeight();t.position_y=h.top;break;case!!u&&!r:t.position_x=u.x;t.position_y=u.y}!r||f||!n(r).data("vakata_contextmenu")||(f=n(r).data("vakata_contextmenu"));n.vakata.context._parse(f)&&t.element.html(t.html);t.items.length&&(t.element.appendTo("body"),o=t.element,e=t.position_x,s=t.position_y,c=o.width(),l=o.height(),a=n(window).width()+n(window).scrollLeft(),v=n(window).height()+n(window).scrollTop(),i&&(e-=o.outerWidth()-n(r).outerWidth(),e<n(window).scrollLeft()+20&&(e=n(window).scrollLeft()+20)),e+c+20>a&&(e=a-(c+20)),s+l+20>v&&(s=v-(l+20)),t.element.css({left:e,top:s}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),t.is_visible=!0,n.vakata.context._trigger("show"))},hide:function(){t.is_visible&&(t.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),t.is_visible=!1,n.vakata.context._trigger("hide"))}};n(function(){i=n("body").css("direction")==="rtl";var r=!1;t.element=n("<ul class='vakata-context'><\/ul>");t.element.on("mouseenter","li",function(i){(i.stopImmediatePropagation(),n.contains(this,i.relatedTarget))||(r&&clearTimeout(r),t.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),n(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),n.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){n.contains(this,t.relatedTarget)||n(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(){n(this).find(".vakata-context-hover").removeClass("vakata-context-hover");n.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(){return function(){n.vakata.context.hide()}}(this),n.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault();n(this).blur().parent().hasClass("vakata-context-disabled")||n.vakata.context._execute(n(this).attr("rel"))===!1||n.vakata.context.hide()}).on("keydown","a",function(i){var r=null;switch(i.which){case 13:case 32:i.type="mouseup";i.preventDefault();n(i.currentTarget).trigger(i);break;case 37:t.is_visible&&(t.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 38:t.is_visible&&(r=t.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),r.length||(r=t.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 39:t.is_visible&&(t.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 40:t.is_visible&&(r=t.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),r.length||(r=t.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),i.stopImmediatePropagation(),i.preventDefault());break;case 27:n.vakata.context.hide();i.preventDefault()}}).on("keydown",function(n){n.preventDefault();var i=t.element.find(".vakata-contextmenu-shortcut-"+n.which).parent();i.parent().not(".vakata-context-disabled")&&i.click()});n(document).on("mousedown.vakata.jstree",function(i){t.is_visible&&!n.contains(t.element[0],i.target)&&n.vakata.context.hide()}).on("context_show.vakata.jstree",function(){t.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");i&&t.element.addClass("vakata-context-rtl").css("direction","rtl");t.element.find("ul").hide().end()})})}(n);n.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0};n.jstree.plugins.dnd=function(t,i){this.bind=function(){i.bind.call(this);this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",n.proxy(function(t){var i=this.get_node(t.target),r=this.is_selected(i)?this.get_selected().length:1,u=r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget);return this.settings.core.force_text&&(u=n("<div />").text(u).html()),i&&i.id&&i.id!=="#"&&(t.which===1||t.type==="touchstart")&&(this.settings.dnd.is_draggable===!0||n.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,r>1?this.get_selected(!0):[i]))?(this.element.trigger("mousedown.jstree"),n.vakata.dnd.start(t,{jstree:!0,origin:this,obj:this.get_node(i,!0),nodes:r>1?this.get_selected():[i.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"><\/i>'+u+'<ins class="jstree-copy" style="display:none;">+<\/ins><\/div>')):void 0},this))}};n(function(){var t=!1,r=!1,u=!1,i=n('<div id="jstree-marker">&#160;<\/div>').hide();n(document).on("dnd_start.vakata.jstree",function(n,r){(t=!1,r&&r.data&&r.data.jstree)&&i.appendTo("body")}).on("dnd_move.vakata.jstree",function(f,e){if((u&&clearTimeout(u),e&&e.data&&e.data.jstree)&&(!e.event.target.id||e.event.target.id!=="jstree-marker")){var o=n.jstree.reference(e.event.target),s=!1,l=!1,b=!1,k,d,a,v,y,g,c,h,nt,it,tt,rt,p,w;if(o&&o._data&&o._data.dnd)if(i.attr("class","jstree-"+o.get_theme()+(o.settings.core.themes.responsive?" jstree-dnd-responsive":"")),e.helper.children().attr("class","jstree-"+o.get_theme()+" jstree-"+o.get_theme()+"-"+o.get_theme_variant()+" "+(o.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[e.data.origin&&(e.data.origin.settings.dnd.always_copy||e.data.origin.settings.dnd.copy&&(e.event.metaKey||e.event.ctrlKey))?"show":"hide"](),(e.event.target===o.element[0]||e.event.target===o.get_container_ul()[0])&&o.get_container_ul().children().length===0){for(c=!0,h=0,nt=e.data.nodes.length;h<nt;h++)if(c=c&&o.check(e.data.origin&&(e.data.origin.settings.dnd.always_copy||e.data.origin.settings.dnd.copy&&(e.event.metaKey||e.event.ctrlKey))?"copy_node":"move_node",e.data.origin&&e.data.origin!==o?e.data.origin.get_node(e.data.nodes[h]):e.data.nodes[h],"#","last",{dnd:!0,ref:o.get_node("#"),pos:"i",is_multi:e.data.origin&&e.data.origin!==o,is_foreign:!e.data.origin}),!c)break;if(c){t={ins:o,par:"#",pos:"last"};i.hide();e.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");return}}else if(s=n(e.event.target).closest(".jstree-anchor"),s&&s.length&&s.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(l=s.offset(),b=e.event.pageY-l.top,a=s.height(),g=b<a/3?["b","i","a"]:b>a-a/3?["a","i","b"]:b>a/2?["i","a","b"]:["i","b","a"],n.each(g,function(f,b){switch(b){case"b":k=l.left-6;d=l.top;v=o.get_parent(s);y=s.parent().index();break;case"i":p=o.settings.dnd.inside_pos;w=o.get_node(s.parent());k=l.left-2;d=l.top+a/2+1;v=w.id;y=p==="first"?0:p==="last"?w.children.length:Math.min(p,w.children.length);break;case"a":k=l.left-6;d=l.top+a;v=o.get_parent(s);y=s.parent().index()+1}for(c=!0,h=0,nt=e.data.nodes.length;h<nt;h++)if(it=e.data.origin&&(e.data.origin.settings.dnd.always_copy||e.data.origin.settings.dnd.copy&&(e.event.metaKey||e.event.ctrlKey))?"copy_node":"move_node",tt=y,it==="move_node"&&b==="a"&&e.data.origin&&e.data.origin===o&&v===o.get_parent(e.data.nodes[h])&&(rt=o.get_node(v),tt>n.inArray(e.data.nodes[h],rt.children)&&(tt-=1)),c=c&&(o&&o.settings&&o.settings.dnd&&o.settings.dnd.check_while_dragging===!1||o.check(it,e.data.origin&&e.data.origin!==o?e.data.origin.get_node(e.data.nodes[h]):e.data.nodes[h],v,tt,{dnd:!0,ref:o.get_node(s.parent()),pos:b,is_multi:e.data.origin&&e.data.origin!==o,is_foreign:!e.data.origin})),!c){o&&o.last_error&&(r=o.last_error());break}return b==="i"&&s.parent().is(".jstree-closed")&&o.settings.dnd.open_timeout&&(u=setTimeout(function(n,t){return function(){n.open_node(t)}}(o,s),o.settings.dnd.open_timeout)),c?(t={ins:o,par:v,pos:b==="i"&&p==="last"&&y===0&&!o.is_loaded(w)?"last":y},i.css({left:k+"px",top:d+"px"}).show(),e.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),r={},g=!0,!1):void 0}),g===!0))return;t=!1;e.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");i.hide()}}).on("dnd_scroll.vakata.jstree",function(n,r){r&&r.data&&r.data.jstree&&(i.hide(),t=!1,r.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(f,e){if(u&&clearTimeout(u),e&&e.data&&e.data.jstree){i.hide().detach();var o,h,s=[];if(t){for(o=0,h=e.data.nodes.length;o<h;o++)s[o]=e.data.origin?e.data.origin.get_node(e.data.nodes[o]):e.data.nodes[o],e.data.origin&&(s[o].instance=e.data.origin);for(t.ins[e.data.origin&&(e.data.origin.settings.dnd.always_copy||e.data.origin.settings.dnd.copy&&(e.event.metaKey||e.event.ctrlKey))?"copy_node":"move_node"](s,t.par,t.pos),o=0,h=s.length;o<h;o++)s[o].instance&&(s[o].instance=null)}else o=n(e.event.target).closest(".jstree"),o.length&&r&&r.error&&r.error==="check"&&(o=o.jstree(!0),o&&o.settings.core.error.call(this,r))}}).on("keyup.jstree keydown.jstree",function(t,i){i=n.vakata.dnd._get();i&&i.data&&i.data.jstree&&i.helper.find(".jstree-copy").first()[i.data.origin&&(i.data.origin.settings.dnd.always_copy||i.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"]()})}),function(n){var t={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};n.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(t,i){var r=n.vakata.dnd._get();r.event=i;n(document).triggerHandler("dnd_"+t+".vakata",r)},_get:function(){return{data:t.data,element:t.element,helper:t.helper}},_clean:function(){t.helper&&t.helper.remove();t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1);t={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};n(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",n.vakata.dnd.drag);n(document).off("mouseup.vakata.jstree touchend.vakata.jstree",n.vakata.dnd.stop)},_scroll:function(i){if(!t.scroll_e||!t.scroll_l&&!t.scroll_t)return t.scroll_i&&(clearInterval(t.scroll_i),t.scroll_i=!1),!1;if(!t.scroll_i)return t.scroll_i=setInterval(n.vakata.dnd._scroll,100),!1;if(i===!0)return!1;var r=t.scroll_e.scrollTop(),u=t.scroll_e.scrollLeft();t.scroll_e.scrollTop(r+t.scroll_t*n.vakata.dnd.settings.scroll_speed);t.scroll_e.scrollLeft(u+t.scroll_l*n.vakata.dnd.settings.scroll_speed);(r!==t.scroll_e.scrollTop()||u!==t.scroll_e.scrollLeft())&&n.vakata.dnd._trigger("scroll",t.scroll_e)},start:function(i,r,u){i.type==="touchstart"&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=document.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset));t.is_drag&&n.vakata.dnd.stop({});try{i.currentTarget.unselectable="on";i.currentTarget.onselectstart=function(){return!1};i.currentTarget.style&&(i.currentTarget.style.MozUserSelect="none")}catch(f){}t.init_x=i.pageX;t.init_y=i.pageY;t.data=r;t.is_down=!0;t.element=i.currentTarget;t.target=i.target;t.is_touch=i.type==="touchstart";u!==!1&&(t.helper=n("<div id='vakata-dnd'><\/div>").html(u).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"}));n(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",n.vakata.dnd.drag);n(document).on("mouseup.vakata.jstree touchend.vakata.jstree",n.vakata.dnd.stop);return!1},drag:function(i){if(i.type==="touchmove"&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=document.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_down){if(!t.is_drag)if(Math.abs(i.pageX-t.init_x)>(t.is_touch?n.vakata.dnd.settings.threshold_touch:n.vakata.dnd.settings.threshold)||Math.abs(i.pageY-t.init_y)>(t.is_touch?n.vakata.dnd.settings.threshold_touch:n.vakata.dnd.settings.threshold))t.helper&&(t.helper.appendTo("body"),t.helper_w=t.helper.outerWidth()),t.is_drag=!0,n.vakata.dnd._trigger("start",i);else return;var r=!1,c=!1,u=!1,e=!1,f=!1,o=!1,l=!1,a=!1,s=!1,h=!1;return t.scroll_t=0,t.scroll_l=0,t.scroll_e=!1,n(n(i.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(n(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var u=n(this),r=u.offset();return this.scrollHeight>this.offsetHeight&&(r.top+u.height()-i.pageY<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),i.pageY-r.top<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(r.left+u.width()-i.pageX<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),i.pageX-r.left<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1)),t.scroll_t||t.scroll_l?(t.scroll_e=n(this),!1):void 0}),t.scroll_e||(r=n(document),c=n(window),u=r.height(),e=c.height(),f=r.width(),o=c.width(),l=r.scrollTop(),a=r.scrollLeft(),u>e&&i.pageY-l<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=-1),u>e&&e-(i.pageY-l)<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_t=1),f>o&&i.pageX-a<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=-1),f>o&&o-(i.pageX-a)<n.vakata.dnd.settings.scroll_proximity&&(t.scroll_l=1),(t.scroll_t||t.scroll_l)&&(t.scroll_e=r)),t.scroll_e&&n.vakata.dnd._scroll(!0),t.helper&&(s=parseInt(i.pageY+n.vakata.dnd.settings.helper_top,10),h=parseInt(i.pageX+n.vakata.dnd.settings.helper_left,10),u&&s+25>u&&(s=u-50),f&&h+t.helper_w>f&&(h=f-(t.helper_w+2)),t.helper.css({left:h+"px",top:s+"px"})),n.vakata.dnd._trigger("move",i),!1}},stop:function(i){if(i.type==="touchend"&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=document.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),t.is_drag)n.vakata.dnd._trigger("stop",i);else if(i.type==="touchend"&&i.target===t.target){var r=setTimeout(function(){n(i.target).click()},100);n(i.target).one("click",function(){r&&clearTimeout(r)})}return n.vakata.dnd._clean(),!1}}}(n);n.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1};n.jstree.plugins.search=function(i,r){this.bind=function(){r.bind.call(this);this._data.search.str="";this._data.search.dom=n();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=!1;this.element.on("before_open.jstree",n.proxy(function(){var r,f,i=this._data.search.res,t=[],u=n();if(i&&i.length&&(this._data.search.dom=n(this.element[0].querySelectorAll("#"+n.map(i,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(n.jstree.idregex,"\\$&"):t.replace(n.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this._data.search.som&&this._data.search.res.length)){for(r=0,f=i.length;r<f;r++)t=t.concat(this.get_node(i[r]).parents);t=n.vakata.array_remove_item(n.vakata.array_unique(t),"#");u=t.length?n(this.element[0].querySelectorAll("#"+n.map(t,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(n.jstree.idregex,"\\$&"):t.replace(n.jstree.idregex,"\\$&")}).join(", #"))):n();this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last");u=u.add(this._data.search.dom);u.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){n(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}},this)).on("search.jstree",n.proxy(function(t,i){this._data.search.som&&i.nodes.length&&(this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),i.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){n(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))},this)).on("clear_search.jstree",n.proxy(function(n,t){this._data.search.som&&t.nodes.length&&this.element.find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")},this))};this.search=function(i,r,u){if(i===!1||n.trim(i.toString())==="")return this.clear_search();i=i.toString();var e=this.settings.search,f=e.ajax?e.ajax:!1,h=null,s=[],o=[];if(this._data.search.res.length&&this.clear_search(),u===t&&(u=e.show_only_matches),!r&&f!==!1)return n.isFunction(f)?f.call(this,i,n.proxy(function(t){t&&t.d&&(t=t.d);this._load_nodes(n.isArray(t)?n.vakata.array_unique(t):[],function(){this.search(i,!0,u)},!0)},this)):(f=n.extend({},f),f.data||(f.data={}),f.data.str=i,n.ajax(f).fail(n.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(f)};this.settings.core.error.call(this,this._data.core.last_error)},this)).done(n.proxy(function(t){t&&t.d&&(t=t.d);this._load_nodes(n.isArray(t)?n.vakata.array_unique(t):[],function(){this.search(i,!0,u)},!0)},this)));this._data.search.str=i;this._data.search.dom=n();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=u;h=new n.vakata.search(i,!0,{caseSensitive:e.case_sensitive,fuzzy:e.fuzzy});n.each(this._model.data,function(n,t){t.text&&(e.search_callback&&e.search_callback.call(this,i,t)||!e.search_callback&&h.search(t.text).isMatch)&&(!e.search_leaves_only||t.state.loaded&&t.children.length===0)&&(s.push(n),o=o.concat(t.parents))});s.length&&(o=n.vakata.array_unique(o),this._search_open(o),this._data.search.dom=n(this.element[0].querySelectorAll("#"+n.map(s,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(n.jstree.idregex,"\\$&"):t.replace(n.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=s,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"));this.trigger("search",{nodes:this._data.search.dom,str:i,res:this._data.search.res,show_only_matches:u})};this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0);this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=n()};this._search_open=function(t){var i=this;n.each(t.concat([]),function(r,u){if(u==="#")return!0;try{u=n("#"+u.replace(n.jstree.idregex,"\\$&"),i.element)}catch(f){}u&&u.length&&i.is_closed(u)&&(i._data.search.opn.push(u[0].id),i.open_node(u,function(){i._search_open(t)},0))})}},function(n){n.vakata.search=function(n,t,i){i=i||{};i.fuzzy!==!1&&(i.fuzzy=!0);n=i.caseSensitive?n:n.toLowerCase();var u=i.location||0,o=i.distance||100,c=i.threshold||.6,r=n.length,s,h,f,e;return r>32&&(i.fuzzy=!1),i.fuzzy&&(s=1<<r-1,h=function(){for(var i={},t=0,t=0;t<r;t++)i[n.charAt(t)]=0;for(t=0;t<r;t++)i[n.charAt(t)]|=1<<r-t-1;return i}(),f=function(n,t){var i=n/r,f=Math.abs(u-t);return o?i+f/o:f?1:i}),e=function(t){if(t=i.caseSensitive?t:t.toLowerCase(),n===t||t.indexOf(n)!==-1)return{isMatch:!0,score:0};if(!i.fuzzy)return{isMatch:!1,score:1};var a,e,tt=t.length,v=c,o=t.indexOf(n,u),p,l,w=r+tt,b,g,k,y,nt,d=1,it=[];for(o!==-1&&(v=Math.min(f(0,o),v),o=t.lastIndexOf(n,u+r),o!==-1&&(v=Math.min(f(0,o),v))),o=-1,a=0;a<r;a++){for(p=0,l=w;p<l;)f(a,u+l)<=v?p=l:w=l,l=Math.floor((w-p)/2+p);for(w=l,g=Math.max(1,u-l+1),k=Math.min(u+l,tt)+r,y=new Array(k+2),y[k+1]=(1<<a)-1,e=k;e>=g;e--)if(nt=h[t.charAt(e-1)],y[e]=a===0?(y[e+1]<<1|1)&nt:(y[e+1]<<1|1)&nt|(b[e+1]|b[e])<<1|1|b[e+1],y[e]&s&&(d=f(a,e-1),d<=v))if(v=d,o=e-1,it.push(o),o>u)g=Math.max(1,2*u-o);else break;if(f(a+1,u)>v)break;b=y}return{isMatch:o>=0,score:d}},t===!0?{search:e}:e(t)}}(n);n.jstree.defaults.sort=function(n,t){return this.get_text(n)>this.get_text(t)?1:-1};n.jstree.plugins.sort=function(t,i){this.bind=function(){i.bind.call(this);this.element.on("model.jstree",n.proxy(function(n,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",n.proxy(function(n,t){this.sort(t.parent||t.node.parent,!1);this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",n.proxy(function(n,t){this.sort(t.parent,!1);this.redraw_node(t.parent,!0)},this))};this.sort=function(t,i){var r,u;if(t=this.get_node(t),t&&t.children&&t.children.length&&(t.children.sort(n.proxy(this.settings.sort,this)),i))for(r=0,u=t.children_d.length;r<u;r++)this.sort(t.children_d[r],!1)}};a=!1;n.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1};n.jstree.plugins.state=function(t,i){this.bind=function(){i.bind.call(this);var t=n.proxy(function(){this.element.on(this.settings.state.events,n.proxy(function(){a&&clearTimeout(a);a=setTimeout(n.proxy(function(){this.save_state()},this),100)},this))},this);this.element.on("ready.jstree",n.proxy(function(){this.element.one("restore_state.jstree",t);this.restore_state()||t()},this))};this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};n.vakata.storage.set(this.settings.state.key,JSON.stringify(t))};this.restore_state=function(){var t=n.vakata.storage.get(this.settings.state.key);if(!!t)try{t=JSON.parse(t)}catch(i){return!1}if(!!t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)return!1;if(!!t&&t.state&&(t=t.state),!!t&&n.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t){this.element.one("set_state.jstree",function(i,r){r.instance.trigger("restore_state",{state:n.extend(!0,{},t)})});return this.set_state(t),!0}return!1};this.clear_state=function(){return n.vakata.storage.del(this.settings.state.key)}},function(n){n.vakata.storage={set:function(n,t){return window.localStorage.setItem(n,t)},get:function(n){return window.localStorage.getItem(n)},del:function(n){return window.localStorage.removeItem(n)}}}(n);n.jstree.defaults.types={"#":{},"default":{}};n.jstree.plugins.types=function(i,r){this.init=function(n,i){var u,f;if(i&&i.types&&i.types["default"])for(u in i.types)if(u!=="default"&&u!=="#"&&i.types.hasOwnProperty(u))for(f in i.types["default"])i.types["default"].hasOwnProperty(f)&&i.types[u][f]===t&&(i.types[u][f]=i.types["default"][f]);r.init.call(this,n,i);this._model.data["#"].type="#"};this.refresh=function(n,t){r.refresh.call(this,n,t);this._model.data["#"].type="#"};this.bind=function(){this.element.on("model.jstree",n.proxy(function(n,i){for(var u=this._model.data,f=i.nodes,o=this.settings.types,e="default",r=0,s=f.length;r<s;r++)e="default",u[f[r]].original&&u[f[r]].original.type&&o[u[f[r]].original.type]&&(e=u[f[r]].original.type),u[f[r]].data&&u[f[r]].data.jstree&&u[f[r]].data.jstree.type&&o[u[f[r]].data.jstree.type]&&(e=u[f[r]].data.jstree.type),u[f[r]].type=e,u[f[r]].icon===!0&&o[e].icon!==t&&(u[f[r]].icon=o[e].icon);u["#"].type="#"},this));r.bind.call(this)};this.get_json=function(t,i,u){var e,s,o=this._model.data,h=i?n.extend(!0,{},i,{no_id:!1}):{},f=r.get_json.call(this,t,h,u);if(f===!1)return!1;if(n.isArray(f))for(e=0,s=f.length;e<s;e++)f[e].type=f[e].id&&o[f[e].id]&&o[f[e].id].type?o[f[e].id].type:"default",i&&i.no_id&&(delete f[e].id,f[e].li_attr&&f[e].li_attr.id&&delete f[e].li_attr.id,f[e].a_attr&&f[e].a_attr.id&&delete f[e].a_attr.id);else f.type=f.id&&o[f.id]&&o[f.id].type?o[f.id].type:"default",i&&i.no_id&&(f=this._delete_ids(f));return f};this._delete_ids=function(t){if(n.isArray(t)){for(var i=0,r=t.length;i<r;i++)t[i]=this._delete_ids(t[i]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&n.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t};this.check=function(i,u,f,e,o){if(r.check.call(this,i,u,f,e,o)===!1)return!1;u=u&&u.id?u:this.get_node(u);f=f&&f.id?f:this.get_node(f);var c=u&&u.id?n.jstree.reference(u.id):null,s,h,l,a;c=c&&c._model&&c._model.data?c._model.data:null;switch(i){case"create_node":case"move_node":case"copy_node":if(i!=="move_node"||n.inArray(u.id,f.children)===-1){if(s=this.get_rules(f),s.max_children!==t&&s.max_children!==-1&&s.max_children===f.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+i,data:JSON.stringify({chk:i,pos:e,obj:u&&u.id?u.id:!1,par:f&&f.id?f.id:!1})},!1;if(s.valid_children!==t&&s.valid_children!==-1&&n.inArray(u.type||"default",s.valid_children)===-1)return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+i,data:JSON.stringify({chk:i,pos:e,obj:u&&u.id?u.id:!1,par:f&&f.id?f.id:!1})},!1;if(c&&u.children_d&&u.parents){for(h=0,l=0,a=u.children_d.length;l<a;l++)h=Math.max(h,c[u.children_d[l]].parents.length);h=h-u.parents.length+1}(h<=0||h===t)&&(h=1);do{if(s.max_depth!==t&&s.max_depth!==-1&&s.max_depth<h)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+i,data:JSON.stringify({chk:i,pos:e,obj:u&&u.id?u.id:!1,par:f&&f.id?f.id:!1})},!1;f=this.get_node(f.parent);s=this.get_rules(f);h++}while(f)}}return!0};this.get_rules=function(n){if(n=this.get_node(n),!n)return!1;var i=this.get_type(n,!0);return i.max_depth===t&&(i.max_depth=-1),i.max_children===t&&(i.max_children=-1),i.valid_children===t&&(i.valid_children=-1),i};this.get_type=function(t,i){return t=this.get_node(t),t?i?n.extend({type:t.type},this.settings.types[t.type]):t.type:!1};this.set_type=function(i,r){var u,f,s,e,o;if(n.isArray(i)){for(i=i.slice(),f=0,s=i.length;f<s;f++)this.set_type(i[f],r);return!0}return(u=this.settings.types,i=this.get_node(i),!u[r]||!i)?!1:(e=i.type,o=this.get_icon(i),i.type=r,(o===!0||u[e]&&u[e].icon!==t&&o===u[e].icon)&&this.set_icon(i,u[r].icon!==t?u[r].icon:!0),!0)}};n.jstree.defaults.unique={case_sensitive:!1,duplicate:function(n,t){return n+" ("+t+")"}};n.jstree.plugins.unique=function(i,r){this.check=function(t,i,u,f,e){if(r.check.call(this,t,i,u,f,e)===!1)return!1;if(i=i&&i.id?i:this.get_node(i),u=u&&u.id?u:this.get_node(u),!u||!u.children)return!0;for(var s=t==="rename_node"?f:i.text,h=[],c=this.settings.unique.case_sensitive,l=this._model.data,o=0,a=u.children.length;o<a;o++)h.push(c?l[u.children[o]].text:l[u.children[o]].text.toLowerCase());c||(s=s.toLowerCase());switch(t){case"delete_node":return!0;case"rename_node":return o=n.inArray(s,h)===-1||i.text&&i.text[c?"toString":"toLowerCase"]()===s,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+s+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:f,obj:i&&i.id?i.id:!1,par:u&&u.id?u.id:!1})}),o;case"create_node":return o=n.inArray(s,h)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+s+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:f,obj:i&&i.id?i.id:!1,par:u&&u.id?u.id:!1})}),o;case"copy_node":return o=n.inArray(s,h)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+s+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:f,obj:i&&i.id?i.id:!1,par:u&&u.id?u.id:!1})}),o;case"move_node":return o=i.parent===u.id||n.inArray(s,h)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+s+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:f,obj:i&&i.id?i.id:!1,par:u&&u.id?u.id:!1})}),o}return!0};this.create_node=function(i,u,f,e,o){if(!u||u.text===t){if((i===null&&(i="#"),i=this.get_node(i),!i)||(f=f===t?"last":f,!f.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i)))return r.create_node.call(this,i,u,f,e,o);u||(u={});var l,h,c,s,a,v=this._model.data,y=this.settings.unique.case_sensitive,p=this.settings.unique.duplicate;for(h=l=this.get_string("New node"),c=[],s=0,a=i.children.length;s<a;s++)c.push(y?v[i.children[s]].text:v[i.children[s]].text.toLowerCase());for(s=1;n.inArray(y?h:h.toLowerCase(),c)!==-1;)h=p.call(this,l,++s).toString();u.text=h}return r.create_node.call(this,i,u,f,e,o)}};e=document.createElement("DIV");e.setAttribute("unselectable","on");e.setAttribute("role","presentation");e.className="jstree-wholerow";e.innerHTML="&#160;";n.jstree.plugins.wholerow=function(t,i){this.bind=function(){i.bind.call(this);this.element.on("ready.jstree set_state.jstree",n.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",n.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",n.proxy(function(){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",n.proxy(function(n,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");for(var i=!1,r=0,u=t.selected.length;r<u;r++)i=this.get_node(t.selected[r],!0),i&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",n.proxy(function(n,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",n.proxy(function(n,t){n.type==="hover_node"&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")[n.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",n.proxy(function(t){t.preventDefault();var i=n.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});n(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=n.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});n(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",n.proxy(function(t){t.stopImmediatePropagation();var i=n.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});n(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",n.proxy(function(n){return n.stopImmediatePropagation(),this.is_disabled(n.currentTarget)||this.hover_node(n.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",n.proxy(function(n){this.dehover_node(n.currentTarget)},this))};this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove();i.teardown.call(this)};this.redraw_node=function(t){if(t=i.redraw_node.apply(this,arguments),t){var r=e.cloneNode(!0);n.inArray(t.id,this._data.core.selected)!==-1&&(r.className+=" jstree-wholerow-clicked");this._data.core.focused&&this._data.core.focused===t.id&&(r.className+=" jstree-wholerow-hovered");t.insertBefore(r,t.childNodes[0])}return t}},function(n){if(document.registerElement&&Object&&Object.create){var t=Object.create(HTMLElement.prototype);t.createdCallback=function(){var i={core:{},plugins:[]};for(var t in n.jstree.plugins)n.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(i.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(i[t]=JSON.parse(this.getAttribute(t))));for(t in n.jstree.defaults.core)n.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(i.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));jQuery(this).jstree(i)};try{document.registerElement("vakata-jstree",{prototype:t})}catch(i){}}}(jQuery)}}),function(n,t){typeof exports=="object"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Spinner=t()}(this,function(){"use strict";function r(n,t){var i=document.createElement(n||"div");for(var r in t)i[r]=t[r];return i}function t(n){for(var t=1,i=arguments.length;t<i;t++)n.appendChild(arguments[t]);return n}function v(n,t,i,r){var f=["opacity",t,~~(n*100),i,r].join("-"),o=.01+i/r*100,s=Math.max(1-(1-n)/t*(100-o),n),c=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=c&&"-"+c+"-"||"";return h[f]||(e.insertRule("@"+l+"keyframes "+f+"{0%{opacity:"+s+"}"+o+"%{opacity:"+n+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+n+"}100%{opacity:"+s+"}}",e.cssRules.length),h[f]=1),f}function o(n,t){var u=n.style,r,i;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<s.length;i++)if(r=s[i]+t,u[r]!==undefined)return r;if(u[t]!==undefined)return t}function n(n,t){for(var i in t)n.style[o(n,i)||i]=t[i];return n}function c(n){for(var r,i,t=1;t<arguments.length;t++){r=arguments[t];for(i in r)n[i]===undefined&&(n[i]=r[i])}return n}function l(n){for(var t={x:n.offsetLeft,y:n.offsetTop};n=n.offsetParent;)t.x+=n.offsetLeft,t.y+=n.offsetTop;return t}function a(n,t){return typeof n=="string"?n:n[t%n.length]}function i(n){if(typeof this=="undefined")return new i(n);this.opts=c(n||{},i.defaults,y)}function p(){function u(n,t){return r("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}e.addRule(".spin-vml","behavior:url(#default#VML)");i.prototype.lines=function(i,r){function s(){return n(u("group",{coordsize:o+" "+o,coordorigin:-e+" "+-e}),{width:o,height:o})}function l(i,f,o){t(c,t(n(s(),{rotation:360/r.lines*i+"deg",left:~~f}),t(n(u("roundrect",{arcsize:r.corners}),{width:e,height:r.width,left:r.radius,top:-r.width>>1,filter:o}),u("fill",{color:a(r.color,i),opacity:r.opacity}),u("stroke",{opacity:0}))))}var e=r.length+r.width,o=2*e,h=-(r.width+r.length)*2+"px",c=n(s(),{position:"absolute",top:h,left:h}),f;if(r.shadow)for(f=1;f<=r.lines;f++)l(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=r.lines;f++)l(f);return t(i,c)};i.prototype.opacity=function(n,t,i,r){var u=n.firstChild;r=r.shadow&&r.lines||0;u&&t+r<u.childNodes.length&&(u=u.childNodes[t+r],u=u&&u.firstChild,u=u&&u.firstChild,u&&(u.opacity=i))}}var s=["webkit","Moz","ms","O"],h={},u,e=function(){var n=r("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),y={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"},f;return i.defaults={},c(i.prototype,{spin:function(t){this.stop();var f=this,i=f.opts,e=f.el=n(r(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),c=i.radius+i.length+i.width,o,s;if(t&&(t.insertBefore(e,t.firstChild||null),s=l(t),o=l(e),n(e,{left:(i.left=="auto"?s.x-o.x+(t.offsetWidth>>1):parseInt(i.left,10)+c)+"px",top:(i.top=="auto"?s.y-o.y+(t.offsetHeight>>1):parseInt(i.top,10)+c)+"px"})),e.setAttribute("role","progressbar"),f.lines(e,f.opts),!u){var a=0,p=(i.lines-1)*(1-i.direction)/2,v,y=i.fps,h=y/i.speed,w=(1-i.opacity)/(h*i.trail/100),b=h/i.lines;(function k(){a++;for(var n=0;n<i.lines;n++)v=Math.max(1-(a+(i.lines-n)*b)%h*w,i.opacity),f.opacity(e,n*i.direction+p,v,i);f.timeout=f.el&&setTimeout(k,~~(1e3/y))})()}return f},stop:function(){var n=this.el;return n&&(clearTimeout(this.timeout),n.parentNode&&n.parentNode.removeChild(n),this.el=undefined),this},lines:function(i,f){function s(t,i){return n(r(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*e+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var e=0,h=(f.lines-1)*(1-f.direction)/2,o;e<f.lines;e++)o=n(r(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:u&&v(f.opacity,f.trail,h+e*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&t(o,n(s("#000","0 0 4px #000"),{top:"2px"})),t(i,t(o,s(a(f.color,e),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(n,t,i){t<n.childNodes.length&&(n.childNodes[t].style.opacity=i)}}),f=n(r("group"),{behavior:"url(#default#VML)"}),!o(f,"transform")&&f.adj?p():u=o(f,"animation"),i}),function(n){if(typeof exports=="object")n(require("jquery"),require("spin"));else if(typeof define=="function"&&define.amd)define(["jquery","spin"],n);else{if(!window.Spinner)throw new Error("Spin.js not present");n(window.jQuery,window.Spinner)}}(function(n,t){n.fn.spin=function(i,r){return this.each(function(){var f=n(this),u=f.data();u.spinner&&(u.spinner.stop(),delete u.spinner);i!==!1&&(i=n.extend({color:r||f.css("color")},n.fn.spin.presets[i]||i),u.spinner=new t(i).spin(this))})};n.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(){"use strict";MbWaitSpinner=function(n){if(!$().spin)throw new Error("Spin.js required !!!");var t={};$.extend(t,{locked:!1,overlayColor:"transparent",color:"#000",callback:null},n);this.locked=t.locked;this.overlayColor=t.windowColor;this.spinOptions=t;this.callback=t.callback};MbWaitSpinner.prototype={show:function(){this.$element=$("<div />");this.locked?this.$element.css({position:"fixed",top:0,bottom:0,left:0,right:0,"background-color":this.overlayColor,"z-index":1e3}):this.$element.css({position:"fixed",top:"50%",left:"50%",height:"80px",width:"80px",margin:"-40px 0 0 -40px"});this.$element.appendTo("body").spin(this.spinOptions)},hide:function(){this.$element.remove()}};$.fn.mb_waitspinner=function(n){return $(this).each(function(t){var i;t==0&&(i=new MbWaitSpinner(n),i.show(),$(window).load(function(){$.isFunction(i.callback)?i.callback(i)&&i.hide():i.hide()}))})}}.call(this),function(n){"use strict";n.fn.tree=function(){return this.each(function(){var t=n(this).children("a").first(),i=n(this).children(".treeview-menu").first(),r=n(this).hasClass("active");r&&(i.show(),t.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down"));t.click(function(n){n.preventDefault();r?(i.slideUp(),r=!1,t.children(".fa-angle-down").first().removeClass("fa-angle-down").addClass("fa-angle-left"),t.parent("li").removeClass("active")):(i.slideDown(),r=!0,t.children(".fa-angle-left").first().removeClass("fa-angle-left").addClass("fa-angle-down"),t.parent("li").addClass("active"))});i.find("li > a").each(function(){var t=parseInt(n(this).css("margin-left"))+10;n(this).css({"margin-left":t+"px"})})})}}(jQuery),function(n){n.fn.extend({slimScroll:function(i){var r=n.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i);return this.each(function(){function d(t){var t,i,f;l&&(t=t||window.event,i=0,t.wheelDelta&&(i=-t.wheelDelta/120),t.detail&&(i=t.detail/3),f=t.target||t.srcTarget||t.srcElement,n(f).closest("."+r.wrapperClass).is(u.parent())&&h(i,!0),t.preventDefault&&!o&&t.preventDefault(),o||(t.returnValue=!1))}function h(n,t,i){var s,l,h;o=!1;s=n;l=u.outerHeight()-f.outerHeight();t&&(s=parseInt(f.css("top"))+n*parseInt(r.wheelStep)/100*f.outerHeight(),s=Math.min(Math.max(s,0),l),s=n>0?Math.ceil(s):Math.floor(s),f.css({top:s+"px"}));e=parseInt(f.css("top"))/(u.outerHeight()-f.outerHeight());s=e*(u[0].scrollHeight-u.outerHeight());i&&(s=n,h=s/u[0].scrollHeight*u.outerHeight(),h=Math.min(Math.max(h,0),l),f.css({top:h+"px"}));u.scrollTop(s);u.trigger("slimscrolling",~~s);nt();c()}function et(){window.addEventListener?(this.addEventListener("DOMMouseScroll",d,!1),this.addEventListener("mousewheel",d,!1)):document.attachEvent("onmousewheel",d)}function g(){a=Math.max(u.outerHeight()/u[0].scrollHeight*u.outerHeight(),ft);f.css({height:a+"px"});var n=a==u.outerHeight()?"none":"block";f.css({display:n})}function nt(){if(g(),clearTimeout(tt),e==~~e){if(o=r.allowPageScroll,it!=e){var n=~~e==0?"top":"bottom";u.trigger("slimscroll",n)}}else o=!1;if(it=e,a>=u.outerHeight()){o=!0;return}f.stop(!0,!0).fadeIn("fast");r.railVisible&&s.stop(!0,!0).fadeIn("fast")}function c(){r.alwaysVisible||(tt=setTimeout(function(){r.disableFadeOut&&l||y||p||(f.fadeOut("slow"),s.fadeOut("slow"))},1e3))}var l,y,p,tt,w,a,e,it,b="<div><\/div>",ft=30,o=!1,u=n(this),v,k,rt;if(u.parent().hasClass(r.wrapperClass)){if(v=u.scrollTop(),f=u.parent().find("."+r.barClass),s=u.parent().find("."+r.railClass),g(),n.isPlainObject(i)){if("height"in i&&i.height=="auto"&&(u.parent().css("height","auto"),u.css("height","auto"),k=u.parent().parent().height(),u.parent().css("height",k),u.css("height",k)),"scrollTo"in i)v=parseInt(r.scrollTo);else if("scrollBy"in i)v+=parseInt(r.scrollBy);else if("destroy"in i){f.remove();s.remove();u.unwrap();return}h(v,!1,!0)}return}if(!n.isPlainObject(i)||!("destroy"in i)){r.height=r.height=="auto"?u.parent().height():r.height;rt=n(b).addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height});u.css({overflow:"hidden",width:r.width,height:r.height});var s=n(b).addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),f=n(b).addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),ut=r.position=="right"?{right:r.distance}:{left:r.distance};s.css(ut);f.css(ut);u.wrap(rt);u.parent().append(f);u.parent().append(s);r.railDraggable&&f.bind("mousedown",function(i){var r=n(document);return p=!0,t=parseFloat(f.css("top")),pageY=i.pageY,r.bind("mousemove.slimscroll",function(n){currTop=t+n.pageY-pageY;f.css("top",currTop);h(0,f.position().top,!1)}),r.bind("mouseup.slimscroll",function(){p=!1;c();r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(n){return n.stopPropagation(),n.preventDefault(),!1});s.hover(function(){nt()},function(){c()});f.hover(function(){y=!0},function(){y=!1});u.hover(function(){l=!0;nt();c()},function(){l=!1;c()});u.bind("touchstart",function(n){n.originalEvent.touches.length&&(w=n.originalEvent.touches[0].pageY)});u.bind("touchmove",function(n){if(o||n.originalEvent.preventDefault(),n.originalEvent.touches.length){var t=(w-n.originalEvent.touches[0].pageY)/r.touchScrollStep;h(t,!0);w=n.originalEvent.touches[0].pageY}});g();r.start==="bottom"?(f.css({top:u.outerHeight()-f.outerHeight()}),h(0,!0)):r.start!=="top"&&(h(n(r.start).position().top,null,!0),r.alwaysVisible||f.hide());et()}}),this}});n.fn.extend({slimscroll:n.fn.slimScroll})}(jQuery),function(n){typeof n.fn.each2=="undefined"&&n.extend(n.fn,{each2:function(t){for(var i=n([0]),r=-1,u=this.length;++r<u&&(i.context=i[0]=this[r])&&t.call(i[0],r,i)!==!1;);return this}})}(jQuery),function(n,t){"use strict";function nt(t){var i=n(document.createTextNode(""));t.before(i);i.before(t);i.remove()}function c(n){function t(n){return lt[n]||n}return n.replace(/[^\u0000-\u007E]/g,t)}function e(n,t){for(var i=0,r=t.length;i<r;i=i+1)if(f(n,t[i]))return i;return-1}function at(){var t=n(ct),i;return t.appendTo(document.body),i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight},t.remove(),i}function f(n,i){return n===i?!0:n===t||i===t?!1:n===null||i===null?!1:n.constructor===String?n+""==i+"":i.constructor===String?i+""==n+"":!1}function w(n,t,i){var u,r,f;if(n===null||n.length<1)return[];for(u=n.split(t),r=0,f=u.length;r<f;r=r+1)u[r]=i(u[r]);return u}function tt(n){return n.outerWidth(!1)-n.width()}function it(i){var r="keyup-change-value";i.on("keydown",function(){n.data(i,r)===t&&n.data(i,r,i.val())});i.on("keyup",function(){var u=n.data(i,r);u!==t&&i.val()!==u&&(n.removeData(i,r),i.trigger("keyup-change"))})}function vt(i){i.on("mousemove",function(i){var r=v;(r===t||r.x!==i.pageX||r.y!==i.pageY)&&n(i.target).trigger("mousemove-filtered",i)})}function rt(n,i,r){r=r||t;var u;return function(){var t=arguments;window.clearTimeout(u);u=window.setTimeout(function(){i.apply(r,t)},n)}}function yt(n,t){var i=rt(n,function(n){t.trigger("scroll-debounced",n)});t.on("scroll",function(n){e(n.target,t.get())>=0&&i(n)})}function pt(n){n[0]!==document.activeElement&&window.setTimeout(function(){var t=n[0],r=n.val().length,i,u;n.focus();u=t.offsetWidth>0||t.offsetHeight>0;u&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(r,r):t.createTextRange&&(i=t.createTextRange(),i.collapse(!1),i.select()))},0)}function wt(t){var i,r,u;return t=n(t)[0],i=0,r=0,"selectionStart"in t?(i=t.selectionStart,r=t.selectionEnd-i):"selection"in document&&(t.focus(),u=document.selection.createRange(),r=document.selection.createRange().text.length,u.moveStart("character",-t.value.length),i=u.text.length-r),{offset:i,length:r}}function r(n){n.preventDefault();n.stopPropagation()}function bt(n){n.preventDefault();n.stopImmediatePropagation()}function kt(t){if(!s){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);s=n(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"});s.attr("class","select2-sizer");n(document.body).append(s)}return s.text(t.val()),s.width()}function a(t,i,r){var u,f=[],e;u=n.trim(t.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each2(function(){this.indexOf("select2-")===0&&f.push(this)}));u=n.trim(i.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each2(function(){this.indexOf("select2-")!==0&&(e=r(this),e&&f.push(e))}));t.attr("class",f.join(" "))}function ut(n,t,i,r){var u=c(n.toUpperCase()).indexOf(c(t.toUpperCase())),f=t.length;if(u<0){i.push(r(n));return}i.push(r(n.substring(0,u)));i.push("<span class='select2-match'>");i.push(r(n.substring(u,u+f)));i.push("<\/span>");i.push(r(n.substring(u+f,n.length)))}function ft(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})}function et(i){var f,r=null,e=i.quietMillis||100,o=i.url,u=this;return function(s){window.clearTimeout(f);f=window.setTimeout(function(){var e=i.data,f=o,c=i.transport||n.fn.select2.ajaxDefaults.transport,l={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},h=n.extend({},n.fn.select2.ajaxDefaults.params,l);e=e?e.call(u,s.term,s.page,s.context):null;f=typeof f=="function"?f.call(u,s.term,s.page,s.context):f;r&&typeof r.abort=="function"&&r.abort();i.params&&(n.isFunction(i.params)?n.extend(h,i.params.call(u)):n.extend(h,i.params));n.extend(h,{url:f,dataType:i.dataType,data:e,success:function(n){var t=i.results(n,s.page,s);s.callback(t)},error:function(n,t,i){var r={hasError:!0,jqXHR:n,textStatus:t,errorThrown:i};s.callback(r)}});r=c.call(u,h)},e)}}function ot(t){var i=t,e,u,r=function(n){return""+n.text},f;return n.isArray(i)&&(u=i,i={results:u}),n.isFunction(i)===!1&&(u=i,i=function(){return u}),f=i(),f.text&&(r=f.text,n.isFunction(r)||(e=f.text,r=function(n){return n[e]})),function(t){var u=t.term,e={results:[]},f;if(u===""){t.callback(i());return}f=function(i,e){var o,s;if(i=i[0],i.children){o={};for(s in i)i.hasOwnProperty(s)&&(o[s]=i[s]);o.children=[];n(i.children).each2(function(n,t){f(t,o.children)});(o.children.length||t.matcher(u,r(o),i))&&e.push(o)}else t.matcher(u,r(i),i)&&e.push(i)};n(i().results).each2(function(n,t){f(t,e.results)});t.callback(e)}}function st(i){var r=n.isFunction(i);return function(u){var f=u.term,e={results:[]},o=r?i(u):i;n.isArray(o)&&(n(o).each(function(){var n=this.text!==t,i=n?this.text:this;(f===""||u.matcher(f,i))&&e.results.push(n?this:{id:this,text:this})}),u.callback(e))}}function o(t,i){if(n.isFunction(t))return!0;if(!t)return!1;if(typeof t=="string")return!0;throw new Error(i+" must be a string, function, or falsy value");}function u(t,i){if(n.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(i,r)}return t}function ht(t){var i=0;return n.each(t,function(n,t){t.children?i+=ht(t.children):i++}),i}function dt(n,i,r,u){var a=n,c=!1,e,s,o,h,l;if(!u.createSearchChoice||!u.tokenSeparators||u.tokenSeparators.length<1)return t;for(;;){for(s=-1,o=0,h=u.tokenSeparators.length;o<h;o++)if(l=u.tokenSeparators[o],s=n.indexOf(l),s>=0)break;if(s<0)break;if(e=n.substring(0,s),n=n.substring(s+l.length),e.length>0&&(e=u.createSearchChoice.call(this,e,i),e!==t&&e!==null&&u.id(e)!==t&&u.id(e)!==null)){for(c=!1,o=0,h=i.length;o<h;o++)if(f(u.id(e),u.id(i[o]))){c=!0;break}c||r(e)}}if(a!==n)return n}function b(){var t=this;n.each(arguments,function(n,i){t[i].remove();t[i]=null})}function k(t,i){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=n.extend(r.prototype,i),r}if(window.Select2===t){var l,d,g,h,s,v={x:0,y:0},y,p,i={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(n){n=n.which?n.which:n;switch(n){case i.LEFT:case i.RIGHT:case i.UP:case i.DOWN:return!0}return!1},isControl:function(n){var t=n.which;switch(t){case i.SHIFT:case i.CTRL:case i.ALT:return!0}return n.metaKey?!0:!1},isFunctionKey:function(n){return n=n.which?n.which:n,n>=112&&n<=123}},ct="<div class='select2-measure-scrollbar'><\/div>",lt={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};y=n(document);h=function(){var n=1;return function(){return n++}}();l=k(Object,{bind:function(n){var t=this;return function(){n.apply(t,arguments)}},init:function(i){var f,e,o=".select2-results",s,c;this.opts=i=this.prepareOpts(i);this.id=i.id;i.element.data("select2")!==t&&i.element.data("select2")!==null&&i.element.data("select2").destroy();this.container=this.createContainer();this.liveRegion=n(".select2-hidden-accessible");this.liveRegion.length==0&&(this.liveRegion=n("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body));this.containerId="s2id_"+(i.element.attr("id")||"autogen"+h());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",i.element.attr("title"));this.body=n(document.body);a(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",i.element.attr("style"));this.container.css(u(i.containerCss,this.opts.element));this.container.addClass(u(i.containerCssClass,this.opts.element));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",r);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");a(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(u(i.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",r);this.results=f=this.container.find(o);this.search=e=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",r);vt(this.results);this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(n){this._touchEvent=!0;this.highlightUnderEvent(n)}));this.dropdown.on("touchmove",o,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}));yt(80,this.results);this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded));n(this.container).on("change",".select2-input",function(n){n.stopPropagation()});n(this.dropdown).on("change",".select2-input",function(n){n.stopPropagation()});n.fn.mousewheel&&f.mousewheel(function(n,t,i,u){var e=f.scrollTop();u>0&&e-u<=0?(f.scrollTop(0),r(n)):u<0&&f.get(0).scrollHeight-f.scrollTop()+u<=f.height()&&(f.scrollTop(f.get(0).scrollHeight-f.height()),r(n))});it(e);e.on("keyup-change input paste",this.bind(this.updateResults));e.on("focus",function(){e.addClass("select2-focused")});e.on("blur",function(){e.removeClass("select2-focused")});this.dropdown.on("mouseup",o,this.bind(function(t){n(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(n){n.stopPropagation()});this.lastSearchTerm=t;n.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());i.maximumInputLength!==null&&this.search.attr("maxlength",i.maximumInputLength);s=i.element.prop("disabled");s===t&&(s=!1);this.enable(!s);c=i.element.prop("readonly");c===t&&(c=!1);this.readonly(c);p=p||at();this.autofocus=i.element.prop("autofocus");i.element.prop("autofocus",!1);this.autofocus&&this.focus();this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var n=this.opts.element,i=n.data("select2"),r=this;this.close();n.length&&n[0].detachEvent&&r._sync&&n.each(function(){r._sync&&this.detachEvent("onpropertychange",r._sync)});this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null);this._sync=null;i!==t&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),n.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?n.attr({tabindex:this.elementTabIndex}):n.removeAttr("tabindex"),n.show());b.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(n){return n.is("option")?{id:n.prop("value"),text:n.text(),element:n.get(),css:n.attr("class"),disabled:n.prop("disabled"),locked:f(n.attr("locked"),"locked")||f(n.data("locked"),!0)}:n.is("optgroup")?{text:n.attr("label"),children:[],element:n.get(),css:n.attr("class")}:void 0},prepareOpts:function(i){var e,o,s,r,u=this;if(e=i.element,e.get(0).tagName.toLowerCase()==="select"&&(this.select=o=i.element),o&&n.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");}),i=n.extend({},{populateResults:function(r,f,e){var o,s=this.opts.id,c=this.liveRegion;o=function(r,f,l){var p,nt,v,tt,b,k,a,y,w,d,g;for(r=i.sortResults(r,f,e),g=[],p=0,nt=r.length;p<nt;p=p+1)v=r[p],b=v.disabled===!0,tt=!b&&s(v)!==t,k=v.children&&v.children.length>0,a=n("<li><\/li>"),a.addClass("select2-results-dept-"+l),a.addClass("select2-result"),a.addClass(tt?"select2-result-selectable":"select2-result-unselectable"),b&&a.addClass("select2-disabled"),k&&a.addClass("select2-result-with-children"),a.addClass(u.opts.formatResultCssClass(v)),a.attr("role","presentation"),y=n(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+h()),y.attr("role","option"),d=i.formatResult(v,y,e,u.opts.escapeMarkup),d!==t&&(y.html(d),a.append(y)),k&&(w=n("<ul><\/ul>"),w.addClass("select2-result-sub"),o(v.children,w,l+1),a.append(w)),a.data("select2-data",v),g.push(a[0]);f.append(g);c.text(i.formatMatches(r.length))};o(f,r,0)}},n.fn.select2.defaults,i),typeof i.id!="function"&&(s=i.id,i.id=function(n){return n[s]}),n.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind(function(n){var o={results:[],more:!1},s=n.term,i,r,f;f=function(t,i){var r;t.is("option")?n.matcher(s,t.text(),t)&&i.push(u.optionToData(t)):t.is("optgroup")&&(r=u.optionToData(t),t.children().each2(function(n,t){f(t,r.children)}),r.children.length>0&&i.push(r))};i=e.children();this.getPlaceholder()!==t&&i.length>0&&(r=this.getPlaceholderOption(),r&&(i=i.not(r)));i.each2(function(n,t){f(t,o.results)});n.callback(o)}),i.id=function(n){return n.id}):"query"in i||("ajax"in i?(r=i.element.data("ajax-url"),r&&r.length>0&&(i.ajax.url=r),i.query=et.call(i.element,i.ajax)):"data"in i?i.query=ot(i.data):"tags"in i&&(i.query=st(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:n.trim(t),text:n.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,r){var u=[];n(w(t.val(),i.separator,i.transformVal)).each(function(){var r={id:this,text:this},t=i.tags;n.isFunction(t)&&(t=t());n(t).each(function(){if(f(this.id,r.id))return r=this,!1});u.push(r)});r(u)}))),typeof i.query!="function")throw"query function not defined for Select2 "+i.element.attr("id");if(i.createSearchChoicePosition==="top")i.createSearchChoicePosition=function(n,t){n.unshift(t)};else if(i.createSearchChoicePosition==="bottom")i.createSearchChoicePosition=function(n,t){n.push(t)};else if(typeof i.createSearchChoicePosition!="function")throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i=this.opts.element,r,f=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}));this._sync=this.bind(function(){var r=i.prop("disabled"),n;r===t&&(r=!1);this.enable(!r);n=i.prop("readonly");n===t&&(n=!1);this.readonly(n);this.container&&(a(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(u(this.opts.containerCssClass,this.opts.element)));this.dropdown&&(a(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(u(this.opts.dropdownCssClass,this.opts.element)))});i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",f._sync)});r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;r!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new r(function(t){n.each(t,f._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=n.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{};t=n.extend({},t,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(t);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var n=this._enabled&&!this._readonly,t=!n;return n===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=n,!0)},enable:function(n){(n===t&&(n=!0),this._enabled!==n)&&(this._enabled=n,this.opts.element.prop("disabled",!n),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(n){(n===t&&(n=!1),this._readonly!==n)&&(this._readonly=n,this.opts.element.prop("readonly",n),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t=this.dropdown,l=this.container,i=l.offset(),v=l.outerHeight(!1),s=l.outerWidth(!1),o=t.outerHeight(!1),e=n(window),d=e.width(),g=e.height(),y=e.scrollLeft()+d,nt=e.scrollTop()+g,a=i.top+v,h=i.left,tt=a+o<=nt,it=i.top-o>=e.scrollTop(),r=t.outerWidth(!1),rt=function(){return h+r<=y},ut=function(){return i.left+y+l.outerWidth(!1)>r},ft=t.hasClass("select2-drop-above"),w,c,b,f,k;ft?(c=!0,!it&&tt&&(b=!0,c=!1)):(c=!1,!tt&&it&&(b=!0,c=!0));b&&(t.hide(),i=this.container.offset(),v=this.container.outerHeight(!1),s=this.container.outerWidth(!1),o=t.outerHeight(!1),y=e.scrollLeft()+d,nt=e.scrollTop()+g,a=i.top+v,h=i.left,r=t.outerWidth(!1),t.show(),this.focusSearch());this.opts.dropdownAutoWidth?(k=n(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),r=t.outerWidth(!1)+(k.scrollHeight===k.clientHeight?0:p.width),r>s?s=r:r=s,o=t.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width");this.body.css("position")!=="static"&&(w=this.body.offset(),a-=w.top,h-=w.left);!rt()&&ut()&&(h=i.left+this.container.outerWidth(!1)-r);f={left:h,width:s};c?(this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above"),o=t.outerHeight(!1),f.top=i.top-o,f.bottom="auto"):(f.top=a,f.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above"));f=n.extend(f,u(this.opts.dropdownCss,this.opts.element));t.css(f)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=n.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;this.opening();y.on("mousemove.select2Event",function(n){v.x=n.pageX;v.y=n.pageY});return!0},opening:function(){var i=this.containerEventName,u="scroll."+i,f="resize."+i,e="orientationchange."+i,t,r;if(this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=n("#select2-drop-mask"),t.length===0){t=n(document.createElement("div"));t.attr("id","select2-drop-mask").attr("class","select2-drop-mask");t.hide();t.appendTo(this.body);t.on("mousedown touchstart click",function(i){nt(t);var u=n("#select2-drop"),r;u.length>0&&(r=u.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),i.preventDefault(),i.stopPropagation())})}this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t);n("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");t.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");r=this;this.container.parents().add(window).each(function(){n(this).on(f+" "+u+" "+e,function(){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,i="scroll."+t,r="resize."+t,u="orientationchange."+t;this.container.parents().add(window).each(function(){n(this).off(i).off(r).off(u)});this.clearDropdownAlignmentPreference();n("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();y.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(n.Event("select2-close"))}},externalSearch:function(n){this.open();this.search.val(n);this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(this.search.val()!=="")return!1;var n=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return n!==t?(this.search.val(n),this.search.select(),!0):!1},getMaximumSelectionSize:function(){return u(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.results,e,i,r,u,o,s,f,h;if(i=this.highlight(),!(i<0)){if(i==0){t.scrollTop(0);return}e=this.findHighlightableChoices().find(".select2-result-label");r=n(e[i]);h=(r.offset()||{}).top||0;u=h+r.outerHeight(!0);i===e.length-1&&(f=t.find("li.select2-more-results"),f.length>0&&(u=f.offset().top+f.outerHeight(!0)));o=t.offset().top+t.outerHeight(!1);u>o&&t.scrollTop(t.scrollTop()+(u-o));s=h-t.offset().top;s<0&&r.css("display")!="none"&&t.scrollTop(t.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var u=this.findHighlightableChoices(),i=this.highlight(),r;i>-1&&i<u.length;)if(i+=t,r=n(u[i]),r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}},highlight:function(t){var i=this.findHighlightableChoices(),r,u;if(arguments.length===0)return e(i.filter(".select2-highlighted")[0],i.get());t>=i.length&&(t=i.length-1);t<0&&(t=0);this.removeHighlight();r=n(i[t]);r.addClass("select2-highlighted");this.search.attr("aria-activedescendant",r.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(r.text());u=r.data("select2-data");u&&this.opts.element.trigger({type:"select2-highlight",val:this.id(u),choice:u})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=n(t.target).closest(".select2-result-selectable"),r;i.length>0&&!i.is(".select2-highlighted")?(r=this.findHighlightableChoices(),this.highlight(r.index(i))):i.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,i=t.find("li.select2-more-results"),f,r=this.resultsPage+1,n=this,e=this.search.val(),o=this.context;i.length!==0&&(f=i.offset().top-t.offset().top-t.height(),f<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:e,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(f){n.opened()&&(n.opts.populateResults.call(this,t,f.results,{term:e,page:r,context:o}),n.postprocessResults(f,!1,!1),f.more===!0?(i.detach().appendTo(t).html(n.opts.escapeMarkup(u(n.opts.formatLoadMore,n.opts.element,r+1))),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove(),n.positionDropdown(),n.resultsPage=r,n.context=f.context,this.opts.element.trigger({type:"select2-loaded",items:f}))})})))},tokenize:function(){},updateResults:function(i){function b(){e.removeClass("select2-active");s.positionDropdown();c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?s.liveRegion.text(c.text()):s.liveRegion.text(s.opts.formatMatches(c.find('.select2-result-selectable:not(".select2-selected")').length))}function h(n){c.html(n);b()}var e=this.search,c=this.results,r=this.opts,v,s=this,l,y=e.val(),p=n.data(this.container,"select2-last-term"),w,a;if((i===!0||!p||!f(y,p))&&(n.data(this.container,"select2-last-term",y),i===!0||this.showSearchInput!==!1&&this.opened())){if(w=++this.queryCount,a=this.getMaximumSelectionSize(),a>=1&&(v=this.data(),n.isArray(v)&&v.length>=a&&o(r.formatSelectionTooBig,"formatSelectionTooBig"))){h("<li class='select2-selection-limit'>"+u(r.formatSelectionTooBig,r.element,a)+"<\/li>");return}if(e.val().length<r.minimumInputLength){o(r.formatInputTooShort,"formatInputTooShort")?h("<li class='select2-no-results'>"+u(r.formatInputTooShort,r.element,e.val(),r.minimumInputLength)+"<\/li>"):h("");i&&this.showSearch&&this.showSearch(!0);return}if(r.maximumInputLength&&e.val().length>r.maximumInputLength){o(r.formatInputTooLong,"formatInputTooLong")?h("<li class='select2-no-results'>"+u(r.formatInputTooLong,r.element,e.val(),r.maximumInputLength)+"<\/li>"):h("");return}r.formatSearching&&this.findHighlightableChoices().length===0&&h("<li class='select2-searching'>"+u(r.formatSearching,r.element)+"<\/li>");e.addClass("select2-active");this.removeHighlight();l=this.tokenize();l!=t&&l!=null&&e.val(l);this.resultsPage=1;r.query({element:r.element,term:e.val(),page:this.resultsPage,context:null,matcher:r.matcher,callback:this.bind(function(l){var a;if(w==this.queryCount){if(!this.opened()){this.search.removeClass("select2-active");return}if(l.hasError!==t&&o(r.formatAjaxError,"formatAjaxError")){h("<li class='select2-ajax-error'>"+u(r.formatAjaxError,r.element,l.jqXHR,l.textStatus,l.errorThrown)+"<\/li>");return}if(this.context=l.context===t?null:l.context,this.opts.createSearchChoice&&e.val()!==""&&(a=this.opts.createSearchChoice.call(s,e.val(),l.results),a!==t&&a!==null&&s.id(a)!==t&&s.id(a)!==null&&n(l.results).filter(function(){return f(s.id(this),s.id(a))}).length===0&&this.opts.createSearchChoicePosition(l.results,a)),l.results.length===0&&o(r.formatNoMatches,"formatNoMatches")){h("<li class='select2-no-results'>"+u(r.formatNoMatches,r.element,e.val())+"<\/li>");this.showSearch(e.val());return}c.empty();s.opts.populateResults.call(this,c,l.results,{term:e.val(),page:this.resultsPage,context:null});l.more===!0&&o(r.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+r.escapeMarkup(u(r.formatLoadMore,r.element,this.resultsPage))+"<\/li>"),window.setTimeout(function(){s.loadMoreIfNeeded()},10));this.postprocessResults(l,i);b();this.opts.element.trigger({type:"select2-loaded",items:l})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){pt(this.search)},selectHighlighted:function(n){if(this._touchMoved){this.clearTouchMoved();return}var i=this.highlight(),r=this.results.find(".select2-highlighted"),t=r.closest(".select2-result").data("select2-data");if(t){this.highlight(i);this.onSelect(t,n)}else n&&n.noFocus&&this.close()},getPlaceholder:function(){var n;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((n=this.getPlaceholderOption())!==t?n.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t)return this.opts.placeholderOption==="first"&&i||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(n.trim(i.text())===""&&i.val()==="")return i}},initContainerWidth:function(){function r(){var i,f,u,r,e,o;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){if(i=this.opts.element.attr("style"),i!==t)for(f=i.split(";"),r=0,e=f.length;r<e;r=r+1)if(o=f[r].replace(/\s/g,""),u=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),u!==null&&u.length>=1)return u[1];return this.opts.width==="resolve"?(i=this.opts.element.css("width"),i.indexOf("%")>0)?i:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px":null}return n.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=r.call(this);i!==null&&this.container.css("width",i)}});d=k(l,{createContainer:function(){return n(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&#160;<\/span><abbr class='select2-search-choice-close'><\/abbr>   <span class='select2-arrow' role='presentation'><b role='presentation'><\/b><\/span><\/a><label for='' class='select2-offscreen'><\/label><input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' /><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <label for='' class='select2-offscreen'><\/label>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'       aria-autocomplete='list' />   <\/div>   <ul class='select2-results' role='listbox'>   <\/ul><\/div>")},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0);this.parent.opening.apply(this,arguments);this.showSearchInput!==!1&&this.search.val(this.focusser.val());this.opts.shouldFocusInput(this)&&(this.search.focus(),t=this.search.get(0),t.createTextRange?(i=t.createTextRange(),i.collapse(!1),i.select()):t.setSelectionRange&&(r=this.search.val().length,t.setSelectionRange(r,r)));this.prefillNextSearchTerm();this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(n.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",!1);this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){n("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);b.call(this,"selection","focusser")},initContainer:function(){var t,e=this.container,s=this.dropdown,u=h(),f,o;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0);this.selection=t=e.find(".select2-choice");this.focusser=e.find(".select2-focusser");t.find(".select2-chosen").attr("id","select2-chosen-"+u);this.focusser.attr("aria-labelledby","select2-chosen-"+u);this.results.attr("id","select2-results-"+u);this.search.attr("aria-owns","select2-results-"+u);this.focusser.attr("id","s2id_autogen"+u);f=n("label[for='"+this.opts.element.attr("id")+"']");this.opts.element.focus(this.bind(function(){this.focus()}));this.focusser.prev().text(f.text()).attr("for",this.focusser.attr("id"));o=this.opts.element.attr("title");this.opts.element.attr("title",o||f.text());this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(n("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(n){if(this.isInterfaceEnabled()&&229!=n.keyCode){if(n.which===i.PAGE_UP||n.which===i.PAGE_DOWN){r(n);return}switch(n.which){case i.UP:case i.DOWN:this.moveHighlight(n.which===i.UP?-1:1);r(n);return;case i.ENTER:this.selectHighlighted();r(n);return;case i.TAB:this.selectHighlighted({noFocus:!0});return;case i.ESC:this.cancel(n);r(n);return}}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(n){if(this.isInterfaceEnabled()&&n.which!==i.TAB&&!i.isControl(n)&&!i.isFunctionKey(n)&&n.which!==i.ESC){if(this.opts.openOnEnter===!1&&n.which===i.ENTER){r(n);return}if(n.which==i.DOWN||n.which==i.UP||n.which==i.ENTER&&this.opts.openOnEnter){if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return;this.open();r(n);return}if(n.which==i.DELETE||n.which==i.BACKSPACE){this.opts.allowClear&&this.clear();r(n);return}}}));it(this.focusser);this.focusser.on("keyup-change input",this.bind(function(n){if(this.opts.minimumResultsForSearch>=0){if(n.stopPropagation(),this.opened())return;this.open()}}));t.on("mousedown touchstart","abbr",this.bind(function(n){this.isInterfaceEnabled()&&(this.clear(),bt(n),this.close(),this.selection&&this.selection.focus())}));t.on("mousedown touchstart",this.bind(function(i){nt(t);this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();r(i)}));s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()}));t.on("focus",this.bind(function(n){r(n)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(n.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.hide();this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data"),r,u;if(i){if(r=n.Event("select2-clearing"),this.opts.element.trigger(r),r.isDefaultPrevented())return;u=this.getPlaceholderOption();this.opts.element.val(u?u.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){var n;this.isPlaceholderOptionSelected()?(this.updateSelection(null),this.close(),this.setPlaceholder()):(n=this,this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&i!==null&&(n.updateSelection(i),n.close(),n.setPlaceholder(),n.lastSearchTerm=n.search.val())}))},isPlaceholderOptionSelected:function(){var n;return this.getPlaceholder()===t?!1:(n=this.getPlaceholderOption())!==t&&n.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(n,t){var r=n.find("option").filter(function(){return this.selected&&!this.disabled});t(i.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(i,r){var e=i.val(),u=null;t.query({matcher:function(n,i,r){var o=f(e,t.id(r));return o&&(u=r),o},callback:n.isFunction(r)?function(){r(u)}:n.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var n=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&n!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(n));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(n,t,i){var r=0,e=this,u;this.findHighlightableChoices().each2(function(n,t){if(f(e.id(t.data("select2-data")),e.opts.element.val()))return r=n,!1});i!==!1&&(t===!0&&r>=0?this.highlight(r):this.highlight(0));t===!0&&(u=this.opts.minimumResultsForSearch,u>=0&&this.showSearch(ht(n.results)>=u))},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),n(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(n,t){if(this.triggerSelect(n)){var i=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(n));this.updateSelection(n);this.opts.element.trigger({type:"select2-selected",val:this.id(n),choice:n});this.lastSearchTerm=this.search.val();this.close();t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus();f(i,this.id(n))||this.triggerChange({added:n,removed:r})}},updateSelection:function(n){var i=this.selection.find(".select2-chosen"),r,u;this.selection.data("select2-data",n);i.empty();n!==null&&(r=this.opts.formatSelection(n,i,this.opts.escapeMarkup));r!==t&&i.append(r);u=this.opts.formatSelectionCssClass(n,i);u!==t&&i.addClass(u);this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var i,r=!1,u=null,n=this,f=this.data();if(arguments.length===0)return this.opts.element.val();if(i=arguments[0],arguments.length>1&&(r=arguments[1]),this.select)this.select.val(i).find("option").filter(function(){return this.selected}).each2(function(t,i){return u=n.optionToData(i),!1}),this.updateSelection(u),this.setPlaceholder(),r&&this.triggerChange({added:u,removed:f});else{if(!i&&i!==0){this.clear(r);return}if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(i);this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):"");n.updateSelection(t);n.setPlaceholder();r&&n.triggerChange({added:t,removed:f})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(n){var i,r=!1;if(arguments.length===0)return i=this.selection.data("select2-data"),i==t&&(i=null),i;arguments.length>1&&(r=arguments[1]);n?(i=this.data(),this.opts.element.val(n?this.id(n):""),this.updateSelection(n),r&&this.triggerChange({added:n,removed:i})):this.clear(r)}});g=k(l,{createContainer:function(){return n(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <label for='' class='select2-offscreen'><\/label>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  <\/li><\/ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   <\/ul><\/div>")},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(n,t){var r=[];n.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(n,t){r.push(i.optionToData(t))});t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(i,r){var e=w(i.val(),t.separator,t.transformVal),u=[];t.query({matcher:function(i,r,o){var s=n.grep(e,function(n){return f(n,t.id(o))}).length;return s&&u.push(o),s},callback:n.isFunction(r)?function(){for(var h,n,o,s=[],i=0;i<e.length;i++)for(h=e[i],n=0;n<u.length;n++)if(o=u[n],f(h,t.id(o))){s.push(o);u.splice(n,1);break}r(s)}:n.noop})}),t},selectChoice:function(n){var t=this.container.find(".select2-search-choice-focus");t.length&&n&&n[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),n&&n.length&&(this.close(),n.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",n)))},destroy:function(){n("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);b.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",u,f;this.searchContainer=this.container.find(".select2-search-field");this.selection=u=this.container.find(t);f=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){f.search[0].focus();f.selectChoice(n(this))});this.search.attr("id","s2id_autogen"+h());this.search.prev().text(n("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.opts.element.focus(this.bind(function(){this.focus()}));this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&this.search.val().length==0||this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(n){var t;if(this.isInterfaceEnabled()){++this.keydowns;var f=u.find(".select2-search-choice-focus"),o=f.prev(".select2-search-choice:not(.select2-locked)"),e=f.next(".select2-search-choice:not(.select2-locked)"),s=wt(this.search);if(f.length&&(n.which==i.LEFT||n.which==i.RIGHT||n.which==i.BACKSPACE||n.which==i.DELETE||n.which==i.ENTER)){t=f;n.which==i.LEFT&&o.length?t=o:n.which==i.RIGHT?t=e.length?e:null:n.which===i.BACKSPACE?this.unselect(f.first())&&(this.search.width(10),t=o.length?o:e):n.which==i.DELETE?this.unselect(f.first())&&(this.search.width(10),t=e.length?e:null):n.which==i.ENTER&&(t=null);this.selectChoice(t);r(n);t&&t.length||this.open();return}if((n.which!==i.BACKSPACE||this.keydowns!=1)&&n.which!=i.LEFT||s.offset!=0||s.length)this.selectChoice(null);else{this.selectChoice(u.find(".select2-search-choice:not(.select2-locked)").last());r(n);return}if(this.opened())switch(n.which){case i.UP:case i.DOWN:this.moveHighlight(n.which===i.UP?-1:1);r(n);return;case i.ENTER:this.selectHighlighted();r(n);return;case i.TAB:this.selectHighlighted({noFocus:!0});this.close();return;case i.ESC:this.cancel(n);r(n);return}if(n.which!==i.TAB&&!i.isControl(n)&&!i.isFunctionKey(n)&&n.which!==i.BACKSPACE&&n.which!==i.ESC){if(n.which===i.ENTER){if(this.opts.openOnEnter===!1)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open();(n.which===i.PAGE_UP||n.which===i.PAGE_DOWN)&&r(n);n.which===i.ENTER&&r(n)}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();t.stopImmediatePropagation();this.opts.element.trigger(n.Event("select2-blur"))}));this.container.on("click",t,this.bind(function(t){this.isInterfaceEnabled()&&(n(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}));this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(n.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.hide();this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var n;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());(this.select||this.opts.element.val()!=="")&&(n=this,this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&i!==null&&(n.updateSelection(i),n.close(),n.clearSearch())}))},clearSearch:function(){var n=this.getPlaceholder(),i=this.getMaxSearchWidth();n!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(n).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.prefillNextSearchTerm();this.updateResults(!0);this.opts.shouldFocusInput(this)&&this.search.focus();this.opts.element.trigger(n.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var r=[],u=[],i=this;n(t).each(function(){e(i.id(this),r)<0&&(r.push(i.id(this)),u.push(this))});t=u;this.selection.find(".select2-search-choice").remove();n(t).each(function(){i.addSelectedChoice(this)});i.postprocessResults()},tokenize:function(){var n=this.search.val();n=this.opts.tokenizer.call(this,n,this.data(),this.bind(this.onSelect),this.opts);n!=null&&n!=t&&(this.search.val(n),n.length>0&&this.open())},onSelect:function(n,t){this.triggerSelect(n)&&n.text!==""&&(this.addSelectedChoice(n),this.opts.element.trigger({type:"selected",val:this.id(n),choice:n}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(n,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:n}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(i){var o=!i.locked,h=n("<li class='select2-search-choice'>    <div><\/div>    <a href='#' class='select2-search-choice-close' tabindex='-1'><\/a><\/li>"),c=n("<li class='select2-search-choice select2-locked'><div><\/div><\/li>"),u=o?h:c,l=this.id(i),s=this.getVal(),f,e;if(f=this.opts.formatSelection(i,u.find("div"),this.opts.escapeMarkup),f!=t&&u.find("div").replaceWith(n("<div><\/div>").html(f)),e=this.opts.formatSelectionCssClass(i,u.find("div")),e!=t&&u.addClass(e),o)u.find(".select2-search-choice-close").on("mousedown",r).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(n(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),r(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));u.data("select2-data",i);u.insertBefore(this.searchContainer);s.push(l);this.setVal(s)},unselect:function(t){var u=this.getVal(),i,f,r;if(t=t.closest(".select2-search-choice"),t.length===0)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data"),i){if(r=n.Event("select2-removing"),r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;while((f=e(this.id(i),u))>=0)u.splice(f,1),this.setVal(u),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(n,t,i){var s=this.getVal(),f=this.results.find(".select2-result"),h=this.results.find(".select2-result-with-children"),r=this;f.each2(function(n,t){var i=r.id(t.data("select2-data"));e(i,s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))});h.each2(function(n,t){t.is(".select2-result-selectable")||t.find(".select2-result-selectable:not(.select2-selected)").length!==0||t.addClass("select2-selected")});this.highlight()==-1&&i!==!1&&this.opts.closeOnSelect===!0&&r.highlight(0);!this.opts.createSearchChoice&&!f.filter(".select2-result:not(.select2-selected)").length>0&&(n&&(!n||n.more||this.results.find(".select2-no-results").length!==0)||o(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+u(r.opts.formatNoMatches,r.opts.element,r.search.val())+"<\/li>"))},getMaxSearchWidth:function(){return this.selection.width()-tt(this.search)},resizeSearch:function(){var i,u,t,f,n,r=tt(this.search);i=kt(this.search)+10;u=this.search.offset().left;t=this.selection.width();f=this.selection.offset().left;n=t-(u-f)-r;n<i&&(n=t-r);n<40&&(n=t-r);n<=0&&(n=i);this.search.width(Math.floor(n))},getVal:function(){var n;return this.select?(n=this.select.val(),n===null?[]:n):(n=this.opts.element.val(),w(n,this.opts.separator,this.opts.transformVal))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],n(t).each(function(){e(this,i)<0&&i.push(this)}),this.opts.element.val(i.length===0?"":i.join(this.opts.separator)))},buildChangeDetails:function(n,t){for(var r,t=t.slice(0),n=n.slice(0),i=0;i<t.length;i++)for(r=0;r<n.length;r++)f(this.opts.id(t[i]),this.opts.id(n[r]))&&(t.splice(i,1),i>0&&i--,n.splice(r,1),r--);return{added:t,removed:n}},val:function(i,r){var f,u=this;if(arguments.length===0)return this.getVal();if(f=this.data(),f.length||(f=[]),!i&&i!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();r&&this.triggerChange({added:this.data(),removed:f});return}if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(f,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=n.map(t,u.id);u.setVal(i);u.updateSelection(t);u.clearSearch();r&&u.triggerChange(u.buildChangeDetails(f,u.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(n(this).data("select2-data")))});this.setVal(t);this.triggerChange()},data:function(t,i){var f=this,r,u;if(arguments.length===0)return this.selection.children(".select2-search-choice").map(function(){return n(this).data("select2-data")}).get();u=this.data();t||(t=[]);r=n.map(t,function(n){return f.opts.id(n)});this.setVal(r);this.updateSelection(t);this.clearSearch();i&&this.triggerChange(this.buildChangeDetails(u,this.data()))}});n.fn.select2=function(){var i=Array.prototype.slice.call(arguments,0),r,u,f,o,s,c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],l=["opened","isFocused","container","dropdown"],a=["val","data"],h={search:"externalSearch"};return this.each(function(){if(i.length===0||typeof i[0]=="object")r=i.length===0?{}:n.extend({},i[0]),r.element=n(this),r.element.get(0).tagName.toLowerCase()==="select"?s=r.element.prop("multiple"):(s=r.multiple||!1,"tags"in r&&(r.multiple=s=!0)),u=s?new window.Select2["class"].multi:new window.Select2["class"].single,u.init(r);else if(typeof i[0]=="string"){if(e(i[0],c)<0)throw"Unknown method: "+i[0];if(o=t,u=n(this).data("select2"),u===t)return;if(f=i[0],f==="container"?o=u.container:f==="dropdown"?o=u.dropdown:(h[f]&&(f=h[f]),o=u[f].apply(u,i.slice(1))),e(i[0],l)>=0||e(i[0],a)>=0&&i.length==1)return!1}else throw"Invalid arguments to select2 plugin: "+i;}),o===t?this:o};n.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(n,t,i,r){var u=[];return ut(this.text(n),i.term,u,r),u.join("")},transformVal:function(t){return n.trim(t)},formatSelection:function(n,i,r){return n?r(this.text(n)):t},sortResults:function(n){return n},formatResultCssClass:function(n){return n.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(n){return n==t?null:n.id},text:function(t){return t&&this.data&&this.data.text?n.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(n,t){return c(""+t).toUpperCase().indexOf(c(""+n).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:dt,escapeMarkup:ft,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(n){return n},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(n){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t?n.opts.minimumResultsForSearch<0?!1:!0:!0}};n.fn.select2.locales=[];n.fn.select2.locales.en={formatMatches:function(n){return n===1?"One result is available, press enter to select it.":n+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(n,t){var i=t-n.length;return"Please enter "+i+" or more character"+(i==1?"":"s")},formatInputTooLong:function(n,t){var i=n.length-t;return"Please delete "+i+" character"+(i==1?"":"s")},formatSelectionTooBig:function(n){return"You can only select "+n+" item"+(n==1?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"}};n.extend(n.fn.select2.defaults,n.fn.select2.locales.en);n.fn.select2.ajaxDefaults={transport:n.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:et,local:ot,tags:st},util:{debounce:rt,markMatch:ut,escapeMarkup:ft,stripDiacritics:c},"class":{abstract:l,single:d,multi:g}}}}(jQuery),function(n){"use strict";n.fn.select2.locales.it={formatNoMatches:function(){return"Nessuna corrispondenza trovata"},formatInputTooShort:function(n,t){var i=t-n.length;return"Inserisci ancora "+i+" caratter"+(i==1?"e":"i")},formatInputTooLong:function(n,t){var i=n.length-t;return"Inserisci "+i+" caratter"+(i==1?"e":"i")+" in meno"},formatSelectionTooBig:function(n){return"Puoi selezionare solo "+n+" element"+(n==1?"o":"i")},formatLoadMore:function(){return"Caricamento in corso…"},formatSearching:function(){return"Ricerca…"}};n.extend(n.fn.select2.defaults,n.fn.select2.locales.it)}(jQuery),function(n,t){n.MB_submit=function(n,t){this.init(n,t)};n.MB_submit.prototype={init:function(t,i){var r=this;this.$form=n(t);this.$submit=this.$form.find('[data-action="submit"]').first();this.ajax=i.ajax?i.ajax:{url:this.$form.attr("data-action")};this.$alert=i.alert?n(i.alert):this.$form.find(".alert").first();this.$submit.on("click",function(){r.submitForm()});this.$form.on("change","input, select, textarea",function(){r.pendingChanges(!0)})},getValues:function(){var t={},i=this.$form;return i.find("input, select, textarea").each(function(){var r=n(this),f=n.Event("validation.mb.form"),e,u;if(f.relatedTarget=r,i.trigger(f),f.isDefaultPrevented())return t={},!1;r.data("datepicker")?(e=r.data("datepicker").getDate(),u="",isNaN(e.getTime())||(u=e.toISOString()),r.attr("name")?t[r.attr("name")]=u:t[r.attr("id")]=u):r.is(":checkbox")?r.attr("name")?t[r.attr("name")]=r.is(":checkbox:checked")?!0:!1:t[r.attr("id")]=r.is(":checkbox:checked")?!0:!1:r.is(":radio:checked")?t[r.attr("name")]=r.val():r.attr("name")?t[r.attr("name")]=r.val()||"":t[r.attr("id")]=r.val()||""}),t},submitForm:function(){var i=this.getValues(),t=this;t.$form.spin();n.ajax(this.ajax.url,{data:i,dataType:"json",type:"POST"}).fail(function(n,i,r){t.$alert.length&&t.$alert.text("Si è verificaro un errore: "+i+","+r).removeClass("alert-success").addClass("alert-danger").show()}).done(function(n){n.success?(t.$alert.length&&t.$alert.text(n.msg).addClass("alert-success").removeClass("alert-danger").show(),t.pendingChanges(!1)):t.$alert.length&&t.$alert.text(n.msg).removeClass("alert-success").addClass("alert-danger").show()}).always(function(n){t.$form.spin(!1);t.$submit.trigger("submitted.mb.form",n)})},enable:function(t){t?this.$form.find("fieldset").removeAttr("disabled"):this.$form.find("fieldset").attr("disabled","");this.$form.find('input[type="hidden"].form-control, select').each(function(){var i=n(this);i.select2&&i.select2("enable",t)})},pendingChanges:function(){var t=this,n;if(arguments.length==0)return t._pendingChanges;n=arguments[0]?!0:!1;n!=this._pendingChanges&&(t._pendingChanges=n);t.$form.trigger("changed.mb.form",n)},ajax:{},$submit:null,$form:null,$alert:null,_pendingChanges:!1};n.fn.mb_submit=function(i,r){var e={},u=this,f=i||{},o;if(n.isPlainObject(f))return n.extend(e,f),u.each(function(){var t=n(this);if(!t.data("mb-submit"))return t.data("mb-submit",new n.MB_submit(this,e)),u});switch(f){case"enable":return o=typeof r==typeof t?!0:r,u.each(function(){n(this).data("mb-submit").enable(o)});case"submit":return u.each(function(){n(this).data("mb-submit").submitForm()});case"pendingChanges":return typeof r==typeof t?u.data("mb-submit").pendingChanges():u.each(function(){n(this).data("mb-submit").pendingChanges(r)});default:return u}}}(jQuery,undefined);$('[data-ride="mb-form"]').mb_submit();Mb_history=function(n){var t=n||{};t.action=t.action||this.DEFAULT.action;t.home=t.home||this.DEFAULT.home;this.init(t)};Mb_history.DEFALTS={action:function(){},home:{}};Mb_history.prototype={init:function(n){this.history=[];typeof n.action=="function"&&(this.action=n.action);this.home=n.home;this.current=-1;this.gohome()},goto:function(n){this.history=this.history.slice(0,this.current+1);this.history.push(n);this.current=this.history.length-1;this.action(this.history[this.current],this.current,this.history.length)},back:function(){this.current>0&&(this.current-=1,this.action(this.history[this.current],this.current,this.history.length))},forward:function(){this.current<this.history.length-1&&(this.current+=1,this.action(this.history[this.current],this.current,this.history.length))},gohome:function(){this.goto(this.home)},reload:function(){this.action(this.history[this.current],this.current,this.history.length)},action:function(){},getCurrent:function(){return this.history[this.current]},setCurrent:function(n){this.history[this.current]=n},load:function(n){var i=n||"mb-history",t;typeof Storage!="undefined"&&(t=localStorage.getItem(i)||"{}",saved=JSON.parse(t),this.history=saved.history||[this.home],this.current=saved.current||0,this.reload())},save:function(n){var i=n||"mb-history",t;typeof Storage!="undefined"&&(t={},t.history=this.history,t.current=this.current,localStorage.setItem(n,JSON.stringify(t)))},history:[],current:0,home:{}},function(n){n.fn.numeric=function(t,i){typeof t=="boolean"&&(t={decimal:t,negative:!0,decimalPlaces:-1});t=t||{};typeof t.negative=="undefined"&&(t.negative=!0);var r=t.decimal===!1?"":t.decimal||".",u=t.negative===!0?!0:!1,f=typeof t.decimalPlaces=="undefined"?-1:t.decimalPlaces;return i=typeof i=="function"?i:function(){},this.data("numeric.decimal",r).data("numeric.negative",u).data("numeric.callback",i).data("numeric.decimalPlaces",f).keypress(n.fn.numeric.keypress).keyup(n.fn.numeric.keyup).blur(n.fn.numeric.blur)};n.fn.numeric.keypress=function(t){var u=n.data(this,"numeric.decimal"),s=n.data(this,"numeric.negative"),o=n.data(this,"numeric.decimalPlaces"),i=t.charCode?t.charCode:t.keyCode?t.keyCode:0,r,f,e;if(i==13&&this.nodeName.toLowerCase()=="input")return!0;if(i==13)return!1;if((r=!1,t.ctrlKey&&i==97||t.ctrlKey&&i==65)||t.ctrlKey&&i==120||t.ctrlKey&&i==88||t.ctrlKey&&i==99||t.ctrlKey&&i==67||t.ctrlKey&&i==122||t.ctrlKey&&i==90||t.ctrlKey&&i==118||t.ctrlKey&&i==86||t.shiftKey&&i==45)return!0;if(i<48||i>57){if(f=n(this).val(),n.inArray("-",f.split(""))!==0&&s&&i==45&&(f.length===0||parseInt(n.fn.getSelectionStart(this),10)===0))return!0;u&&i==u.charCodeAt(0)&&n.inArray(u,f.split(""))!=-1&&(r=!1);i!=8&&i!=9&&i!=13&&i!=35&&i!=36&&i!=37&&i!=39&&i!=46?r=!1:typeof t.charCode!="undefined"&&(t.keyCode==t.which&&t.which!==0?(r=!0,t.which==46&&(r=!1)):t.keyCode!==0&&t.charCode===0&&t.which===0&&(r=!0));u&&i==u.charCodeAt(0)&&(r=n.inArray(u,f.split(""))==-1?!0:!1)}else r=!0,u&&o>0&&(e=n.inArray(u,n(this).val().split("")),e>=0&&n(this).val().length>e+o&&(r=!1));return r};n.fn.numeric.keyup=function(){var t=n(this).val(),c,l,i,o,a,s,v,f,p,u;if(t&&t.length>0){var h=n.fn.getSelectionStart(this),e=n.fn.getSelectionEnd(this),r=n.data(this,"numeric.decimal"),w=n.data(this,"numeric.negative"),y=n.data(this,"numeric.decimalPlaces");for(r!==""&&r!==null&&(u=n.inArray(r,t.split("")),u===0&&(this.value="0"+t,h++,e++),u==1&&t.charAt(0)=="-"&&(this.value="-0"+t.substring(1),h++,e++),t=this.value),c=[0,1,2,3,4,5,6,7,8,9,"-",r],l=t.length,i=l-1;i>=0;i--){for(o=t.charAt(i),i!==0&&o=="-"?t=t.substring(0,i)+t.substring(i+1):i!==0||w||o!="-"||(t=t.substring(1)),a=!1,s=0;s<c.length;s++)if(o==c[s]){a=!0;break}a&&o!=" "||(t=t.substring(0,i)+t.substring(i+1))}if(v=n.inArray(r,t.split("")),v>0)for(f=l-1;f>v;f--)p=t.charAt(f),p==r&&(t=t.substring(0,f)+t.substring(f+1));r&&y>0&&(u=n.inArray(r,t.split("")),u>=0&&(t=t.substring(0,u+y+1),e=Math.min(t.length,e)));this.value=t;n.fn.setSelection(this,[h,e])}};n.fn.numeric.blur=function(){var r=n.data(this,"numeric.decimal"),u=n.data(this,"numeric.callback"),f=n.data(this,"numeric.negative"),t=this.value,i;t!==""&&(i=new RegExp(f?"-?":"^\\d+$|^\\d*"+r+"\\d+$"),i.exec(t)||u.apply(this))};n.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",n.fn.numeric.keypress).unbind("keyup",n.fn.numeric.keyup).unbind("blur",n.fn.numeric.blur)};n.fn.getSelectionStart=function(n){if(n.type==="number")return undefined;if(n.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return(t.moveEnd("character",n.value.length),t.text=="")?n.value.length:Math.max(0,n.value.lastIndexOf(t.text))}try{return n.selectionStart}catch(i){return 0}};n.fn.getSelectionEnd=function(n){if(n.type==="number")return undefined;if(n.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveStart("character",-n.value.length),t.text.length}return n.selectionEnd};n.fn.setSelection=function(n,t){if(typeof t=="number"&&(t=[t,t]),t&&t.constructor==Array&&t.length==2)if(n.type==="number")n.focus();else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0);i.moveStart("character",t[0]);i.moveEnd("character",t[1]-t[0]);i.select()}else{n.focus();try{n.setSelectionRange&&n.setSelectionRange(t[0],t[1])}catch(r){}}}}(jQuery),function(n){var t={element:"body",type:"info",allow_dismiss:!0,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:!1,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onHide:null,onHidden:null,icon_type:"class",template:'<div data-growl="container" class="alert" role="alert"><button type="button" class="close" data-growl="dismiss"><span aria-hidden="true">&times;<\/span><span class="sr-only">Close<\/span><\/button><span data-growl="icon"><\/span><span data-growl="title"><\/span><span data-growl="message"><\/span><a href="#" data-growl="url"><\/a><\/div>'},r=function(i,r){t=n.extend(!0,{},t,r)},u=function(t){t?n('[data-growl="container"][data-growl-position="'+t+'"]').find('[data-growl="dismiss"]').trigger("click"):n('[data-growl="container"]').find('[data-growl="dismiss"]').trigger("click")},i=function(i,r,u){var r={content:{message:typeof r=="object"?r.message:r,title:r.title?r.title:null,icon:r.icon?r.icon:null,url:r.url?r.url:null}};u=n.extend(!0,{},r,u);this.settings=n.extend(!0,{},t,u);plugin=this;f(u,this.settings,plugin);this.$template=$template},f=function(t,i,r){var u={settings:i,$element:n(i.element),template:i.template};typeof i.offset=="number"&&(i.offset={x:i.offset,y:i.offset});$template=e(u);o($template,u.settings);s($template,u.settings);h($template,u.settings,r)},e=function(t){var i=n(t.settings.template);return i.addClass("alert-"+t.settings.type),i.attr("data-growl-position",t.settings.placement.from+"-"+t.settings.placement.align),i.find('[data-growl="dismiss"]').css("display","none"),t.settings.allow_dismiss&&i.find('[data-growl="dismiss"]').css("display","inline-block"),i},o=function(n,t){n.find('[data-growl="dismiss"]').css({position:"absolute",top:"5px",right:"10px","z-index":t.z_index-1>=1?t.z_index-1:1});t.content.icon&&(t.icon_type.toLowerCase()=="class"?n.find('[data-growl="icon"]').addClass(t.content.icon):n.find('[data-growl="icon"]').is("img")?n.find('[data-growl="icon"]').attr("src",t.content.icon):n.find('[data-growl="icon"]').append('<img src="'+t.content.icon+'" />'));t.content.title&&n.find('[data-growl="title"]').html(t.content.title);t.content.message&&n.find('[data-growl="message"]').html(t.content.message);t.content.url&&(n.find('[data-growl="url"]').attr("href",t.content.url).attr("target",t.url_target),n.find('[data-growl="url"]').css({position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","z-index":t.z_index-2>=1?t.z_index-2:1}))},s=function(t,i){var r=i.offset.y,u={position:i.element==="body"?"fixed":"absolute",margin:0,"z-index":i.z_index,display:"inline-block"},f=!1;if(n('[data-growl-position="'+i.placement.from+"-"+i.placement.align+'"]').each(function(){return r=Math.max(r,parseInt(n(this).css(i.placement.from))+n(this).outerHeight()+i.spacing)}),u[i.placement.from]=r+"px",t.css(u),i.onShow)i.onShow(event);n(i.element).append(t);switch(i.placement.align){case"center":t.css({left:"50%",marginLeft:-(t.outerWidth()/2)+"px"});break;case"left":t.css("left",i.offset.x+"px");break;case"right":t.css("right",i.offset.x+"px")}t.addClass("growl-animated");t.one("webkitAnimationStart oanimationstart MSAnimationStart animationstart",function(){f=!0});t.one("webkitAnimationEnd oanimationend MSAnimationEnd animationend",function(n){if(i.onShown)i.onShown(n)});setTimeout(function(){if(!f&&i.onShown)i.onShown(event)},600)},h=function(n,t,i){n.addClass(t.animate.enter);n.find('[data-growl="dismiss"]').on("click",function(){i.close()});n.on("mouseover",function(){n.addClass("hovering")}).on("mouseout",function(){n.removeClass("hovering")});if(t.delay>=1){n.data("growl-delay",t.delay);var r=setInterval(function(){var u=parseInt(n.data("growl-delay"))-t.timer;(n.hasClass("hovering")||t.mouse_over!="pause")&&t.mouse_over=="pause"||n.data("growl-delay",u);u<=0&&(clearInterval(r),i.close())},t.timer)}};i.prototype={update:function(n,t){switch(n){case"icon":this.settings.icon_type.toLowerCase()=="class"?(this.$template.find('[data-growl="icon"]').removeClass(this.settings.content.icon),this.$template.find('[data-growl="icon"]').addClass(t)):this.$template.find('[data-growl="icon"]').is("img")?this.$template.find('[data-growl="icon"]'):this.$template.find('[data-growl="icon"]').find("img").attr().attr("src",t);break;case"url":this.$template.find('[data-growl="url"]').attr("href",t);break;case"type":this.$template.removeClass("alert-"+this.settings.type);this.$template.addClass("alert-"+t);break;default:this.$template.find('[data-growl="'+n+'"]').html(t)}return this},close:function(){var i=this.$template,t=this.settings,r=i.css(t.placement.from),u=!1;if(t.onHide)t.onHide(event);i.addClass(this.settings.animate.exit);i.nextAll('[data-growl-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]').each(function(){n(this).css(t.placement.from,r);r=parseInt(r)+t.spacing+n(this).outerHeight()});i.one("webkitAnimationStart oanimationstart MSAnimationStart animationstart",function(){u=!0});i.one("webkitAnimationEnd oanimationend MSAnimationEnd animationend",function(i){if(n(this).remove(),t.onHidden)t.onHidden(i)});return setTimeout(function(){if(!u&&(i.remove(),t.onHidden))t.onHidden(event)},100),this}};n.growl=function(n,t){if(n==!1&&t.command=="closeAll")return u(t.position),!1;if(n==!1)return r(this,t),!1;return new i(this,n,t)}}(jQuery,window,document);
/*
//# sourceMappingURL=plugins.min.js.map
*/